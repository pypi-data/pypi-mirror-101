(self.webpackChunk=self.webpackChunk||[]).push([["sentryApplicationDetails"],{"./app/data/forms/sentryApplication.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{publicIntegrationForms:()=>c,internalIntegrationForms:()=>p}),n("../../../../node_modules/react/index.js");var r,o,s=n("./app/components/links/externalLink.tsx"),i=n("./app/locale.tsx"),a=n("./app/utils.tsx"),l=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),u=function(){return[{name:"name",type:"string",required:!0,placeholder:"e.g. My Integration",label:"Name",help:"Human readable name of your Integration."},{name:"author",type:"string",required:!0,placeholder:"e.g. Acme Software",label:"Author",help:"The company or person who built and maintains this Integration."},{name:"webhookUrl",type:"string",required:!0,label:"Webhook URL",placeholder:"e.g. https://example.com/sentry/webhook/",help:(0,i._N)("All webhook requests for your integration will be sent to this URL. Visit the [webhook_docs:documentation] to see the different types and payloads.",{webhook_docs:(0,l.tZ)(s.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/webhooks/"})})},{name:"redirectUrl",type:"string",label:"Redirect URL",placeholder:"e.g. https://example.com/sentry/setup/",help:"The URL Sentry will redirect users to after installation."},{name:"verifyInstall",label:"Verify Installation",type:"boolean",help:"If enabled, installations will need to be verified before becoming installed."},{name:"isAlertable",type:"boolean",label:"Alert Rule Action",disabled:function(e){return e.webhookDisabled},disabledReason:"Cannot enable alert rule action without a webhook url",help:(0,i._N)("If enabled, this integration will be available in Issue Alert rules and Metric Alert rules in Sentry. The notification destination is the Webhook URL specified above. More on actions [learn_more:here].",{learn_more:(0,l.tZ)(s.Z,{href:"https://docs.sentry.io/product/alerts-notifications/notifications/"})})},{name:"schema",type:"textarea",label:"Schema",autosize:!0,rows:1,help:(0,i._N)("Schema for your UI components. Click [schema_docs:here] for documentation.",{schema_docs:(0,l.tZ)(s.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/ui-components/"})}),getValue:function(e){return""===e?{}:JSON.parse(e)},setValue:function(e){var t=JSON.stringify(e,null,2);return"{}"===t?"":t},validate:function(e){var t=e.id,n=e.form;if(!n.schema)return[];try{JSON.parse(n.schema)}catch(e){return[[t,"Invalid JSON"]]}return[]}},{name:"overview",type:"textarea",label:"Overview",autosize:!0,rows:1,help:"Description of your Integration and its functionality."},{name:"allowedOrigins",type:"string",multiline:!0,placeholder:"e.g. example.com",label:"Authorized JavaScript Origins",help:"Separate multiple entries with a newline.",getValue:function(e){return(0,a.Fl)(e)},setValue:function(e){return e&&"function"==typeof e.join&&e.join("\n")||""}}]},c=[{title:"Public Integration Details",fields:u()}],p=[{title:"Internal Integration Details",fields:(r=u().filter((function(e){return!["redirectUrl","verifyInstall","author"].includes(e.name||"")})),o=r.find((function(e){return"webhookUrl"===e.name})),o&&(o.required=!1),r)}]},"./app/utils/consolidatedScopes.tsx":(e,t,n)=>{"use strict";n.d(t,{A:()=>j,m:()=>k});var r=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),s=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),i=n.n(s),a=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(a),u=n("../../../../node_modules/lodash/groupBy.js"),c=n.n(u),p=n("../../../../node_modules/lodash/invertBy.js"),d=n.n(p),f=n("../../../../node_modules/lodash/pick.js"),h=n.n(f);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={read:0,write:1,admin:2},v={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},g={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},w="project:releases",x=function(e){var t=e.split(":")[1];return y[t]},Z=function(e,t){return x(e)-x(t)};function k(e){var t,n=b({},g),r=i()(e);return e.includes(w)&&(n.Release="admin",r=e.filter((function(e){return e!==w}))),(t=r,Object.values(c()(t,(function(e){return e.split(":")[0]}))).map((function(e){return e.sort(Z)})).map((function(e){return e.pop()}))).forEach((function(e){if(e){var t=e.split(":"),r=o()(t,2),s=r[0],i=r[1];n[v[s]]=i}})),n}function j(e){var t=k(e),n=h()(d()(t),["read","write","admin"]);return b(b({},{read:[],write:[],admin:[]}),n)}},"./app/utils/routeTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,o="".concat(e," - ").concat(t),s=r?"".concat(o," - ").concat(r):o;return n?"".concat(s," - Sentry"):s}},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),s=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(s),a=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),f=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),h=n.n(f),m=n("./app/components/asyncComponent.tsx"),b=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){l()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var o=d()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c()(this,e)});function s(){return o()(this,s),r.apply(this,arguments)}return i()(s,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,b.tZ)(h(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),s}(m.Z);y.displayName="AsyncView"},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=n.n(r),s=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(s),a=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(u),p=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(f),m=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),b=n("../../../../node_modules/react/index.js"),y=n("./app/styles/organization.tsx"),v=n("./app/styles/space.tsx"),g=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var w=function(e){c()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var o=h()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return d()(this,e)});function s(){return i()(this,s),r.apply(this,arguments)}return l()(s,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,s=e.action,i=e.tabs,a=e.noTitleStyles,l=e.body,u=o()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),c=!r;return(0,g.tZ)("div",u,(0,g.tZ)(x,{isNarrow:c},(0,g.tZ)(Z,null,t&&(0,g.tZ)(_,null,t),n&&(0,g.tZ)(k,{tabs:i,styled:a},(0,g.tZ)(y.Gh,null,n),r&&(0,g.tZ)(j,null,r))),s&&(0,g.tZ)(S,{isNarrow:c},s)),l&&(0,g.tZ)(C,null,l),i&&(0,g.tZ)(P,null,i))}}]),s}(b.Component);w.displayName="UnstyledSettingsPageHeader",w.defaultProps={noTitleStyles:!1};var x=(0,m.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),Z=(0,m.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),k=(0,m.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,v.Z)(4)," ",(0,v.Z)(2)," ",(0,v.Z)(3)," 0;"),j=(0,m.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,v.Z)(1.5)," 0 0;"),_=(0,m.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,v.Z)(1),";"),S=(0,m.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,v.Z)(4)}),";"),O=(0,m.Z)(w,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,v.Z)(4),";"),C=(0,m.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,v.Z)(3),";"),P=(0,m.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const I=O},"./app/views/settings/organizationDeveloperSettings/sentryApplicationDetails.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ae});var r=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),s=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),i=n.n(s),a=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=n.n(u),p=n("../../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/get.js"),h=n.n(f),m=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),b=n.n(m),y=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),v=n.n(y),g=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),w=n.n(g),x=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),Z=n.n(x),k=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),j=n.n(k),_=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),S=n.n(_),O=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),C=n("../../../../node_modules/react/index.js"),P=n("../../../../node_modules/react-router/es/index.js"),I=n("../../../../node_modules/lodash/omit.js"),R=n.n(I),T=n("../../../../node_modules/mobx-react/index.module.js"),D=n("../../../../node_modules/scroll-to-element/index.js"),A=n.n(D),E=n("./app/actionCreators/indicator.tsx"),N=n("./app/locale.tsx");function z(e,t){return F.apply(this,arguments)}function F(){return(F=c()(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,E.E3)(),e.prev=1,e.next=4,t.requestPromise("/sentry-apps/".concat(n.slug,"/api-tokens/"),{method:"POST"});case 4:return r=e.sent,(0,E.S9)((0,N.t)("Token successfully added.")),e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(1),(0,E.Iw)((0,N.t)("Unable to create token")),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function B(e,t,n){return U.apply(this,arguments)}function U(){return(U=c()(l().mark((function e(t,n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,E.E3)(),e.prev=1,e.next=4,t.requestPromise("/sentry-apps/".concat(n.slug,"/api-tokens/").concat(r,"/"),{method:"DELETE"});case 4:return(0,E.S9)((0,N.t)("Token successfully deleted.")),e.abrupt("return");case 8:throw e.prev=8,e.t0=e.catch(1),(0,E.Iw)((0,N.t)("Unable to delete token")),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var V=n("./app/components/button.tsx"),L=n("./app/components/dateTime.tsx"),q=n("./app/components/panels/index.tsx"),M=n("./app/components/tooltip.tsx"),W=n("./app/constants/index.tsx"),J=n("./app/data/forms/sentryApplication.tsx"),H=n("./app/icons/index.tsx"),G=n("./app/utils/getDynamicText.tsx"),Y=n("./app/utils/routeTitle.tsx"),Q=n("./app/views/asyncView.tsx"),$=n("./app/views/settings/components/emptyMessage.tsx"),K=n("./app/views/settings/components/forms/form.tsx"),X=n("./app/views/settings/components/forms/formField/index.tsx"),ee=n("./app/views/settings/components/forms/jsonForm.tsx"),te=n("./app/views/settings/components/forms/model.tsx"),ne=n("./app/views/settings/components/forms/textCopyInput.tsx"),re=n("./app/views/settings/components/settingsPageHeader.tsx"),oe=n("../../../../node_modules/prop-types/index.js"),se=n.n(oe),ie=n("./app/utils/consolidatedScopes.tsx"),ae=n("../../../../node_modules/lodash/find.js"),le=n.n(ae),ue=n("../../../../node_modules/lodash/flatMap.js"),ce=n.n(ue),pe=n("./app/views/settings/components/forms/selectField.tsx"),de=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var fe=function(e){Z()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var o=S()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return j()(this,e)});function o(){var e;v()(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=r.call.apply(r,[this].concat(n))).state={permissions:e.props.permissions},e.onChange=function(t,n){var r=e.state.permissions;r[t]=n,e.save(r)},e.save=function(t){e.setState({permissions:t}),e.props.onChange(t),e.context.form.setValue("scopes",e.permissionStateToList())},e}return w()(o,[{key:"permissionStateToList",value:function(){var e=this.state.permissions;return ce()(Object.entries(e),(function(e){var t,n,r,o=b()(e,2),s=o[0],i=o[1];return null===(t=function(e){return le()(W.yh,["resource",e])}(s))||void 0===t||null===(n=t.choices)||void 0===n||null===(r=n[i])||void 0===r?void 0:r.scopes}))}},{key:"render",value:function(){var e=this,t=this.state.permissions;return(0,de.tZ)(C.Fragment,null,W.yh.map((function(n){var r=Object.entries(n.choices).map((function(e){var t=b()(e,2);return[t[0],t[1].label]})),o=t[n.resource];return(0,de.tZ)(pe.Z,{name:"".concat(n.resource,"--permission"),key:n.resource,choices:r,help:(0,N.t)(n.help),label:(0,N.t)(n.label||n.resource),onChange:e.onChange.bind(e,n.resource),value:o,defaultValue:o,disabled:e.props.appPublished,disabledReason:(0,N.t)("Cannot update permissions on a published integration")})})))}}]),o}(C.Component);fe.displayName="PermissionSelection",fe.contextTypes={router:se().object.isRequired,form:se().object};var he=["issue","error"],me={issue:"created, resolved, assigned",error:"created"},be={issue:"Event",error:"Event"},ye=n("./app/components/checkbox.tsx"),ve=n("./app/utils/withOrganization.tsx");var ge=function(e){Z()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var o=S()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return j()(this,e)});function o(){var e;v()(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=r.call.apply(r,[this].concat(n))).onChange=function(t){var n=t.target.checked,r=e.props.resource;e.props.onChange(r,n)},e}return w()(o,[{key:"render",value:function(){var e=this.props,t=e.resource,n=e.organization,r=e.webhookDisabled,o=e.checked,s=new Set(n.features),i=this.props.disabledFromPermissions||r,a="Must have at least 'Read' permissions enabled for ".concat(t);return"error"!==t||s.has("integrations-event-hooks")||(i=!0,a="Your organization does not have access to the error subscription resource."),r&&(a="Cannot enable webhook subscription without specifying a webhook url"),(0,de.tZ)(C.Fragment,null,(0,de.tZ)(ke,{key:t},(0,de.tZ)(M.Z,{disabled:!i,title:a},(0,de.tZ)(Ze,{disabled:i},(0,de.tZ)(xe,null,(0,de.tZ)(_e,null,(0,N.t)("".concat(t))),(0,de.tZ)(je,null,(0,N.t)("".concat(me[t])))),(0,de.tZ)(ye.Z,{key:"".concat(t).concat(o),disabled:i,id:t,value:t,checked:o,onChange:this.onChange})))))}}]),o}(C.Component);ge.displayName="SubscriptionBox",ge.defaultProps={webhookDisabled:!1};const we=(0,ve.Z)(ge);var xe=(0,O.Z)("div",{target:"e146sawj0",label:"SubscriptionInfo"})({name:"j7qwjs",styles:"display:flex;flex-direction:column;"}),Ze=(0,O.Z)("div",{target:"e146sawj1",label:"SubscriptionGridItem"})("display:flex;flex-direction:row;justify-content:space-between;background:",(function(e){return e.theme.backgroundSecondary}),";opacity:",(function(e){return e.disabled?.3:1}),";border-radius:3px;flex:1;padding:12px;height:100%;"),ke=(0,O.Z)("div",{target:"e146sawj2",label:"SubscriptionGridItemWrapper"})({name:"ys2khs",styles:"padding:12px;width:33%;"}),je=(0,O.Z)("div",{target:"e146sawj3",label:"SubscriptionDescription"})("font-size:12px;line-height:1;color:",(function(e){return e.theme.gray300}),";white-space:nowrap;"),_e=(0,O.Z)("div",{target:"e146sawj4",label:"SubscriptionTitle"})("font-size:16px;line-height:1;color:",(function(e){return e.theme.textColor}),";white-space:nowrap;margin-bottom:5px;");var Se=function(e){Z()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var o=S()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return j()(this,e)});function o(e,t){var n;return v()(this,o),(n=r.call(this,e,t)).onChange=function(e,t){var r=new Set(n.props.events);t?r.add(e):r.delete(e),n.save(Array.from(r))},n.save=function(e){n.props.onChange(e),n.context.form.setValue("events",e)},n.context.form.setValue("events",n.props.events),n}return w()(o,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.webhookDisabled&&this.props.events.length&&this.save([])}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.permissions,n=e.events,r=n.filter((function(e){return"no-access"!==t[be[e]]}));JSON.stringify(n)!==JSON.stringify(r)&&this.save(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.permissions,r=t.webhookDisabled,o=t.events;return(0,de.tZ)(Oe,null,he.map((function(t){var s="no-access"===n[be[t]];return(0,de.tZ)(C.Fragment,{key:t},(0,de.tZ)(we,{key:t,disabledFromPermissions:s,webhookDisabled:r,checked:o.includes(t)&&!s,resource:t,onChange:e.onChange}))})))}}]),o}(C.Component);Se.displayName="Subscriptions",Se.contextTypes={router:se().object.isRequired,form:se().object},Se.defaultProps={webhookDisabled:!1};var Oe=(0,O.Z)("div",{target:"eglb30u0",label:"SubscriptionGrid"})({name:"2imjyh",styles:"display:flex;flex-wrap:wrap;"});var Ce=function(e){Z()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var o=S()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return j()(this,e)});function o(e){var t;return v()(this,o),(t=r.call(this,e)).onPermissionChange=function(e){t.setState({permissions:e})},t.onEventChange=function(e){t.setState({events:e})},t.state={permissions:t.scopeListToPermissionState(),events:t.props.events},t}return w()(o,[{key:"scopeListToPermissionState",value:function(){return(0,ie.m)(this.props.scopes)}},{key:"render",value:function(){var e=this.state,t=e.permissions,n=e.events;return(0,de.tZ)(C.Fragment,null,(0,de.tZ)(q.s_,null,(0,de.tZ)(q.V9,null,(0,N.t)("Permissions")),(0,de.tZ)(q.N,null,(0,de.tZ)(fe,{permissions:t,onChange:this.onPermissionChange,appPublished:this.props.appPublished}))),(0,de.tZ)(q.s_,null,(0,de.tZ)(q.V9,null,(0,N.t)("Webhooks")),(0,de.tZ)(q.N,null,(0,de.tZ)(Se,{permissions:t,events:n,onChange:this.onEventChange,webhookDisabled:this.props.webhookDisabled}))))}}]),o}(C.Component);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S()(e);if(t){var o=S()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j()(this,n)}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ce.displayName="PermissionsObserver",Ce.contextTypes={router:se().object.isRequired,form:se().object},Ce.defaultProps={webhookDisabled:!1,appPublished:!1};var De=function(e){Z()(n,e);var t=Re(n);function n(){return v()(this,n),t.apply(this,arguments)}return w()(n,[{key:"getData",value:function(){return Object.entries(this.fields.toJSON()).reduce((function(e,t){var n=b()(t,2),r=n[0],o=n[1];return r.endsWith("--permission")||(e[r]=o),e}),{})}},{key:"mapFormErrors",value:function(e){if(!e)return e;var t=R()(e,["scopes"]);return e.scopes&&e.scopes.forEach((function(e){var n=e.match(/Requested permission of (\w+:\w+)/);if(n){var r=function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(W.yh);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object.values(r.choices).reduce((function(e,t){var n;return e.concat(null!==(n=null==t?void 0:t.scopes)&&void 0!==n?n:[])}),[]).includes(e))return r.resource}}catch(e){n.e(e)}finally{n.f()}}(n[1]);r&&(t["".concat(r,"--permission")]=[e])}})),t}}]),n}(te.Z),Ae=function(e){Z()(n,e);var t=Re(n);function n(){var e;v()(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).form=new De,e.handleSubmitSuccess=function(t){var n=e.state.app,r=e.props.params.orgId,o="/settings/".concat(r,"/developer-settings/"),s=n?o:"".concat(o).concat(t.slug,"/");n?(0,E.S9)((0,N.t)("%s successfully saved.",t.name)):(0,E.S9)((0,N.t)("%s successfully created.",t.name)),P.browserHistory.push(s)},e.handleSubmitError=function(t){var n,r=(0,N.t)("Unknown Error");if(t.status>=400&&t.status<500&&(r=null!==(n=null==t?void 0:t.responseJSON.detail)&&void 0!==n?n:r),(0,E.Iw)(r),e.form.formErrors){var o=Object.keys(e.form.formErrors)[0];o&&A()("#".concat(o),{align:"middle",offset:0})}},e.onAddToken=function(){var t=c()(l().mark((function t(n){var r,o,s,i,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,o=r.app,s=r.tokens,o){t.next=4;break}return t.abrupt("return");case 4:return i=e.api,t.next=7,z(i,o);case 7:a=t.sent,u=s.concat(a),e.setState({tokens:u});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveToken=function(){var t=c()(l().mark((function t(n,r){var o,s,i,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o=e.state,s=o.app,i=o.tokens,s){t.next=4;break}return t.abrupt("return");case 4:return a=e.api,u=i.filter((function(e){return e.token!==n.token})),t.next=8,B(a,s,n.token);case 8:e.setState({tokens:u});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderTokens=function(){var t=e.state.tokens;return t.length>0?t.map((function(t){return(0,de.tZ)(Ee,{key:t.token},(0,de.tZ)(Ne,null,(0,de.tZ)(M.Z,{disabled:e.showAuthInfo,position:"right",containerDisplayMode:"inline",title:(0,N.t)("You do not have access to view these credentials because the permissions for this integration exceed those of your role.")},(0,de.tZ)(ne.Z,null,(0,G.Z)({value:t.token,fixed:"xxxxxx"})))),(0,de.tZ)(Fe,null,(0,de.tZ)(ze,null,"Created:"),(0,de.tZ)(L.Z,{date:(0,G.Z)({value:t.dateCreated,fixed:new Date(150820808e4)})})),(0,de.tZ)(V.ZP,{onClick:e.onRemoveToken.bind(d()(e),t),size:"small",icon:(0,de.tZ)(H.Fz,null),"data-test-id":"token-delete",type:"button"},(0,N.t)("Revoke")))})):(0,de.tZ)($.Z,{description:(0,N.t)("No tokens created yet.")})},e.onFieldChange=function(t,n){"webhookUrl"===t&&!n&&e.isInternal&&e.form.setValue("isAlertable",!1)},e}return w()(n,[{key:"getDefaultState",value:function(){return Ie(Ie({},h()(S()(n.prototype),"getDefaultState",this).call(this)),{},{app:null,tokens:[]})}},{key:"getEndpoints",value:function(){var e=this.props.params.appSlug;return e?[["app","/sentry-apps/".concat(e,"/")],["tokens","/sentry-apps/".concat(e,"/api-tokens/")]]:[]}},{key:"getTitle",value:function(){var e=this.props.params.orgId;return(0,Y.Z)((0,N.t)("Sentry Integration Details"),e,!1)}},{key:"normalize",value:function(e){return 0===e.length?e:e.map((function(e){return e.split(".").shift()}))}},{key:"isInternal",get:function(){var e=this.state.app;return e?"internal"===e.status:"new-internal/"===this.props.route.path}},{key:"showAuthInfo",get:function(){var e=this.state.app;return!(e&&e.clientSecret&&"*"===e.clientSecret[0])}},{key:"renderBody",value:function(){var e,t=this,n=this.props.params.orgId,r=this.state.app,s=r&&o()(r.scopes)||[],i=r&&this.normalize(r.events)||[],a=r?"PUT":"POST",l=r?"/sentry-apps/".concat(r.slug,"/"):"/sentry-apps/",u=this.isInternal?J.internalIntegrationForms:J.publicIntegrationForms;return e=!this.isInternal&&(!r||r.verifyInstall),(0,de.tZ)("div",null,(0,de.tZ)(re.Z,{title:this.getTitle()}),(0,de.tZ)(K.Z,{apiMethod:a,apiEndpoint:l,allowUndo:!0,initialData:Ie(Ie({organization:n,isAlertable:!1,isInternal:this.isInternal,schema:{},scopes:[]},r),{},{verifyInstall:e}),model:this.form,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,onFieldChange:this.onFieldChange},(0,de.tZ)(T.Qj,null,(function(){var e=t.isInternal&&!t.form.getValue("webhookUrl");return(0,de.tZ)(C.Fragment,null,(0,de.tZ)(ee.Z,{location:t.props.location,additionalFieldProps:{webhookDisabled:e},forms:u}),(0,de.tZ)(Ce,{webhookDisabled:e,appPublished:!!r&&"published"===r.status,scopes:s,events:i}))})),r&&"internal"===r.status&&(0,de.tZ)(q.s_,null,(0,de.tZ)(q.V9,{hasButtons:!0},(0,N.t)("Tokens"),(0,de.tZ)(V.ZP,{size:"xsmall",icon:(0,de.tZ)(H.N_,{size:"xs",isCircled:!0}),onClick:function(e){return t.onAddToken(e)},"data-test-id":"token-add",type:"button"},(0,N.t)("New Token"))),(0,de.tZ)(q.N,null,this.renderTokens())),r&&(0,de.tZ)(q.s_,null,(0,de.tZ)(q.V9,null,(0,N.t)("Credentials")),(0,de.tZ)(q.N,null,"internal"!==r.status&&(0,de.tZ)(X.Z,{name:"clientId",label:"Client ID"},(function(e){var t=e.value;return(0,de.tZ)(ne.Z,null,(0,G.Z)({value:t,fixed:"CI_CLIENT_ID"}))})),(0,de.tZ)(X.Z,{name:"clientSecret",label:"Client Secret"},(function(e){var n=e.value;return n?(0,de.tZ)(M.Z,{disabled:t.showAuthInfo,position:"right",containerDisplayMode:"inline",title:(0,N.t)("You do not have access to view these credentials because the permissions for this integration exceed those of your role.")},(0,de.tZ)(ne.Z,null,(0,G.Z)({value:n,fixed:"CI_CLIENT_SECRET"}))):(0,de.tZ)("em",null,"hidden")}))))))}}]),n}(Q.Z),Ee=(0,O.Z)(q.Lv,{target:"e13hfg1z0",label:"StyledPanelItem"})({name:"gg4vpm",styles:"display:flex;justify-content:space-between;"}),Ne=(0,O.Z)("div",{target:"e13hfg1z1",label:"TokenItem"})({name:"6gs9hh",styles:"width:70%;"}),ze=(0,O.Z)("span",{target:"e13hfg1z2",label:"CreatedTitle"})("color:",(function(e){return e.theme.gray300}),";margin-bottom:2px;"),Fe=(0,O.Z)("div",{target:"e13hfg1z3",label:"CreatedDate"})({name:"9lkchr",styles:"display:flex;flex-direction:column;font-size:14px;margin:0 10px;"})},"../../../../node_modules/lodash/_baseInverter.js":(e,t,n)=>{var r=n("../../../../node_modules/lodash/_baseForOwn.js");e.exports=function(e,t,n,o){return r(e,(function(e,r,s){t(o,n(e),r,s)})),o}},"../../../../node_modules/lodash/_createFind.js":(e,t,n)=>{var r=n("../../../../node_modules/lodash/_baseIteratee.js"),o=n("../../../../node_modules/lodash/isArrayLike.js"),s=n("../../../../node_modules/lodash/keys.js");e.exports=function(e){return function(t,n,i){var a=Object(t);if(!o(t)){var l=r(n,3);t=s(t),n=function(e){return l(a[e],e,a)}}var u=e(t,n,i);return u>-1?a[l?t[u]:u]:void 0}}},"../../../../node_modules/lodash/_createInverter.js":(e,t,n)=>{var r=n("../../../../node_modules/lodash/_baseInverter.js");e.exports=function(e,t){return function(n,o){return r(n,e,t(o),{})}}},"../../../../node_modules/lodash/find.js":(e,t,n)=>{var r=n("../../../../node_modules/lodash/_createFind.js")(n("../../../../node_modules/lodash/findIndex.js"));e.exports=r},"../../../../node_modules/lodash/invertBy.js":(e,t,n)=>{var r=n("../../../../node_modules/lodash/_baseIteratee.js"),o=n("../../../../node_modules/lodash/_createInverter.js"),s=Object.prototype,i=s.hasOwnProperty,a=s.toString,l=o((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=a.call(t)),i.call(e,t)?e[t].push(n):e[t]=[n]}),r);e.exports=l}}]);
//# sourceMappingURL=sentryApplicationDetails.js.map