(self.webpackChunk=self.webpackChunk||[]).push([["AlertsList"],{"./app/components/onboardingPanel.tsx":(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var r=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),s=(n("../../../../node_modules/react/index.js"),n("./app/components/panels/index.tsx")),a=n("./app/styles/space.tsx"),i=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function o(t){var e=t.className,n=t.image,r=t.children;return(0,i.tZ)(s.s_,{className:e},(0,i.tZ)(l,null,(0,i.tZ)(p,null,n),(0,i.tZ)(u,null,r)))}o.displayName="OnboardingPanel";var l=(0,r.Z)("div",{target:"eipqko00",label:"Container"})("padding:",(0,a.Z)(3),";position:relative;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){min-height:350px;}"),u=(0,r.Z)("div",{target:"eipqko01",label:"StyledBox"})("z-index:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:2;}"),p=(0,r.Z)(u,{target:"eipqko02",label:"IlloBox"})("position:relative;min-height:100px;max-width:300px;margin:",(0,a.Z)(2)," auto;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:1;margin:",(0,a.Z)(3),";max-width:auto;}");const d=o},"./app/views/alerts/list/index.tsx":(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>mt});var r=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),s=n.n(r),a=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),i=n.n(a),o=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(o),u=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),p=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(m),f=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(f),y=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),b=n.n(y),v=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),Z=n("../../../../node_modules/react/index.js"),x=n("../../../../node_modules/lodash/flatten.js"),w=n.n(x),k=n("../../../../node_modules/lodash/omit.js"),j=n.n(k),z=n("./app/actionCreators/prompts.tsx"),O=n("./app/components/acl/feature.tsx"),_=n("./app/components/alert.tsx"),P=n("./app/components/asyncComponent.tsx"),S=n("./app/components/button.tsx"),L=n("./app/components/buttonBar.tsx"),R=n("./app/components/createAlertButton.tsx"),A=n("./app/components/layouts/thirds.tsx"),q=n("./app/components/links/externalLink.tsx"),N=n("./app/components/loadingIndicator.tsx"),I=n("./app/components/organizations/globalSelectionHeader/index.tsx"),C=n("./app/components/pagination.tsx"),B=n("./app/components/panels/index.tsx"),D=n("./app/components/sentryDocumentTitle.tsx"),V=n("./app/icons/index.tsx"),T=n("./app/locale.tsx"),E=n("./app/styles/space.tsx"),M=n("./app/utils/analytics.tsx"),X=n("./app/utils/projects.tsx"),F=n("./app/utils/withOrganization.tsx"),G=n("./app/views/settings/components/emptyMessage.tsx"),H=n("./app/views/alerts/list/header.tsx"),U=n("./images/spot/alerts-empty-state.svg"),W=n.n(U),K=n("./app/components/onboardingPanel.tsx"),Y=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function J(t){var e=t.actions;return(0,Y.tZ)(K.Z,{image:(0,Y.tZ)(Q,{src:W()})},(0,Y.tZ)("h3",null,(0,T.t)("More signal, less noise")),(0,Y.tZ)("p",null,(0,T.t)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")),(0,Y.tZ)($,{gap:1},e))}J.displayName="Onboarding";var Q=(0,v.Z)("img",{target:"e1ljbtxe0",label:"AlertsImage"})("@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width:",(function(t){return t.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),$=(0,v.Z)(L.Z,{target:"e1ljbtxe1",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"});const tt=J;var et=n("./app/views/alerts/list/row.tsx"),nt=n("./app/views/alerts/list/styles.tsx");function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var s=b()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g()(this,n)}}var it="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function ot(t){return["open","closed"].includes(t)?t:"open"}var lt=function(t){h()(r,t);var e,n=at(r);function r(){return p()(this,r),n.apply(this,arguments)}return c()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location.query,r=ot(n.status);return[["incidentList","/organizations/".concat(e&&e.orgId,"/incidents/"),{query:st(st({},n),{},{status:r})}]]}},{key:"onLoadAllEndpointsSuccess",value:(e=i()(s().mark((function t(){var e,n,r,a,i,o,l,u,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.state.incidentList)&&0===e.length){t.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),t.abrupt("return");case 4:return this.setState({loading:!0}),n=this.props,r=n.params,a=n.location,i=n.organization,t.next=8,this.api.requestPromise("/organizations/".concat(null==r?void 0:r.orgId,"/alert-rules/"),{method:"GET",query:a.query});case 8:if(o=t.sent,!(l=o.length>0)){t.next=13;break}return this.setState({hasAlertRule:l,firstVisitShown:!1,loading:!1}),t.abrupt("return");case 13:return t.next=15,(0,z.v)(this.api,{organizationId:i.id,feature:"alert_stream"});case 15:u=t.sent,(p=!(null!=u&&u.dismissedTime))&&(0,z.X)(this.api,{feature:"alert_stream",organizationId:i.id,status:"dismissed"}),this.setState({hasAlertRule:l,firstVisitShown:p,loading:!1});case 19:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){var t=this.state.firstVisitShown,e=this.props.organization;if(!t)return null;var n=(0,Y.tZ)(Z.Fragment,null,(0,Y.tZ)(S.ZP,{size:"small",external:!0,href:it},(0,T.t)("View Features")),(0,Y.tZ)(R.Z,{organization:e,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream"},(0,T.t)("Create Alert Rule")));return(0,Y.tZ)(tt,{actions:n})}},{key:"tryRenderEmpty",value:function(){var t=this.state,e=t.hasAlertRule,n=t.incidentList,r=ot(this.props.location.query.status);return!n||n.length>0?null:(0,Y.tZ)(G.Z,{size:"medium",icon:(0,Y.tZ)(V.DL,{isCircled:!0,size:"48"}),title:e?"open"===r?(0,T.t)("No unresolved metric alerts in the selected projects."):(0,T.t)("No resolved metric alerts in the selected projects."):(0,T.t)("No metric alert rules exist for the selected projects."),description:(0,T._N)("Learn more about [link:Metric Alerts]",{link:(0,Y.tZ)(q.Z,{href:it})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var t,e,n=this.state,r=n.loading,s=n.incidentList,a=n.incidentListPageLinks,i=n.hasAlertRule,o=this.props,l=o.params.orgId,u=o.organization,p=new Set(w()(null==s?void 0:s.map((function(t){return t.projects})))),d=!(!s||0!==s.length||void 0!==i),c=r||d,m=ot(this.props.location.query.status);return(0,Y.tZ)(Z.Fragment,null,null!==(t=this.tryRenderOnboarding())&&void 0!==t?t:(0,Y.tZ)(B.s_,null,!r&&(0,Y.tZ)(ct,null,(0,Y.tZ)(nt.d,{status:m},(0,Y.tZ)(dt,{status:m},(0,Y.tZ)("div",null,(0,T.t)("Alert")),"open"===m&&(0,Y.tZ)("div",null,(0,T.t)("Graph"))),(0,Y.tZ)("div",null,(0,T.t)("Project")),(0,Y.tZ)("div",null,(0,T.t)("Triggered")),"closed"===m&&(0,Y.tZ)("div",null,(0,T.t)("Duration")),"closed"===m&&(0,Y.tZ)("div",null,(0,T.t)("Resolved")))),c?(0,Y.tZ)(N.Z,null):null!==(e=this.tryRenderEmpty())&&void 0!==e?e:(0,Y.tZ)(B.N,null,(0,Y.tZ)(X.Z,{orgId:l,slugs:Array.from(p)},(function(t){var e=t.initiallyLoaded,n=t.projects;return s.map((function(t){return(0,Y.tZ)(et.Z,{key:t.id,projectsLoaded:e,projects:n,incident:t,orgId:l,filteredStatus:m,organization:u})}))})))),(0,Y.tZ)(C.Z,{pageLinks:a}))}},{key:"renderBody",value:function(){var t=this.props,e=t.params,n=t.location,r=t.organization,s=t.router,a=n.pathname,i=n.query,o=e.orgId,l=j()(st(st({},i),{},{status:"open"}),"cursor"),u=j()(st(st({},i),{},{status:"closed"}),"cursor"),p=ot(i.status);return(0,Y.tZ)(D.Z,{title:(0,T.t)("Alerts"),orgSlug:o},(0,Y.tZ)(I.Z,{organization:r,showDateSelector:!1},(0,Y.tZ)(H.Z,{organization:r,router:s,activeTab:"stream"}),(0,Y.tZ)(A.uT,null,(0,Y.tZ)(A.or,{fullWidth:!0},!this.tryRenderOnboarding()&&(0,Y.tZ)(pt,{merged:!0,active:p},(0,Y.tZ)(S.ZP,{to:{pathname:a,query:l},barId:"open",size:"small"},(0,T.t)("Unresolved")),(0,Y.tZ)(S.ZP,{to:{pathname:a,query:u},barId:"closed",size:"small"},(0,T.t)("Resolved"))),this.renderList()))))}}]),r}(P.Z),ut=function(t){h()(n,t);var e=at(n);function n(){return p()(this,n),e.apply(this,arguments)}return c()(n,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(t){var e,n;(null===(e=t.location.query)||void 0===e?void 0:e.status)!==(null===(n=this.props.location.query)||void 0===n?void 0:n.status)&&this.trackView()}},{key:"trackView",value:function(){var t=this.props,e=t.location,n=t.organization,r=ot(e.query.status);(0,M.ec)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:n.id,status:r})}},{key:"renderNoAccess",value:function(){return(0,Y.tZ)(A.uT,null,(0,Y.tZ)(A.or,{fullWidth:!0},(0,Y.tZ)(_.Z,{type:"warning"},(0,T.t)("You don't have access to this feature"))))}},{key:"render",value:function(){var t=this.props.organization;return(0,Y.tZ)(O.Z,{features:["organizations:incidents"],organization:t,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess},(0,Y.tZ)(lt,this.props))}}]),n}(Z.Component);ut.displayName="IncidentsListContainer";var pt=(0,v.Z)(L.Z,{target:"ebw9n8a0",label:"StyledButtonBar"})("width:100px;margin-bottom:",(0,E.Z)(1),";"),dt=(0,v.Z)(nt.O,{target:"ebw9n8a1",label:"PaddedTitleAndSparkLine"})("padding-left:",(0,E.Z)(2),";"),ct=(0,v.Z)(B.V9,{target:"ebw9n8a2",label:"StyledPanelHeader"})("padding:",(0,E.Z)(1.5)," ",(0,E.Z)(2)," ",(0,E.Z)(1.5)," 0;");const mt=(0,F.Z)(ut)},"./images/spot/alerts-empty-state.svg":(t,e,n)=>{t.exports=n.p+"spot/alerts-empty-state.4d03bc.svg"}}]);
//# sourceMappingURL=AlertsList.js.map