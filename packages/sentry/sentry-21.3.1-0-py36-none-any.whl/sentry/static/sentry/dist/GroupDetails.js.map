{"version":3,"sources":["webpack:///./app/actionCreators/teams.tsx","webpack:///./app/components/projects/missingProjectMembership.tsx","webpack:///./app/utils/recreateRoute.tsx","webpack:///./app/views/organizationGroupDetails/constants.tsx","webpack:///./app/views/organizationGroupDetails/groupDetails.tsx","webpack:///./app/views/organizationGroupDetails/index.tsx"],"names":["doCallback","params","name","args","callIfFunction","fetchTeamDetails","api","options","TeamActions","teamId","request","orgId","success","data","error","updateTeamSuccess","updateTeam","endpoint","method","joinTeam","memberId","id","uniqueId","leaveTeam","createTeam","team","requestPromise","then","addSuccessMessage","tct","slug","organization","err","addErrorMessage","removeTeam","MissingProjectMembership","props","handleChangeTeam","teamObj","value","setState","getPendingTeamOption","label","DisabledLabel","t","projectSlug","project","projects","find","p","state","loading","teamSlug","this","features","TeamStore","has","busy","isPending","disabled","priority","type","onClick","bind","pending","teams","forEach","push","Set","teamAccess","getTeamsForAccess","map","StyledPanel","length","icon","size","title","description","action","Field","StyledSelectControl","placeholder","onChange","renderJoinTeam","React","Panel","space","SelectControl","withApi","recreateRoute","to","lastRootIndex","routeIndex","routes","location","stepBack","paths","path","indexOf","findLastIndex","slice","baseRoute","search","hash","fullRoute","join","replaceRouterParams","ERROR_TYPES","GroupDetails","initialState","remountComponent","fetchData","refetchGroup","loadingGroup","loadingEvent","group","status","ReprocessingStatus","groupDetailsEndpoint","query","getGroupQuery","updatedGroup","reprocessingNewRoute","getReprocessingNewRoute","ReactRouter","handleRequestError","listener","GroupStore","itemIds","onGroupChange","undefined","interval","updateReprocessingProgress","prevProps","prevState","isGlobalSelectionReady","pathname","canLoadEventEarly","eventId","getEvent","clearInterval","eventError","errorType","includes","groupId","environments","orgSlug","projectId","fetchGroupEvent","event","Sentry","currentTab","baseUrl","isEventRoute","hasReprocessingV2Feature","setInterval","nextGroupId","reprocessingStatus","getGroupReprocessingStatus","getCurrentRouteInfo","TAB","environment","expand","getFetchDataRequestErrorType","eventPromise","groupPromise","Promise","all","markEventSeen","locationWithProject","_allp","Error","stale","defaultTitle","getTitle","message","getMessage","eventDetails","proj","onRetry","children","groupReprocessingStatus","childProps","isError","renderError","slugs","data-test-id","initiallyLoaded","fetchError","renderContent","skipLoadLastUsed","forceProject","showDateSelector","shouldForceProject","lockedMessageSubject","showIssueStreamLink","showProjectSettingsLink","renderPageContent","childContextTypes","SentryTypes","PropTypes","OrganizationGroupDetails","startMetricCollection","analytics","group_id","parseInt","org_id","startType","isLightweightOrganization","metric","start_type","selection","key","withOrganization","withGlobalSelection"],"mappings":"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","file":"GroupDetails.js","sourcesContent":["import {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport TeamActions from 'app/actions/teamActions';\nimport {Client} from 'app/api';\nimport {tct} from 'app/locale';\nimport {Team} from 'app/types';\nimport {callIfFunction} from 'app/utils/callIfFunction';\nimport {uniqueId} from 'app/utils/guid';\n\ntype CallbackOptions = {\n  success?: Function;\n  error?: Function;\n};\n\nconst doCallback = (\n  params: CallbackOptions = {},\n  name: keyof CallbackOptions,\n  ...args: any[]\n) => {\n  callIfFunction(params[name], ...args);\n};\n\n/**\n * Note these are both slugs\n */\ntype OrgSlug = {orgId: string};\ntype OrgAndTeamSlug = OrgSlug & {teamId: string};\n\ntype TeamData = {data: Team};\n\n/**\n * This is the actual internal id, not username or email\n */\ntype MemberId = {memberId: string};\n\n// Fetch teams for org\nexport function fetchTeams(api: Client, params: OrgSlug, options: CallbackOptions) {\n  TeamActions.fetchAll(params.orgId);\n  return api.request(`/teams/${params.orgId}/`, {\n    success: data => {\n      TeamActions.fetchAllSuccess(params.orgId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.fetchAllError(params.orgId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function fetchTeamDetails(\n  api: Client,\n  params: OrgAndTeamSlug,\n  options?: CallbackOptions\n) {\n  TeamActions.fetchDetails(params.teamId);\n  return api.request(`/teams/${params.orgId}/${params.teamId}/`, {\n    success: data => {\n      TeamActions.fetchDetailsSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.fetchDetailsError(params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function updateTeamSuccess(teamId: OrgAndTeamSlug['teamId'], data: Team) {\n  TeamActions.updateSuccess(teamId, data);\n}\n\nexport function updateTeam(\n  api: Client,\n  params: OrgAndTeamSlug & TeamData,\n  options: CallbackOptions\n) {\n  const endpoint = `/teams/${params.orgId}/${params.teamId}/`;\n  TeamActions.update(params.teamId, params.data);\n\n  return api.request(endpoint, {\n    method: 'PUT',\n    data: params.data,\n    success: data => {\n      updateTeamSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.updateError(params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function joinTeam(\n  api: Client,\n  params: OrgAndTeamSlug & Partial<MemberId>,\n  options: CallbackOptions\n) {\n  const endpoint = `/organizations/${params.orgId}/members/${\n    params.memberId ?? 'me'\n  }/teams/${params.teamId}/`;\n  const id = uniqueId();\n\n  TeamActions.update(id, params.teamId);\n\n  return api.request(endpoint, {\n    method: 'POST',\n    success: data => {\n      TeamActions.updateSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.updateError(id, params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function leaveTeam(\n  api: Client,\n  params: OrgAndTeamSlug & Partial<MemberId>,\n  options: CallbackOptions\n) {\n  const endpoint = `/organizations/${params.orgId}/members/${\n    params.memberId || 'me'\n  }/teams/${params.teamId}/`;\n  const id = uniqueId();\n\n  TeamActions.update(id, params.teamId);\n\n  return api.request(endpoint, {\n    method: 'DELETE',\n    success: data => {\n      TeamActions.updateSuccess(params.teamId, data);\n      doCallback(options, 'success', data);\n    },\n    error: error => {\n      TeamActions.updateError(id, params.teamId, error);\n      doCallback(options, 'error', error);\n    },\n  });\n}\n\nexport function createTeam(api: Client, team: Pick<Team, 'slug'>, params: OrgSlug) {\n  TeamActions.createTeam(team);\n\n  return api\n    .requestPromise(`/organizations/${params.orgId}/teams/`, {\n      method: 'POST',\n      data: team,\n    })\n    .then(\n      data => {\n        TeamActions.createTeamSuccess(data);\n        addSuccessMessage(\n          tct('[team] has been added to the [organization] organization', {\n            team: `#${data.slug}`,\n            organization: params.orgId,\n          })\n        );\n        return data;\n      },\n      err => {\n        TeamActions.createTeamError(team.slug, err);\n        addErrorMessage(\n          tct('Unable to create [team] in the [organization] organization', {\n            team: `#${team.slug}`,\n            organization: params.orgId,\n          })\n        );\n        throw err;\n      }\n    );\n}\n\nexport function removeTeam(api: Client, params: OrgAndTeamSlug) {\n  TeamActions.removeTeam(params.teamId);\n\n  return api\n    .requestPromise(`/teams/${params.orgId}/${params.teamId}/`, {\n      method: 'DELETE',\n    })\n    .then(\n      data => {\n        TeamActions.removeTeamSuccess(params.teamId, data);\n        addSuccessMessage(\n          tct('[team] has been removed from the [organization] organization', {\n            team: `#${params.teamId}`,\n            organization: params.orgId,\n          })\n        );\n        return data;\n      },\n      err => {\n        TeamActions.removeTeamError(params.teamId, err);\n        addErrorMessage(\n          tct('Unable to remove [team] from the [organization] organization', {\n            team: `#${params.teamId}`,\n            organization: params.orgId,\n          })\n        );\n        throw err;\n      }\n    );\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport {joinTeam} from 'app/actionCreators/teams';\nimport {Client} from 'app/api';\nimport Button from 'app/components/button';\nimport SelectControl from 'app/components/forms/selectControl';\nimport {Panel} from 'app/components/panels';\nimport {IconFlag} from 'app/icons';\nimport {t} from 'app/locale';\nimport TeamStore from 'app/stores/teamStore';\nimport space from 'app/styles/space';\nimport {Organization, Project} from 'app/types';\nimport withApi from 'app/utils/withApi';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\n\ntype SelectOption = Record<'value' | 'label', string>;\n\ntype Props = {\n  api: Client;\n  organization: Organization;\n  projectSlug?: string;\n};\n\ntype State = {\n  loading: boolean;\n  error: boolean;\n  project?: Project;\n  team: string | null;\n};\n\nclass MissingProjectMembership extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const {organization, projectSlug} = this.props;\n    const project = organization.projects?.find(p => p.slug === projectSlug);\n\n    this.state = {\n      loading: false,\n      error: false,\n      project,\n      team: '',\n    };\n  }\n\n  joinTeam(teamSlug: string) {\n    this.setState({\n      loading: true,\n    });\n\n    joinTeam(\n      this.props.api,\n      {\n        orgId: this.props.organization.slug,\n        teamId: teamSlug,\n      },\n      {\n        success: () => {\n          this.setState({\n            loading: false,\n            error: false,\n          });\n          addSuccessMessage(t('Request to join team sent.'));\n        },\n        error: () => {\n          this.setState({\n            loading: false,\n            error: true,\n          });\n          addErrorMessage(t('There was an error while trying to request access.'));\n        },\n      }\n    );\n  }\n\n  renderJoinTeam(teamSlug: string, features: Set<string>) {\n    const team = TeamStore.getBySlug(teamSlug);\n\n    if (!team) {\n      return null;\n    }\n    if (this.state.loading) {\n      if (features.has('open-membership')) {\n        return <Button busy>{t('Join Team')}</Button>;\n      }\n      return <Button busy>{t('Request Access')}</Button>;\n    } else if (team?.isPending) {\n      return <Button disabled>{t('Request Pending')}</Button>;\n    } else if (features.has('open-membership')) {\n      return (\n        <Button\n          priority=\"primary\"\n          type=\"button\"\n          onClick={this.joinTeam.bind(this, teamSlug)}\n        >\n          {t('Join Team')}\n        </Button>\n      );\n    }\n    return (\n      <Button\n        priority=\"primary\"\n        type=\"button\"\n        onClick={this.joinTeam.bind(this, teamSlug)}\n      >\n        {t('Request Access')}\n      </Button>\n    );\n  }\n\n  getTeamsForAccess() {\n    const request: string[] = [];\n    const pending: string[] = [];\n    const teams = this.state.project?.teams ?? [];\n    teams.forEach(({slug}) => {\n      const team = TeamStore.getBySlug(slug);\n      if (!team) {\n        return;\n      }\n      team.isPending ? pending.push(team.slug) : request.push(team.slug);\n    });\n\n    return [request, pending];\n  }\n\n  handleChangeTeam = (teamObj: SelectOption | null) => {\n    const team = teamObj ? teamObj.value : null;\n    this.setState({team});\n  };\n\n  getPendingTeamOption = (team: string) => {\n    return {\n      value: team,\n      label: <DisabledLabel>{t(`#${team}`)}</DisabledLabel>,\n    };\n  };\n\n  render() {\n    const {organization} = this.props;\n    const teamSlug = this.state.team;\n    const teams = this.state.project?.teams ?? [];\n    const features = new Set(organization.features);\n\n    const teamAccess = [\n      {\n        label: t('Request Access'),\n        options: this.getTeamsForAccess()[0].map(request => ({\n          value: request,\n          label: t(`#${request}`),\n        })),\n      },\n      {\n        label: t('Pending Requests'),\n        options: this.getTeamsForAccess()[1].map(pending =>\n          this.getPendingTeamOption(pending)\n        ),\n      },\n    ];\n\n    return (\n      <StyledPanel>\n        {!teams.length ? (\n          <EmptyMessage icon={<IconFlag size=\"xl\" />}>\n            {t(\n              'No teams have access to this project yet. Ask an admin to add your team to this project.'\n            )}\n          </EmptyMessage>\n        ) : (\n          <EmptyMessage\n            icon={<IconFlag size=\"xl\" />}\n            title={t(\"You're not a member of this project.\")}\n            description={t(\n              `You'll need to join a team with access before you can view this data.`\n            )}\n            action={\n              <Field>\n                <StyledSelectControl\n                  name=\"select\"\n                  placeholder={t('Select a Team')}\n                  options={teamAccess}\n                  onChange={this.handleChangeTeam}\n                />\n                {teamSlug ? (\n                  this.renderJoinTeam(teamSlug, features)\n                ) : (\n                  <Button disabled>{t('Select a Team')}</Button>\n                )}\n              </Field>\n            }\n          />\n        )}\n      </StyledPanel>\n    );\n  }\n}\n\nconst StyledPanel = styled(Panel)`\n  margin: ${space(2)} 0;\n`;\n\nconst Field = styled('div')`\n  display: grid;\n  grid-auto-flow: column;\n  gap: ${space(2)};\n  text-align: left;\n`;\n\nconst StyledSelectControl = styled(SelectControl)`\n  width: 250px;\n`;\n\nconst DisabledLabel = styled('div')`\n  display: flex;\n  opacity: 0.5;\n  overflow: hidden;\n`;\n\nexport {MissingProjectMembership};\n\nexport default withApi(MissingProjectMembership);\n","import {Location} from 'history';\nimport findLastIndex from 'lodash/findLastIndex';\n\nimport replaceRouterParams from 'app/utils/replaceRouterParams';\nimport {RouteWithName} from 'app/views/settings/components/settingsBreadcrumb/types';\n\ntype Options = {\n  routes: RouteWithName[];\n\n  // parameters to replace any route string parameters (e.g. if route is `:orgId`,\n  // params should have `{orgId: slug}`\n  params: {[key: string]: string | undefined};\n\n  /**\n   * The number of routes to to pop off of `routes\n   * Must be < 0\n   *\n   * There's no ts type for negative numbers so we are arbitrarily specifying -1-9\n   */\n  stepBack?: -1 | -2 | -3 | -4 | -5 | -6 | -7 | -8 | -9;\n  location?: Location;\n};\n\n/**\n * Given a route object or a string and a list of routes + params from router, this will attempt to recreate a location string while replacing url params.\n * Can additionally specify the number of routes to move back\n *\n * See tests for examples\n */\nexport default function recreateRoute(\n  to: string | RouteWithName,\n  options: Options\n): string {\n  const {routes, params, location, stepBack} = options;\n  const paths = routes.map(({path}) => path || '');\n  let lastRootIndex: number;\n  let routeIndex: number | undefined;\n\n  // TODO(ts): typescript things\n  if (typeof to !== 'string') {\n    routeIndex = routes.indexOf(to) + 1;\n    lastRootIndex = findLastIndex(paths.slice(0, routeIndex), path => path[0] === '/');\n  } else {\n    lastRootIndex = findLastIndex(paths, path => path[0] === '/');\n  }\n\n  let baseRoute = paths.slice(lastRootIndex, routeIndex);\n\n  if (typeof stepBack !== 'undefined') {\n    baseRoute = baseRoute.slice(0, stepBack);\n  }\n\n  const search = location?.search ?? '';\n  const hash = location?.hash ?? '';\n\n  const fullRoute = `${baseRoute.join('')}${\n    typeof to !== 'string' ? '' : to\n  }${search}${hash}`;\n\n  return replaceRouterParams(fullRoute, params);\n}\n","export const ERROR_TYPES = {\n  GROUP_NOT_FOUND: 'GROUP_NOT_FOUND',\n  MISSING_MEMBERSHIP: 'MISSING_MEMBERSHIP',\n} as const;\n","import React from 'react';\nimport DocumentTitle from 'react-document-title';\nimport * as ReactRouter from 'react-router';\nimport * as Sentry from '@sentry/react';\nimport PropTypes from 'prop-types';\n\nimport {Client} from 'app/api';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport GlobalSelectionHeader from 'app/components/organizations/globalSelectionHeader';\nimport MissingProjectMembership from 'app/components/projects/missingProjectMembership';\nimport {t} from 'app/locale';\nimport SentryTypes from 'app/sentryTypes';\nimport GroupStore from 'app/stores/groupStore';\nimport {PageContent} from 'app/styles/organization';\nimport {AvatarProject, Group, Organization, Project} from 'app/types';\nimport {Event} from 'app/types/event';\nimport {callIfFunction} from 'app/utils/callIfFunction';\nimport {getMessage, getTitle} from 'app/utils/events';\nimport Projects from 'app/utils/projects';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport withApi from 'app/utils/withApi';\n\nimport {ERROR_TYPES} from './constants';\nimport GroupHeader, {TAB} from './header';\nimport {\n  fetchGroupEvent,\n  getGroupReprocessingStatus,\n  markEventSeen,\n  ReprocessingStatus,\n} from './utils';\n\ntype Error = typeof ERROR_TYPES[keyof typeof ERROR_TYPES] | null;\n\ntype Props = {\n  api: Client;\n  organization: Organization;\n  environments: string[];\n  children: React.ReactNode;\n  isGlobalSelectionReady: boolean;\n} & ReactRouter.RouteComponentProps<\n  {orgId: string; groupId: string; eventId?: string},\n  {}\n>;\n\ntype State = {\n  group: Group | null;\n  loading: boolean;\n  loadingEvent: boolean;\n  loadingGroup: boolean;\n  error: boolean;\n  eventError: boolean;\n  errorType: Error;\n  project: null | (Pick<Project, 'id' | 'slug'> & Partial<Pick<Project, 'platform'>>);\n  event?: Event;\n};\n\nclass GroupDetails extends React.Component<Props, State> {\n  static childContextTypes = {\n    group: SentryTypes.Group,\n    location: PropTypes.object,\n  };\n\n  state = this.initialState;\n\n  getChildContext() {\n    return {\n      group: this.state.group,\n      location: this.props.location,\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n    this.updateReprocessingProgress();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (\n      prevProps.isGlobalSelectionReady !== this.props.isGlobalSelectionReady ||\n      prevProps.location.pathname !== this.props.location.pathname\n    ) {\n      this.fetchData();\n    }\n\n    if (\n      (!this.canLoadEventEarly(prevProps) && !prevState?.group && this.state.group) ||\n      (prevProps.params?.eventId !== this.props.params?.eventId && this.state.group)\n    ) {\n      this.getEvent(this.state.group);\n    }\n  }\n\n  componentWillUnmount() {\n    GroupStore.reset();\n    callIfFunction(this.listener);\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n\n  get initialState(): State {\n    return {\n      group: null,\n      loading: true,\n      loadingEvent: true,\n      loadingGroup: true,\n      error: false,\n      eventError: false,\n      errorType: null,\n      project: null,\n    };\n  }\n\n  remountComponent = () => {\n    this.setState(this.initialState);\n    this.fetchData();\n  };\n\n  canLoadEventEarly(props: Props) {\n    return !props.params.eventId || ['oldest', 'latest'].includes(props.params.eventId);\n  }\n\n  get groupDetailsEndpoint() {\n    return `/issues/${this.props.params.groupId}/`;\n  }\n\n  async getEvent(group?: Group) {\n    if (group) {\n      this.setState({loadingEvent: true, eventError: false});\n    }\n\n    const {params, environments, api} = this.props;\n    const orgSlug = params.orgId;\n    const groupId = params.groupId;\n    const eventId = params?.eventId || 'latest';\n    const projectId = group?.project?.slug;\n    try {\n      const event = await fetchGroupEvent(\n        api,\n        orgSlug,\n        groupId,\n        eventId,\n        environments,\n        projectId\n      );\n      this.setState({event, loading: false, eventError: false, loadingEvent: false});\n    } catch (err) {\n      // This is an expected error, capture to Sentry so that it is not considered as an unhandled error\n      Sentry.captureException(err);\n      this.setState({eventError: true, loading: false, loadingEvent: false});\n    }\n  }\n\n  getCurrentRouteInfo(group: Group): {currentTab: keyof typeof TAB; baseUrl: string} {\n    const {routes, organization} = this.props;\n    const {event} = this.state;\n\n    // All the routes under /organizations/:orgId/issues/:groupId have a defined props\n    const {currentTab, isEventRoute} = routes[routes.length - 1].props as {\n      currentTab: keyof typeof TAB;\n      isEventRoute: boolean;\n    };\n\n    const baseUrl =\n      isEventRoute && event\n        ? `/organizations/${organization.slug}/issues/${group.id}/events/${event.id}/`\n        : `/organizations/${organization.slug}/issues/${group.id}/`;\n\n    return {currentTab, baseUrl};\n  }\n\n  updateReprocessingProgress() {\n    const hasReprocessingV2Feature = this.hasReprocessingV2Feature();\n    if (!hasReprocessingV2Feature) {\n      return;\n    }\n    this.interval = setInterval(this.refetchGroup, 30000);\n  }\n\n  hasReprocessingV2Feature() {\n    const {organization} = this.props;\n    return organization.features?.includes('reprocessing-v2');\n  }\n\n  getReprocessingNewRoute(data: Group) {\n    const {routes, location, params} = this.props;\n    const {groupId} = params;\n\n    const {id: nextGroupId} = data;\n\n    const hasReprocessingV2Feature = this.hasReprocessingV2Feature();\n\n    const reprocessingStatus = getGroupReprocessingStatus(data);\n    const {currentTab, baseUrl} = this.getCurrentRouteInfo(data);\n\n    if (groupId !== nextGroupId) {\n      if (hasReprocessingV2Feature) {\n        // Redirects to the Activities tab\n        if (\n          reprocessingStatus === ReprocessingStatus.REPROCESSED_AND_HASNT_EVENT &&\n          currentTab !== TAB.ACTIVITY\n        ) {\n          return {\n            pathname: `${baseUrl}${TAB.ACTIVITY}/`,\n            query: {...params, groupId: nextGroupId},\n          };\n        }\n      }\n\n      return recreateRoute('', {\n        routes,\n        location,\n        params: {...params, groupId: nextGroupId},\n      });\n    }\n\n    if (hasReprocessingV2Feature) {\n      if (\n        reprocessingStatus === ReprocessingStatus.REPROCESSING &&\n        currentTab !== TAB.DETAILS\n      ) {\n        return {\n          pathname: baseUrl,\n          query: params,\n        };\n      }\n\n      if (\n        reprocessingStatus === ReprocessingStatus.REPROCESSED_AND_HASNT_EVENT &&\n        currentTab !== TAB.ACTIVITY &&\n        currentTab !== TAB.USER_FEEDBACK\n      ) {\n        return {\n          pathname: `${baseUrl}${TAB.ACTIVITY}/`,\n          query: params,\n        };\n      }\n    }\n\n    return undefined;\n  }\n\n  getGroupQuery(): Record<string, string | string[]> {\n    const {environments, organization} = this.props;\n\n    // Note, we do not want to include the environment key at all if there are no environments\n    const query: Record<string, string | string[]> = {\n      ...(environments ? {environment: environments} : {}),\n    };\n\n    if (organization?.features?.includes('inbox')) {\n      query.expand = 'inbox';\n    }\n\n    return query;\n  }\n\n  getFetchDataRequestErrorType(status: any): Error {\n    if (!status) {\n      return null;\n    }\n\n    if (status === 404) {\n      return ERROR_TYPES.GROUP_NOT_FOUND;\n    }\n\n    if (status === 403) {\n      return ERROR_TYPES.MISSING_MEMBERSHIP;\n    }\n\n    return null;\n  }\n\n  handleRequestError(error: any) {\n    Sentry.captureException(error);\n    const errorType = this.getFetchDataRequestErrorType(error?.status);\n\n    this.setState({\n      loadingGroup: false,\n      loading: false,\n      error: true,\n      errorType,\n    });\n  }\n\n  refetchGroup = async () => {\n    const {loadingGroup, loading, loadingEvent, group} = this.state;\n\n    if (\n      group?.status !== ReprocessingStatus.REPROCESSING ||\n      loadingGroup ||\n      loading ||\n      loadingEvent\n    ) {\n      return;\n    }\n\n    const {api} = this.props;\n\n    this.setState({loadingGroup: true});\n\n    try {\n      const updatedGroup = await api.requestPromise(this.groupDetailsEndpoint, {\n        query: this.getGroupQuery(),\n      });\n\n      const reprocessingNewRoute = this.getReprocessingNewRoute(updatedGroup);\n\n      if (reprocessingNewRoute) {\n        ReactRouter.browserHistory.push(reprocessingNewRoute);\n        return;\n      }\n\n      this.setState({group: updatedGroup, loadingGroup: false});\n    } catch (error) {\n      this.handleRequestError(error);\n    }\n  };\n\n  async fetchData() {\n    const {api, isGlobalSelectionReady, params} = this.props;\n\n    // Need to wait for global selection store to be ready before making request\n    if (!isGlobalSelectionReady) {\n      return;\n    }\n\n    try {\n      const eventPromise = this.canLoadEventEarly(this.props)\n        ? this.getEvent()\n        : undefined;\n\n      const groupPromise = await api.requestPromise(this.groupDetailsEndpoint, {\n        query: this.getGroupQuery(),\n      });\n\n      const [data] = await Promise.all([groupPromise, eventPromise]);\n\n      const reprocessingNewRoute = this.getReprocessingNewRoute(data);\n\n      if (reprocessingNewRoute) {\n        ReactRouter.browserHistory.push(reprocessingNewRoute);\n        return;\n      }\n\n      const project = data.project;\n\n      markEventSeen(api, params.orgId, project.slug, params.groupId);\n\n      if (!project) {\n        Sentry.withScope(() => {\n          Sentry.captureException(new Error('Project not found'));\n        });\n      } else {\n        const locationWithProject = {...this.props.location};\n        if (\n          locationWithProject.query.project === undefined &&\n          locationWithProject.query._allp === undefined\n        ) {\n          //We use _allp as a temporary measure to know they came from the issue list page with no project selected (all projects included in filter).\n          //If it is not defined, we add the locked project id to the URL (this is because if someone navigates directly to an issue on single-project priveleges, then goes back - they were getting assigned to the first project).\n          //If it is defined, we do not so that our back button will bring us to the issue list page with no project selected instead of the locked project.\n          locationWithProject.query.project = project.id;\n        }\n        delete locationWithProject.query._allp; //We delete _allp from the URL to keep the hack a bit cleaner, but this is not an ideal solution and will ultimately be replaced with something smarter.\n        ReactRouter.browserHistory.replace(locationWithProject);\n      }\n\n      this.setState({project, loadingGroup: false});\n\n      GroupStore.loadInitialData([data]);\n    } catch (error) {\n      this.handleRequestError(error);\n    }\n  }\n\n  listener = GroupStore.listen(itemIds => this.onGroupChange(itemIds), undefined);\n  interval: ReturnType<typeof setInterval> | undefined = undefined;\n\n  onGroupChange(itemIds: Set<string>) {\n    const id = this.props.params.groupId;\n    if (itemIds.has(id)) {\n      const group = GroupStore.get(id) as Group;\n      if (group) {\n        // TODO(ts) This needs a better approach. issueActions is splicing attributes onto\n        // group objects to cheat here.\n        if ((group as Group & {stale?: boolean}).stale) {\n          this.fetchData();\n          return;\n        }\n        this.setState({\n          group,\n        });\n      }\n    }\n  }\n\n  getTitle() {\n    const {organization} = this.props;\n    const {group} = this.state;\n    const defaultTitle = 'Sentry';\n\n    if (!group) {\n      return defaultTitle;\n    }\n\n    const {title} = getTitle(group, organization);\n    const message = getMessage(group);\n\n    const {project} = group;\n    const eventDetails = `${organization.slug} - ${project.slug}`;\n\n    if (title && message) {\n      return `${title}: ${message} - ${eventDetails}`;\n    }\n\n    return `${title || message || defaultTitle} - ${eventDetails}`;\n  }\n\n  renderError() {\n    const {organization, location} = this.props;\n    const projects = organization.projects ?? [];\n    const projectId = location.query.project;\n\n    const projectSlug = projects.find(proj => proj.id === projectId)?.slug;\n\n    switch (this.state.errorType) {\n      case ERROR_TYPES.GROUP_NOT_FOUND:\n        return (\n          <LoadingError message={t('The issue you were looking for was not found.')} />\n        );\n\n      case ERROR_TYPES.MISSING_MEMBERSHIP:\n        return (\n          <MissingProjectMembership\n            organization={this.props.organization}\n            projectSlug={projectSlug}\n          />\n        );\n      default:\n        return <LoadingError onRetry={this.remountComponent} />;\n    }\n  }\n\n  renderContent(project: AvatarProject, group: Group) {\n    const {children, environments} = this.props;\n    const {loadingEvent, eventError, event} = this.state;\n\n    const {currentTab, baseUrl} = this.getCurrentRouteInfo(group);\n    const groupReprocessingStatus = getGroupReprocessingStatus(group);\n\n    let childProps: Record<string, any> = {\n      environments,\n      group,\n      project,\n    };\n\n    if (currentTab === TAB.DETAILS) {\n      childProps = {\n        ...childProps,\n        event,\n        loadingEvent,\n        eventError,\n        groupReprocessingStatus,\n        onRetry: () => this.remountComponent(),\n      };\n    }\n\n    if (currentTab === TAB.TAGS) {\n      childProps = {...childProps, event, baseUrl};\n    }\n\n    return (\n      <React.Fragment>\n        <GroupHeader\n          groupReprocessingStatus={groupReprocessingStatus}\n          project={project as Project}\n          event={event}\n          group={group}\n          currentTab={currentTab}\n          baseUrl={baseUrl}\n        />\n        {React.isValidElement(children)\n          ? React.cloneElement(children, childProps)\n          : children}\n      </React.Fragment>\n    );\n  }\n\n  renderPageContent() {\n    const {error: isError, group, project, loading} = this.state;\n    const isLoading = loading || (!group && !isError);\n\n    if (isLoading) {\n      return <LoadingIndicator />;\n    }\n\n    if (isError) {\n      return this.renderError();\n    }\n\n    const {organization} = this.props;\n\n    return (\n      <Projects\n        orgId={organization.slug}\n        slugs={[project?.slug ?? '']}\n        data-test-id=\"group-projects-container\"\n      >\n        {({projects, initiallyLoaded, fetchError}) =>\n          initiallyLoaded ? (\n            fetchError ? (\n              <LoadingError message={t('Error loading the specified project')} />\n            ) : (\n              this.renderContent(projects[0], group!) // TODO(ts): Update renderContent function to deal with empty group\n            )\n          ) : (\n            <LoadingIndicator />\n          )\n        }\n      </Projects>\n    );\n  }\n\n  render() {\n    const {project} = this.state;\n\n    return (\n      <DocumentTitle title={this.getTitle()}>\n        <GlobalSelectionHeader\n          skipLoadLastUsed\n          forceProject={project}\n          showDateSelector={false}\n          shouldForceProject\n          lockedMessageSubject={t('issue')}\n          showIssueStreamLink\n          showProjectSettingsLink\n        >\n          <PageContent>{this.renderPageContent()}</PageContent>\n        </GlobalSelectionHeader>\n      </DocumentTitle>\n    );\n  }\n}\n\nexport default withApi(Sentry.withProfiler(GroupDetails));\n","import React from 'react';\nimport * as ReactRouter from 'react-router';\n\nimport {GlobalSelection, Organization} from 'app/types';\nimport {analytics, metric} from 'app/utils/analytics';\nimport withGlobalSelection from 'app/utils/withGlobalSelection';\nimport withOrganization, {isLightweightOrganization} from 'app/utils/withOrganization';\n\nimport GroupDetails from './groupDetails';\n\ntype Props = {\n  selection: GlobalSelection;\n  isGlobalSelectionReady: boolean;\n  organization: Organization;\n  children: React.ReactNode;\n} & ReactRouter.RouteComponentProps<{orgId: string; groupId: string}, {}>;\n\nclass OrganizationGroupDetails extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    // Setup in the constructor as render() may be expensive\n    this.startMetricCollection();\n  }\n\n  componentDidMount() {\n    analytics('issue_page.viewed', {\n      group_id: parseInt(this.props.params.groupId, 10),\n      org_id: parseInt(this.props.organization.id, 10),\n    });\n  }\n\n  /**\n   * See \"page-issue-list-start\" for explanation on hot/cold-starts\n   */\n  startMetricCollection() {\n    const startType = isLightweightOrganization(this.props.organization)\n      ? 'cold-start'\n      : 'warm-start';\n    metric.mark({name: 'page-issue-details-start', data: {start_type: startType}});\n  }\n\n  render() {\n    const {selection, ...props} = this.props;\n\n    return (\n      <GroupDetails\n        key={`${this.props.params.groupId}-envs:${selection.environments.join(',')}`}\n        environments={selection.environments}\n        {...props}\n      />\n    );\n  }\n}\n\nexport default withOrganization(withGlobalSelection(OrganizationGroupDetails));\n"],"sourceRoot":""}