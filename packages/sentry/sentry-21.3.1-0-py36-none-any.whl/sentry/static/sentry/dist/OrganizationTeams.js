(self.webpackChunk=self.webpackChunk||[]).push([["OrganizationTeams"],{"./app/actionCreators/teams.tsx":(e,t,n)=>{"use strict";n.d(t,{eM:()=>l,z_:()=>u,fs:()=>m,um:()=>d,s:()=>p,Cm:()=>f,tT:()=>g});var a=n("./app/actionCreators/indicator.tsx"),r=n("./app/actions/teamActions.tsx"),s=n("./app/locale.tsx"),o=n("./app/utils/callIfFunction.tsx"),i=n("./app/utils/guid.tsx"),c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];o.g.apply(void 0,[e[t]].concat(a))};function l(e,t,n){return r.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){r.Z.fetchDetailsSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.fetchDetailsError(t.teamId,e),c(n,"error",e)}})}function u(e,t){r.Z.updateSuccess(e,t)}function m(e,t,n){var a="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return r.Z.update(t.teamId,t.data),e.request(a,{method:"PUT",data:t.data,success:function(e){u(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(t.teamId,e),c(n,"error",e)}})}function d(e,t,n){var a,s="/organizations/".concat(t.orgId,"/members/").concat(null!==(a=t.memberId)&&void 0!==a?a:"me","/teams/").concat(t.teamId,"/"),o=(0,i.E)();return r.Z.update(o,t.teamId),e.request(s,{method:"POST",success:function(e){r.Z.updateSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(o,t.teamId,e),c(n,"error",e)}})}function p(e,t,n){var a="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),s=(0,i.E)();return r.Z.update(s,t.teamId),e.request(a,{method:"DELETE",success:function(e){r.Z.updateSuccess(t.teamId,e),c(n,"success",e)},error:function(e){r.Z.updateError(s,t.teamId,e),c(n,"error",e)}})}function f(e,t,n){return r.Z.createTeam(t),e.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return r.Z.createTeamSuccess(e),(0,a.S9)((0,s._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:n.orgId})),e}),(function(e){throw r.Z.createTeamError(t.slug,e),(0,a.Iw)((0,s._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),e}))}function g(e,t){return r.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return r.Z.removeTeamSuccess(t.teamId,e),(0,a.S9)((0,s._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw r.Z.removeTeamError(t.teamId,e),(0,a.Iw)((0,s._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/components/sentryDocumentTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),n("../../../../node_modules/react/index.js");var a=n("../../../../node_modules/react-document-title/index.js"),r=n.n(a),s=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function o(e){var t=e.title,n=e.orgSlug,a=e.projectSlug,o=e.children,i=n||a?n&&a?"".concat(t," - ").concat(n," - ").concat(a):n?"".concat(t," - ").concat(n):"".concat(t," - ").concat(a):t;return(0,s.tZ)(r(),{title:"".concat(i," - Sentry")},o)}o.displayName="SentryDocumentTitle";const i=o},"./app/utils/recreateRoute.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n("../../../../node_modules/lodash/findLastIndex.js"),r=n.n(a),s=n("./app/utils/replaceRouterParams.tsx");function o(e,t){var n,a,o,i,c=t.routes,l=t.params,u=t.location,m=t.stepBack,d=c.map((function(e){return e.path||""}));"string"!=typeof e?(i=c.indexOf(e)+1,o=r()(d.slice(0,i),(function(e){return"/"===e[0]}))):o=r()(d,(function(e){return"/"===e[0]}));var p=d.slice(o,i);void 0!==m&&(p=p.slice(0,m));var f=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",g=null!==(a=null==u?void 0:u.hash)&&void 0!==a?a:"",h="".concat(p.join("")).concat("string"!=typeof e?"":e).concat(f).concat(g);return(0,s.Z)(h,l)}},"./app/utils/withTeams.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),r=n.n(a),s=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/create-react-class/index.js")),o=n.n(s),i=n("../../../../node_modules/reflux/src/index.js"),c=n.n(i),l=n("./app/stores/teamStore.tsx"),u=n("./app/utils/getDisplayName.tsx"),m=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");const d=function(e){return o()({displayName:"withTeams(".concat((0,u.Z)(e),")"),mixins:[c().listenTo(l.Z,"onTeamUpdate")],getInitialState:function(){return{teams:l.Z.getAll()}},onTeamUpdate:function(){this.setState({teams:l.Z.getAll()})},render:function(){return(0,m.tZ)(e,r()({},this.props,{teams:this.state.teams}))}})}},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var a=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),r=n.n(a),s=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(s),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(l),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(m),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(p),g=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=n("../../../../node_modules/react/index.js"),Z=n("./app/styles/organization.tsx"),b=n("./app/styles/space.tsx"),v=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){u()(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var r=f()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return d()(this,e)});function s(){return o()(this,s),a.apply(this,arguments)}return c()(s,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.subtitle,s=e.action,o=e.tabs,i=e.noTitleStyles,c=e.body,l=r()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!a;return(0,v.tZ)("div",l,(0,v.tZ)(x,{isNarrow:u},(0,v.tZ)(T,null,t&&(0,v.tZ)(_,null,t),n&&(0,v.tZ)(z,{tabs:o,styled:i},(0,v.tZ)(Z.Gh,null,n),a&&(0,v.tZ)(I,null,a))),s&&(0,v.tZ)(j,{isNarrow:u},s)),c&&(0,v.tZ)(S,null,c),o&&(0,v.tZ)(C,null,o))}}]),s}(h.Component);y.displayName="UnstyledSettingsPageHeader",y.defaultProps={noTitleStyles:!1};var x=(0,g.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),T=(0,g.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),z=(0,g.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,b.Z)(4)," ",(0,b.Z)(2)," ",(0,b.Z)(3)," 0;"),I=(0,g.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,b.Z)(1.5)," 0 0;"),_=(0,g.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,b.Z)(1),";"),j=(0,g.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,b.Z)(4)}),";"),w=(0,g.Z)(y,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,b.Z)(4),";"),S=(0,g.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,b.Z)(3),";"),C=(0,g.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const P=w},"./app/views/settings/organizationTeams/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{OrganizationTeamsContainer:()=>$,default:()=>ee});var a=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),r=n.n(a),s=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(s),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(l),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(m),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(p),g=n("../../../../node_modules/react/index.js"),h=n("./app/actionCreators/projects.tsx"),Z=n("./app/utils.tsx"),b=n("./app/utils/withApi.tsx"),v=n("./app/utils/withOrganization.tsx"),y=n("./app/utils/withTeams.tsx"),x=n("./app/actionCreators/modal.tsx"),T=n("./app/components/button.tsx"),z=n("./app/components/panels/index.tsx"),I=n("./app/components/sentryDocumentTitle.tsx"),_=n("./app/icons/index.tsx"),j=n("./app/locale.tsx"),w=n("./app/utils/recreateRoute.tsx"),S=n("./app/views/settings/components/settingsPageHeader.tsx"),C=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),P=n("./app/views/settings/components/emptyMessage.tsx"),N=n("./app/views/settings/components/text/textBlock.tsx"),k=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),q=n.n(k),R=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),M=n.n(R),A=n("../../../../node_modules/react-router/es/index.js"),E=n("./app/actionCreators/indicator.tsx"),L=n("./app/actionCreators/teams.tsx"),O=n("./app/components/idBadge/index.tsx"),B=n("./app/styles/space.tsx"),D=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var U=function(e){u()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var r=f()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return d()(this,e)});function r(){var e;o()(this,r);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=a.call.apply(a,[this].concat(n))).state={loading:!1,error:!1},e.handleRequestAccess=M()(q().mark((function t(){var n;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.team;try{e.joinTeam({successMessage:(0,j._N)("You have requested access to [team]",{team:"#".concat(n.slug)}),errorMessage:(0,j._N)("Unable to request access to [team]",{team:"#".concat(n.slug)})})}catch(e){}case 2:case"end":return t.stop()}}),t)}))),e.handleJoinTeam=function(){var t=e.props.team;e.joinTeam({successMessage:(0,j._N)("You have joined [team]",{team:"#".concat(t.slug)}),errorMessage:(0,j._N)("Unable to join [team]",{team:"#".concat(t.slug)})})},e.joinTeam=function(t){var n=t.successMessage,a=t.errorMessage,r=e.props,s=r.api,o=r.organization,i=r.team;return e.setState({loading:!0}),new Promise((function(t,r){return(0,L.um)(s,{orgId:o.slug,teamId:i.slug},{success:function(){e.setState({loading:!1,error:!1}),(0,E.S9)(n),t()},error:function(){e.setState({loading:!1,error:!0}),(0,E.Iw)(a),r(new Error("Unable to join team"))}})}))},e.handleLeaveTeam=function(){var t=e.props,n=t.api,a=t.organization,r=t.team;e.setState({loading:!0}),(0,L.s)(n,{orgId:a.slug,teamId:r.slug},{success:function(){e.setState({loading:!1,error:!1}),(0,E.S9)((0,j._N)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){e.setState({loading:!1,error:!0}),(0,E.Iw)((0,j._N)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},e}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.team,n=e.urlPrefix,a=e.openMembership,r=(0,D.tZ)(O.Z,{team:t,avatarSize:36,description:(0,j.tn)("%s Member","%s Members",t.memberCount)}),s=t.hasAccess;return(0,D.tZ)(H,null,(0,D.tZ)(F,null,s?(0,D.tZ)(Y,{to:"".concat(n,"teams/").concat(t.slug,"/")},r):r),(0,D.tZ)(J,null,this.state.loading?(0,D.tZ)(T.ZP,{size:"small",disabled:!0},"..."):t.isMember?(0,D.tZ)(T.ZP,{size:"small",onClick:this.handleLeaveTeam},(0,j.t)("Leave Team")):t.isPending?(0,D.tZ)(T.ZP,{size:"small",disabled:!0},(0,j.t)("Request Pending")):a?(0,D.tZ)(T.ZP,{size:"small",onClick:this.handleJoinTeam},(0,j.t)("Join Team")):(0,D.tZ)(T.ZP,{size:"small",onClick:this.handleRequestAccess},(0,j.t)("Request Access"))))}}]),r}(g.Component);U.displayName="AllTeamsRow";var Y=(0,C.Z)(A.Link,{target:"eqoqdb20",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",(0,B.Z)(1),";padding:",(0,B.Z)(1),";background:#f2eff5;border-radius:3px;outline:none;}");const W=(0,b.Z)(U);var H=(0,C.Z)(z.Lv,{target:"eqoqdb21",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),J=(0,C.Z)("div",{target:"eqoqdb22",label:"Spacer"})("padding:",(0,B.Z)(2),";"),F=(0,C.Z)(J,{target:"eqoqdb23",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function G(e){var t=e.organization,n=e.urlPrefix,a=e.openMembership,r=e.teamList,s=e.access,o=r.map((function(e){return(0,D.tZ)(W,{urlPrefix:n,team:e,organization:t,openMembership:a,key:e.slug})}));if(!o.length){var i=s.has("project:admin");return(0,D.tZ)(P.Z,null,(0,j._N)("No teams here. [teamCreate]",{root:(0,D.tZ)(N.Z,{noMargin:!0}),teamCreate:i?(0,j._N)("You can always [link:create one].",{link:(0,D.tZ)(K,{priority:"link",onClick:function(){return(0,x.openCreateTeamModal)({organization:t})}})}):null}))}return(0,D.tZ)(g.Fragment,null,o)}G.displayName="AllTeamsList";const V=G;var K=(0,C.Z)(T.ZP,{target:"e3ug7hf0",label:"StyledButton"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";");function Q(e){var t=e.allTeams,n=e.activeTeams,a=e.organization,r=e.access,s=e.features,o=e.routes,i=e.params;if(!a)return null;var c=r.has("project:admin"),l=(0,D.tZ)(T.ZP,{priority:"primary",size:"small",disabled:!c,title:c?void 0:(0,j.t)("You do not have permission to create teams"),onClick:function(){return(0,x.openCreateTeamModal)({organization:a})},icon:(0,D.tZ)(_.N_,{size:"xs",isCircled:!0})},(0,j.t)("Create Team")),u=o.find((function(e){return"teams/"===e.path})),m=u?(0,w.Z)(u,{routes:o,params:i,stepBack:-2}):"",d=new Set(n.map((function(e){return e.id}))),p=t.filter((function(e){return!d.has(e.id)})),f=(0,j.t)("Teams");return(0,D.tZ)("div",{"data-test-id":"team-list"},(0,D.tZ)(I.Z,{title:f,orgSlug:a.slug}),(0,D.tZ)(S.Z,{title:f,action:l}),(0,D.tZ)(z.s_,null,(0,D.tZ)(z.V9,null,(0,j.t)("Your Teams")),(0,D.tZ)(z.N,null,(0,D.tZ)(V,{urlPrefix:m,organization:a,teamList:n,access:r,openMembership:!1}))),(0,D.tZ)(z.s_,null,(0,D.tZ)(z.V9,null,(0,j.t)("Other Teams")),(0,D.tZ)(z.N,null,(0,D.tZ)(V,{urlPrefix:m,organization:a,teamList:p,access:r,openMembership:!(!s.has("open-membership")&&!r.has("org:write"))}))))}Q.displayName="OrganizationTeams";const X=Q;var $=function(e){u()(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var r=f()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return d()(this,e)});function s(){return o()(this,s),a.apply(this,arguments)}return c()(s,[{key:"componentDidMount",value:function(){this.fetchStats()}},{key:"fetchStats",value:function(){(0,h.Nh)(this.props.api,{orgId:this.props.params.orgId,query:{since:((new Date).getTime()/1e3-86400).toString(),stat:"generated",group:"project"}})}},{key:"render",value:function(){var e=this.props,t=e.organization,n=e.teams;if(!t)return null;var a=(0,Z.qr)(n,(function(e){return e.name})),s=a.filter((function(e){return e.isMember}));return(0,D.tZ)(X,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,allTeams:a,activeTeams:s}))}}]),s}(g.Component);$.displayName="OrganizationTeamsContainer";const ee=(0,b.Z)((0,v.Z)((0,y.Z)($)))}}]);
//# sourceMappingURL=OrganizationTeams.js.map