{"version":3,"sources":["webpack:///./app/components/modals/inviteMembersModal/renderEmailValue.tsx","webpack:///./app/components/modals/inviteMembersModal/inviteRowControl.tsx","webpack:///./app/components/modals/inviteMembersModal/index.tsx","webpack:///./app/components/roleSelectControl.tsx","webpack:///./app/utils/withTeams.tsx"],"names":["renderEmailValue","status","valueProps","children","props","error","emailLabel","undefined","disabled","title","EmailLabel","sent","SendingIndicator","size","color","space","LoadingIndicator","defaultProps","hideMessage","mapToOptions","values","map","value","label","InviteRowControl","state","inputValue","handleInputChange","setState","handleKeyDown","event","onChangeEmails","emails","key","preventDefault","this","className","role","teams","roleOptions","roleDisabledUnallowed","teamOptions","inviteStatus","onRemove","onChangeRole","onChangeTeams","disableRemove","theme","data-test-id","placeholder","t","components","MultiValue","data","ValueComponent","DropdownIndicator","options","onBlur","e","target","styles","getStyles","onInputChange","onKeyDown","onBlurResetsInput","onCloseResetsInput","onChange","multiple","creatable","clearable","menuIsOpen","roles","disableUnallowed","slug","borderless","icon","onClick","React","multiValue","provided","red300","border","backgroundColor","red100","multiValueLabel","pointerEvents","multiValueRemove","borderLeft","withTheme","InviteModalHook","HookOrDefault","hookName","defaultComponent","onSendInvites","sendInvites","canSend","InviteMembersModal","sessionId","reset","pendingInvites","inviteTemplate","complete","sendingInvites","trackAnalyticsEvent","eventKey","eventName","organization_id","organization","id","modal_session","sendInvite","invite","email","endpoint","willInvite","api","requestPromise","method","errorResponse","responseJSON","emailError","Array","isArray","Promise","all","invites","addInviteRow","Set","uniqueId","source","can_invite","orgId","initialData","initial","index","splice","reduce","acc","row","inv","length","hasDuplicateEmails","StatusMessage","mini","relative","statuses","Object","sentCount","filter","i","errorCount","tctComponents","tn","failed","tct","access","includes","numberInvites","inviteText","requestText","Footer","closeModal","allTeams","member","disableInputs","headerInfo","Heading","position","Subtext","InviteeHeadings","StyledInviteRow","MEMBER_ROLES","removeInviteRow","opts","setEmails","v","setRole","setTeams","AddButton","priority","isCircled","FooterContent","statusMessage","isValidInvites","inviteButtonLabel","AsyncComponent","p","headerFontSize","subText","inviteRowGrid","css","fontSizeSmall","Button","fontSizeMedium","gray400","green300","modalCss","withLatestContext","withTeams","RoleSelectControl","r","name","allowed","description","desc","Option","optionProps","RoleItem","control","borderBottomLeftRadius","borderBottomRightRadius","menu","borderRadius","marginTop","width","overflow","WrappedComponent","createReactClass","displayName","getDisplayName","mixins","Reflux","TeamStore","getInitialState","onTeamUpdate","render"],"mappings":"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","file":"InviteMembersModal.js","sourcesContent":["import React from 'react';\nimport {components as selectComponents, MultiValueProps} from 'react-select';\nimport styled from '@emotion/styled';\n\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport Tooltip from 'app/components/tooltip';\nimport {IconCheckmark, IconWarning} from 'app/icons';\nimport space from 'app/styles/space';\n\nimport {InviteStatus} from './types';\n\nfunction renderEmailValue<Option>(\n  status: InviteStatus[string],\n  valueProps: MultiValueProps<Option>\n) {\n  const {children, ...props} = valueProps;\n  const error = status && status.error;\n\n  const emailLabel =\n    status === undefined ? (\n      children\n    ) : (\n      <Tooltip disabled={!error} title={error}>\n        <EmailLabel>\n          {children}\n          {!status.sent && !status.error && <SendingIndicator />}\n          {status.error && <IconWarning size=\"10px\" />}\n          {status.sent && <IconCheckmark size=\"10px\" color=\"success\" />}\n        </EmailLabel>\n      </Tooltip>\n    );\n\n  return (\n    <selectComponents.MultiValue {...props}>{emailLabel}</selectComponents.MultiValue>\n  );\n}\n\nconst EmailLabel = styled('div')`\n  display: inline-grid;\n  grid-auto-flow: column;\n  grid-gap: ${space(0.5)};\n  align-items: center;\n`;\n\nconst SendingIndicator = styled(LoadingIndicator)`\n  margin: 0;\n  .loading-indicator {\n    border-width: 2px;\n  }\n`;\n\nSendingIndicator.defaultProps = {\n  hideMessage: true,\n  size: 14,\n};\n\nexport default renderEmailValue;\n","import React from 'react';\nimport {MultiValueProps} from 'react-select';\nimport {withTheme} from 'emotion-theming';\n\nimport Button from 'app/components/button';\nimport SelectControl from 'app/components/forms/selectControl';\nimport RoleSelectControl from 'app/components/roleSelectControl';\nimport {IconClose} from 'app/icons/iconClose';\nimport {t} from 'app/locale';\nimport {MemberRole, SelectValue, Team} from 'app/types';\nimport {Theme} from 'app/utils/theme';\n\nimport renderEmailValue from './renderEmailValue';\nimport {InviteStatus} from './types';\n\ntype SelectOption = SelectValue<string>;\n\ntype Props = {\n  className?: string;\n  disabled: boolean;\n  disableRemove: boolean;\n  emails: string[];\n  role: string;\n  teams: string[];\n  roleOptions: MemberRole[];\n  roleDisabledUnallowed: boolean;\n  teamOptions: Team[];\n  inviteStatus: InviteStatus;\n  onRemove: () => void;\n  theme: Theme;\n\n  onChangeEmails: (emails: null | SelectOption[]) => void;\n  onChangeRole: (role: SelectOption) => void;\n  onChangeTeams: (teams?: SelectOption[] | null) => void;\n};\n\ntype State = {\n  inputValue: string;\n};\n\nfunction ValueComponent(\n  props: MultiValueProps<SelectOption>,\n  inviteStatus: Props['inviteStatus']\n) {\n  return renderEmailValue(inviteStatus[props.data.value], props);\n}\n\nfunction mapToOptions(values: string[]): SelectOption[] {\n  return values.map(value => ({value, label: value}));\n}\n\nclass InviteRowControl extends React.Component<Props, State> {\n  state: State = {inputValue: ''};\n\n  handleInputChange = (inputValue: string) => {\n    this.setState({inputValue});\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\n    const {onChangeEmails, emails} = this.props;\n    const {inputValue} = this.state;\n    switch (event.key) {\n      case 'Enter':\n      case 'Tab':\n      case ',':\n      case ' ':\n        onChangeEmails([...mapToOptions(emails), {label: inputValue, value: inputValue}]);\n        this.setState({inputValue: ''});\n        event.preventDefault();\n        break;\n      default:\n      // do nothing.\n    }\n  };\n\n  render() {\n    const {\n      className,\n      disabled,\n      emails,\n      role,\n      teams,\n      roleOptions,\n      roleDisabledUnallowed,\n      teamOptions,\n      inviteStatus,\n      onRemove,\n      onChangeEmails,\n      onChangeRole,\n      onChangeTeams,\n      disableRemove,\n      theme,\n    } = this.props;\n\n    return (\n      <div className={className}>\n        <SelectControl\n          data-test-id=\"select-emails\"\n          disabled={disabled}\n          placeholder={t('Enter one or more emails')}\n          inputValue={this.state.inputValue}\n          value={emails}\n          components={{\n            MultiValue: (props: MultiValueProps<SelectOption>) =>\n              ValueComponent(props, inviteStatus),\n            DropdownIndicator: () => null,\n          }}\n          options={mapToOptions(emails)}\n          onBlur={(e: React.ChangeEvent<HTMLInputElement>) =>\n            e.target.value &&\n            onChangeEmails([\n              ...mapToOptions(emails),\n              {label: e.target.value, value: e.target.value},\n            ])\n          }\n          styles={getStyles(theme, inviteStatus)}\n          onInputChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          onBlurResetsInput={false}\n          onCloseResetsInput={false}\n          onChange={onChangeEmails}\n          multiple\n          creatable\n          clearable\n          menuIsOpen={false}\n        />\n        <RoleSelectControl\n          data-test-id=\"select-role\"\n          disabled={disabled}\n          value={role}\n          roles={roleOptions}\n          disableUnallowed={roleDisabledUnallowed}\n          onChange={onChangeRole}\n        />\n        <SelectControl\n          data-test-id=\"select-teams\"\n          disabled={disabled}\n          placeholder={t('Add to teams\\u2026')}\n          value={teams}\n          options={teamOptions.map(({slug}) => ({\n            value: slug,\n            label: `#${slug}`,\n          }))}\n          onChange={onChangeTeams}\n          multiple\n          clearable\n        />\n        <Button\n          borderless\n          icon={<IconClose />}\n          size=\"zero\"\n          onClick={onRemove}\n          disabled={disableRemove}\n        />\n      </div>\n    );\n  }\n}\n\n/**\n * The email select control has custom selected item states as items\n * show their delivery status after the form is submitted.\n */\nfunction getStyles(theme: Theme, inviteStatus: Props['inviteStatus']) {\n  return {\n    multiValue: (\n      provided: React.CSSProperties,\n      {data}: MultiValueProps<SelectOption>\n    ) => {\n      const status = inviteStatus[data.value];\n      return {\n        ...provided,\n        ...(status?.error\n          ? {\n              color: theme.red300,\n              border: `1px solid ${theme.red300}`,\n              backgroundColor: theme.red100,\n            }\n          : {}),\n      };\n    },\n    multiValueLabel: (\n      provided: React.CSSProperties,\n      {data}: MultiValueProps<SelectOption>\n    ) => {\n      const status = inviteStatus[data.value];\n      return {\n        ...provided,\n        pointerEvents: 'all',\n        ...(status?.error ? {color: theme.red300} : {}),\n      };\n    },\n    multiValueRemove: (\n      provided: React.CSSProperties,\n      {data}: MultiValueProps<SelectOption>\n    ) => {\n      const status = inviteStatus[data.value];\n      return {\n        ...provided,\n        ...(status?.error\n          ? {\n              borderLeft: `1px solid ${theme.red300}`,\n              ':hover': {backgroundColor: theme.red100, color: theme.red300},\n            }\n          : {}),\n      };\n    },\n  };\n}\n\nexport default withTheme(InviteRowControl);\n","import React from 'react';\nimport {css} from '@emotion/core';\nimport styled from '@emotion/styled';\n\nimport {ModalRenderProps} from 'app/actionCreators/modal';\nimport AsyncComponent from 'app/components/asyncComponent';\nimport Button from 'app/components/button';\nimport HookOrDefault from 'app/components/hookOrDefault';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport QuestionTooltip from 'app/components/questionTooltip';\nimport {MEMBER_ROLES} from 'app/constants';\nimport {IconAdd, IconCheckmark, IconWarning} from 'app/icons';\nimport {t, tct, tn} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Organization, Team} from 'app/types';\nimport {trackAnalyticsEvent} from 'app/utils/analytics';\nimport {uniqueId} from 'app/utils/guid';\nimport withLatestContext from 'app/utils/withLatestContext';\nimport withTeams from 'app/utils/withTeams';\n\nimport InviteRowControl from './inviteRowControl';\nimport {InviteRow, InviteStatus, NormalizedInvite} from './types';\n\ntype Props = AsyncComponent['props'] &\n  ModalRenderProps & {\n    organization: Organization;\n    teams: Team[];\n    source?: string;\n    initialData?: Partial<InviteRow>[];\n  };\n\ntype State = AsyncComponent['state'] & {\n  pendingInvites: InviteRow[];\n  sendingInvites: boolean;\n  complete: boolean;\n  inviteStatus: InviteStatus;\n};\n\nconst DEFAULT_ROLE = 'member';\n\nconst InviteModalHook = HookOrDefault({\n  hookName: 'member-invite-modal:customization',\n  defaultComponent: ({onSendInvites, children}) =>\n    children({sendInvites: onSendInvites, canSend: true}),\n});\n\ntype InviteModalRenderFunc = React.ComponentProps<typeof InviteModalHook>['children'];\n\nclass InviteMembersModal extends AsyncComponent<Props, State> {\n  get inviteTemplate(): InviteRow {\n    return {\n      emails: new Set(),\n      teams: new Set(),\n      role: DEFAULT_ROLE,\n    };\n  }\n\n  /**\n   * Used for analytics tracking of the modals usage.\n   */\n  sessionId = '';\n\n  componentDidMount() {\n    this.sessionId = uniqueId();\n\n    const {organization, source} = this.props;\n\n    trackAnalyticsEvent({\n      eventKey: 'invite_modal.opened',\n      eventName: 'Invite Modal: Opened',\n      organization_id: organization.id,\n      modal_session: this.sessionId,\n      can_invite: this.willInvite,\n      source,\n    });\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const orgId = this.props.organization.slug;\n\n    return [['member', `/organizations/${orgId}/members/me/`]];\n  }\n\n  getDefaultState() {\n    const state = super.getDefaultState();\n    const {initialData} = this.props;\n\n    const pendingInvites = initialData\n      ? initialData.map(initial => ({\n          ...this.inviteTemplate,\n          ...initial,\n        }))\n      : [this.inviteTemplate];\n\n    return {\n      ...state,\n      pendingInvites,\n      inviteStatus: {},\n      complete: false,\n      sendingInvites: false,\n    };\n  }\n\n  reset = () => {\n    this.setState({\n      pendingInvites: [this.inviteTemplate],\n      inviteStatus: {},\n      complete: false,\n      sendingInvites: false,\n    });\n\n    trackAnalyticsEvent({\n      eventKey: 'invite_modal.add_more',\n      eventName: 'Invite Modal: Add More',\n      organization_id: this.props.organization.id,\n      modal_session: this.sessionId,\n    });\n  };\n\n  sendInvite = async (invite: NormalizedInvite) => {\n    const {slug} = this.props.organization;\n    const data = {\n      email: invite.email,\n      teams: [...invite.teams],\n      role: invite.role,\n    };\n\n    this.setState(state => ({\n      inviteStatus: {...state.inviteStatus, [invite.email]: {sent: false}},\n    }));\n\n    const endpoint = this.willInvite\n      ? `/organizations/${slug}/members/`\n      : `/organizations/${slug}/invite-requests/`;\n\n    try {\n      await this.api.requestPromise(endpoint, {method: 'POST', data});\n    } catch (err) {\n      const errorResponse = err.responseJSON;\n\n      // Use the email error message if available. This inconsistently is\n      // returned as either a list of errors for the field, or a single error.\n      const emailError =\n        !errorResponse || !errorResponse.email\n          ? false\n          : Array.isArray(errorResponse.email)\n          ? errorResponse.email[0]\n          : errorResponse.email;\n\n      const error = emailError || t('Could not invite user');\n\n      this.setState(state => ({\n        inviteStatus: {...state.inviteStatus, [invite.email]: {sent: false, error}},\n      }));\n      return;\n    }\n\n    this.setState(state => ({\n      inviteStatus: {...state.inviteStatus, [invite.email]: {sent: true}},\n    }));\n  };\n\n  sendInvites = async () => {\n    this.setState({sendingInvites: true});\n    await Promise.all(this.invites.map(this.sendInvite));\n    this.setState({sendingInvites: false, complete: true});\n\n    trackAnalyticsEvent({\n      eventKey: this.willInvite\n        ? 'invite_modal.invites_sent'\n        : 'invite_modal.requests_sent',\n      eventName: this.willInvite\n        ? 'Invite Modal: Invites Sent'\n        : 'Invite Modal: Requests Sent',\n      organization_id: this.props.organization.id,\n      modal_session: this.sessionId,\n    });\n  };\n\n  addInviteRow = () =>\n    this.setState(state => ({\n      pendingInvites: [...state.pendingInvites, this.inviteTemplate],\n    }));\n\n  setEmails(emails: string[], index: number) {\n    this.setState(state => {\n      const pendingInvites = [...state.pendingInvites];\n      pendingInvites[index] = {...pendingInvites[index], emails: new Set(emails)};\n\n      return {pendingInvites};\n    });\n  }\n\n  setTeams(teams: string[], index: number) {\n    this.setState(state => {\n      const pendingInvites = [...state.pendingInvites];\n      pendingInvites[index] = {...pendingInvites[index], teams: new Set(teams)};\n\n      return {pendingInvites};\n    });\n  }\n\n  setRole(role: string, index: number) {\n    this.setState(state => {\n      const pendingInvites = [...state.pendingInvites];\n      pendingInvites[index] = {...pendingInvites[index], role};\n\n      return {pendingInvites};\n    });\n  }\n\n  removeInviteRow(index: number) {\n    this.setState(state => {\n      const pendingInvites = [...state.pendingInvites];\n      pendingInvites.splice(index, 1);\n      return {pendingInvites};\n    });\n  }\n\n  get invites(): NormalizedInvite[] {\n    return this.state.pendingInvites.reduce<NormalizedInvite[]>(\n      (acc, row) => [\n        ...acc,\n        ...[...row.emails].map(email => ({email, teams: row.teams, role: row.role})),\n      ],\n      []\n    );\n  }\n\n  get hasDuplicateEmails() {\n    const emails = this.invites.map(inv => inv.email);\n    return emails.length !== new Set(emails).size;\n  }\n\n  get isValidInvites() {\n    return this.invites.length > 0 && !this.hasDuplicateEmails;\n  }\n\n  get statusMessage() {\n    const {sendingInvites, complete, inviteStatus} = this.state;\n\n    if (sendingInvites) {\n      return (\n        <StatusMessage>\n          <LoadingIndicator mini relative hideMessage size={16} />\n          {this.willInvite\n            ? t('Sending organization invitations...')\n            : t('Sending invite requests...')}\n        </StatusMessage>\n      );\n    }\n\n    if (complete) {\n      const statuses = Object.values(inviteStatus);\n      const sentCount = statuses.filter(i => i.sent).length;\n      const errorCount = statuses.filter(i => i.error).length;\n\n      const invites = <strong>{tn('%s invite', '%s invites', sentCount)}</strong>;\n      const tctComponents = {\n        invites,\n        failed: errorCount,\n      };\n\n      return (\n        <StatusMessage status=\"success\">\n          <IconCheckmark size=\"sm\" />\n          {errorCount > 0\n            ? tct('Sent [invites], [failed] failed to send.', tctComponents)\n            : tct('Sent [invites]', tctComponents)}\n        </StatusMessage>\n      );\n    }\n\n    if (this.hasDuplicateEmails) {\n      return (\n        <StatusMessage status=\"error\">\n          <IconWarning size=\"sm\" />\n          {t('Duplicate emails between invite rows.')}\n        </StatusMessage>\n      );\n    }\n\n    return null;\n  }\n\n  get willInvite() {\n    return this.props.organization.access?.includes('member:write');\n  }\n\n  get inviteButtonLabel() {\n    if (this.invites.length > 0) {\n      const numberInvites = this.invites.length;\n\n      // Note we use `t()` here because `tn()` expects the same # of string formatters\n      const inviteText =\n        numberInvites === 1 ? t('Send invite') : t('Send invites (%s)', numberInvites);\n      const requestText =\n        numberInvites === 1\n          ? t('Send invite request')\n          : t('Send invite requests (%s)', numberInvites);\n\n      return this.willInvite ? inviteText : requestText;\n    }\n\n    return this.willInvite ? t('Send invite') : t('Send invite request');\n  }\n\n  render() {\n    const {Footer, closeModal, organization, teams: allTeams} = this.props;\n    const {pendingInvites, sendingInvites, complete, inviteStatus, member} = this.state;\n\n    const disableInputs = sendingInvites || complete;\n\n    // eslint-disable-next-line react/prop-types\n    const hookRenderer: InviteModalRenderFunc = ({sendInvites, canSend, headerInfo}) => (\n      <React.Fragment>\n        <Heading>\n          {t('Invite New Members')}\n          {!this.willInvite && (\n            <QuestionTooltip\n              title={t(\n                `You do not have permission to directly invite members. Email\n                 addresses entered here will be forwarded to organization\n                 managers and owners; they will be prompted to approve the\n                 invitation.`\n              )}\n              size=\"sm\"\n              position=\"bottom\"\n            />\n          )}\n        </Heading>\n        <Subtext>\n          {this.willInvite\n            ? t('Invite new members by email to join your organization.')\n            : t(\n                `You don’t have permission to directly invite users, but we’ll\n                 send a request on your behalf.`\n              )}\n        </Subtext>\n\n        {headerInfo}\n\n        <InviteeHeadings>\n          <div>{t('Email addresses')}</div>\n          <div>{t('Role')}</div>\n          <div>{t('Add to team')}</div>\n        </InviteeHeadings>\n\n        {pendingInvites.map(({emails, role, teams}, i) => (\n          <StyledInviteRow\n            key={i}\n            disabled={disableInputs}\n            emails={[...emails]}\n            role={role}\n            teams={[...teams]}\n            roleOptions={member ? member.roles : MEMBER_ROLES}\n            roleDisabledUnallowed={this.willInvite}\n            teamOptions={allTeams}\n            inviteStatus={inviteStatus}\n            onRemove={() => this.removeInviteRow(i)}\n            onChangeEmails={opts => this.setEmails(opts?.map(v => v.value) ?? [], i)}\n            onChangeRole={value => this.setRole(value?.value, i)}\n            onChangeTeams={opts => this.setTeams(opts ? opts.map(v => v.value) : [], i)}\n            disableRemove={disableInputs || pendingInvites.length === 1}\n          />\n        ))}\n\n        <AddButton\n          disabled={disableInputs}\n          priority=\"link\"\n          onClick={this.addInviteRow}\n          icon={<IconAdd size=\"xs\" isCircled />}\n        >\n          {t('Add another')}\n        </AddButton>\n\n        <Footer>\n          <FooterContent>\n            <div>{this.statusMessage}</div>\n\n            {complete ? (\n              <React.Fragment>\n                <Button data-test-id=\"send-more\" size=\"small\" onClick={this.reset}>\n                  {t('Send more invites')}\n                </Button>\n                <Button\n                  data-test-id=\"close\"\n                  priority=\"primary\"\n                  size=\"small\"\n                  onClick={() => {\n                    trackAnalyticsEvent({\n                      eventKey: 'invite_modal.closed',\n                      eventName: 'Invite Modal: Closed',\n                      organization_id: this.props.organization.id,\n                      modal_session: this.sessionId,\n                    });\n                    closeModal();\n                  }}\n                >\n                  {t('Close')}\n                </Button>\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                <Button\n                  data-test-id=\"cancel\"\n                  size=\"small\"\n                  onClick={closeModal}\n                  disabled={disableInputs}\n                >\n                  {t('Cancel')}\n                </Button>\n                <Button\n                  size=\"small\"\n                  data-test-id=\"send-invites\"\n                  priority=\"primary\"\n                  disabled={!canSend || !this.isValidInvites || disableInputs}\n                  onClick={sendInvites}\n                >\n                  {this.inviteButtonLabel}\n                </Button>\n              </React.Fragment>\n            )}\n          </FooterContent>\n        </Footer>\n      </React.Fragment>\n    );\n\n    return (\n      <InviteModalHook\n        organization={organization}\n        willInvite={this.willInvite}\n        onSendInvites={this.sendInvites}\n      >\n        {hookRenderer}\n      </InviteModalHook>\n    );\n  }\n}\n\nconst Heading = styled('h1')`\n  display: inline-grid;\n  grid-gap: ${space(1.5)};\n  grid-auto-flow: column;\n  align-items: center;\n  font-weight: 400;\n  font-size: ${p => p.theme.headerFontSize};\n  margin-top: 0;\n  margin-bottom: ${space(0.75)};\n`;\n\nconst Subtext = styled('p')`\n  color: ${p => p.theme.subText};\n  margin-bottom: ${space(3)};\n`;\n\nconst inviteRowGrid = css`\n  display: grid;\n  grid-gap: ${space(1.5)};\n  grid-template-columns: 3fr 180px 2fr max-content;\n`;\n\nconst InviteeHeadings = styled('div')`\n  ${inviteRowGrid};\n\n  margin-bottom: ${space(1)};\n  font-weight: 600;\n  text-transform: uppercase;\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nconst StyledInviteRow = styled(InviteRowControl)`\n  ${inviteRowGrid};\n  margin-bottom: ${space(1.5)};\n`;\n\nconst AddButton = styled(Button)`\n  margin-top: ${space(3)};\n`;\n\nconst FooterContent = styled('div')`\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr max-content max-content;\n  grid-gap: ${space(1)};\n`;\n\nconst StatusMessage = styled('div')<{status?: 'success' | 'error'}>`\n  display: grid;\n  grid-template-columns: max-content max-content;\n  grid-gap: ${space(1)};\n  align-items: center;\n  font-size: ${p => p.theme.fontSizeMedium};\n  color: ${p => (p.status === 'error' ? p.theme.red300 : p.theme.gray400)};\n\n  > :first-child {\n    ${p => p.status === 'success' && `color: ${p.theme.green300}`};\n  }\n`;\n\nexport const modalCss = css`\n  padding: 50px;\n\n  .modal-dialog {\n    position: unset;\n    width: 100%;\n    max-width: 800px;\n    margin: 50px auto;\n  }\n`;\n\nexport default withLatestContext(withTeams(InviteMembersModal));\n","import React from 'react';\nimport {components, OptionProps} from 'react-select';\nimport styled from '@emotion/styled';\n\nimport SelectControl, {ControlProps} from 'app/components/forms/selectControl';\nimport space from 'app/styles/space';\nimport {MemberRole} from 'app/types';\nimport theme from 'app/utils/theme';\n\ntype OptionType = {\n  label: string;\n  value: string;\n  disabled: boolean;\n  description: string;\n};\n\ntype Props = Omit<ControlProps<OptionType>, 'onChange' | 'value'> & {\n  roles: MemberRole[];\n  disableUnallowed: boolean;\n  value?: string;\n  /**\n   * Narrower type than SelectControl because there is no empty value\n   */\n  onChange?: (value: OptionType) => void;\n};\n\nfunction RoleSelectControl({roles, disableUnallowed, ...props}: Props) {\n  return (\n    <SelectControl\n      options={roles?.map(\n        (r: MemberRole) =>\n          ({\n            value: r.id,\n            label: r.name,\n            disabled: disableUnallowed && !r.allowed,\n            description: r.desc,\n          } as OptionType)\n      )}\n      components={{\n        Option: ({label, data, ...optionProps}: OptionProps<OptionType>) => (\n          <components.Option label={label} {...(optionProps as any)}>\n            <RoleItem>\n              <h1>{label}</h1>\n              <div>{data.description}</div>\n            </RoleItem>\n          </components.Option>\n        ),\n      }}\n      styles={{\n        control: provided => ({\n          ...provided,\n          borderBottomLeftRadius: theme.borderRadius,\n          borderBottomRightRadius: theme.borderRadius,\n        }),\n        menu: provided => ({\n          ...provided,\n          borderRadius: theme.borderRadius,\n          marginTop: space(0.5),\n          width: '350px',\n          overflow: 'hidden',\n        }),\n      }}\n      {...props}\n    />\n  );\n}\n\nconst RoleItem = styled('div')`\n  display: grid;\n  grid-template-columns: 80px 1fr;\n  grid-gap: ${space(1)};\n\n  h1,\n  div {\n    font-size: ${p => p.theme.fontSizeSmall};\n    line-height: 1.4;\n    margin: ${space(0.25)} 0;\n  }\n`;\n\nexport default RoleSelectControl;\n","import React from 'react';\nimport createReactClass from 'create-react-class';\nimport Reflux from 'reflux';\n\nimport TeamStore from 'app/stores/teamStore';\nimport {Team} from 'app/types';\nimport getDisplayName from 'app/utils/getDisplayName';\n\ntype InjectedTeamsProps = {\n  teams: Team[];\n};\n\ntype State = {\n  teams: Team[];\n};\n\n/**\n * Higher order component that uses TeamStore and provides a list of teams\n */\nconst withTeams = <P extends InjectedTeamsProps>(\n  WrappedComponent: React.ComponentType<P>\n) =>\n  createReactClass<Omit<P, keyof InjectedTeamsProps>, State>({\n    displayName: `withTeams(${getDisplayName(WrappedComponent)})`,\n    mixins: [Reflux.listenTo(TeamStore, 'onTeamUpdate') as any],\n\n    getInitialState() {\n      return {\n        teams: TeamStore.getAll(),\n      };\n    },\n\n    onTeamUpdate() {\n      this.setState({\n        teams: TeamStore.getAll(),\n      });\n    },\n    render() {\n      return (\n        <WrappedComponent {...(this.props as P)} teams={this.state.teams as Team[]} />\n      );\n    },\n  });\n\nexport default withTeams;\n"],"sourceRoot":""}