(self.webpackChunk=self.webpackChunk||[]).push([["AdminOverview"],{"./app/views/admin/adminOverview/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n("../../../../node_modules/react/index.js"),s=n("../../../../node_modules/react-document-title/index.js"),a=n.n(s),o=n("./app/components/panels/index.tsx"),i=n("./app/locale.tsx"),c=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(c),u=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),p=n.n(u),h=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(h),d=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),x=n.n(m),y=n("./app/components/charts/miniBarChart.tsx"),w=n("./app/components/loadingError.tsx"),Z=n("./app/components/loadingIndicator.tsx"),g=n("./app/utils/theme.tsx"),k=n("./app/utils/withApi.tsx"),D=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var b={error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":[],"client-api.all-versions.responses.4xx":[],"client-api.all-versions.responses.5xx":[]}},R=function(e){f()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x()(t);if(n){var s=x()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return v()(this,e)});function s(){var e;l()(this,s);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state=b,e.fetchData=function(){["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(n){e.setState((function(e){var r=e.rawData;return r[t]=n,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e.requestFinished=function(){var t=e.state.rawData;t["client-api.all-versions.responses.2xx"]&&t["client-api.all-versions.responses.4xx"]&&t["client-api.all-versions.responses.5xx"]&&e.setState({loading:!1})},e}return p()(s,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(b,this.fetchData)}},{key:"processRawSeries",value:function(e){return e.map((function(e){return{name:1e3*e[0],value:e[1]}}))}},{key:"getChartSeries",value:function(){var e=this.state.rawData;return[{seriesName:"2xx",data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:g.ZP.green200},{seriesName:"4xx",data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:g.ZP.blue300},{seriesName:"5xx",data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:g.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error;if(t)return(0,D.tZ)(Z.Z,null);if(n)return(0,D.tZ)(w.Z,{onRetry:this.fetchData});var r=this.getChartSeries(),s=r.map((function(e){return e.color}));return(0,D.tZ)(y.Z,{series:r,colors:s,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),s}(r.Component);R.displayName="ApiChart";const S=(0,k.Z)(R);var C={error:!1,loading:!0,rawData:{"events.total":[],"events.dropped":[]},stats:{received:[],rejected:[]}},j=function(e){f()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x()(t);if(n){var s=x()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return v()(this,e)});function s(){var e;l()(this,s);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state=C,e.fetchData=function(){["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(n){e.setState((function(e){var r=e.rawData;return r[t]=n,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e}return p()(s,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(C,this.fetchData)}},{key:"requestFinished",value:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()}},{key:"processOrgData",value:function(){var e=this.state.rawData,t={},n={},r=[0,0];e["events.total"].forEach((function(s,a){var o=s[1],i=e["events.dropped"][a][1],c=s[0];void 0===t[c]?(t[c]=o,n[c]=i):(t[c]+=o,n[c]+=i),o>0&&(r[0]+=o,r[1]+=1)})),this.setState({stats:{rejected:Object.keys(n).map((function(e){return{name:1e3*parseInt(e,10),value:n[e]||0}})),accepted:Object.keys(t).map((function(e){return{name:1e3*parseInt(e,10),value:t[e]-n[e]}}))},loading:!1})}},{key:"getChartSeries",value:function(){var e=this.state.stats;return[{seriesName:(0,i.t)("Accepted"),data:e.accepted,color:g.ZP.blue300},{seriesName:(0,i.t)("Dropped"),data:e.rejected,color:g.ZP.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error;if(t)return(0,D.tZ)(Z.Z,null);if(n)return(0,D.tZ)(w.Z,{onRetry:this.fetchData});var r=this.getChartSeries(),s=r.map((function(e){return e.color}));return(0,D.tZ)(y.Z,{series:r,colors:s,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),s}(r.Component);j.displayName="EventChart";const P=(0,k.Z)(j);var O=function(){var e=(new Date).getTime()/1e3-604800;return(0,D.tZ)(a(),{title:"Admin Overview - Sentry"},(0,D.tZ)(r.Fragment,null,(0,D.tZ)("h3",null,(0,i.t)("System Overview")),(0,D.tZ)(o.s_,{key:"events"},(0,D.tZ)(o.V9,null,(0,i.t)("Event Throughput")),(0,D.tZ)(o.N,{withPadding:!0},(0,D.tZ)(P,{since:e,resolution:"1h"}))),(0,D.tZ)(o.s_,{key:"api"},(0,D.tZ)(o.V9,null,(0,i.t)("API Responses")),(0,D.tZ)(o.N,{withPadding:!0},(0,D.tZ)(S,{since:e,resolution:"1h"})))))};O.displayName="AdminOverview";const A=O}}]);
//# sourceMappingURL=AdminOverview.js.map