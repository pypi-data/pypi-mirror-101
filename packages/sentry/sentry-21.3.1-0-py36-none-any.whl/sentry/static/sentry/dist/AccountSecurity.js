(self.webpackChunk=self.webpackChunk||[]).push([["AccountSecurity"],{"./app/data/forms/accountPassword.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{route:()=>o,default:()=>r});var s=function(e){return!e.user.isManaged},o="/settings/account/security/";const r=[{title:"Password",fields:[{name:"password",type:"secret",autoComplete:"current-password",label:"Current Password",placeholder:"",help:"Your current password",visible:s,required:!0},{name:"passwordNew",type:"secret",autoComplete:"new-password",label:"New Password",placeholder:"",help:"",required:!0,visible:s,validate:function(e){var t=e.id,n=e.form;return n[t]!==n.passwordVerify?[[t,""]]:[]}},{name:"passwordVerify",type:"secret",autoComplete:"new-password",label:"Verify New Password",placeholder:"",help:"Verify your new password",required:!0,visible:s,validate:function(e){var t=e.id,n=e.form;return n.passwordNew&&n.passwordNew!==n[t]?[[t,"Passwords do not match"]]:[]}}]}]},"./app/utils/getPendingInvite.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n("../../../../node_modules/js-cookie/src/js.cookie.js"),o=n.n(s),r=n("../../../../node_modules/query-string/index.js");function a(){var e=o().get("pending-invite");return e?r.Qc(e):null}},"./app/utils/recreateRoute.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n("../../../../node_modules/lodash/findLastIndex.js"),o=n.n(s),r=n("./app/utils/replaceRouterParams.tsx");function a(e,t){var n,s,a,i,l=t.routes,u=t.params,c=t.location,d=t.stepBack,p=l.map((function(e){return e.path||""}));"string"!=typeof e?(i=l.indexOf(e)+1,a=o()(p.slice(0,i),(function(e){return"/"===e[0]}))):a=o()(p,(function(e){return"/"===e[0]}));var m=p.slice(a,i);void 0!==d&&(m=m.slice(0,d));var f=null!==(n=null==c?void 0:c.search)&&void 0!==n?n:"",g=null!==(s=null==c?void 0:c.hash)&&void 0!==s?s:"",h="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(f).concat(g);return(0,r.Z)(h,u)}},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var s=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(s),r=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(d),m=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),f=n.n(m),g=n("./app/components/asyncComponent.tsx"),h=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){l()(r,e);var t,n,s=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=p()(t);if(n){var o=p()(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return c()(this,e)});function r(){return o()(this,r),s.apply(this,arguments)}return a()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,h.tZ)(f(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(g.Z);y.displayName="AsyncView"},"./app/views/settings/account/accountSecurity/components/confirmHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const s=(0,n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js").Z)("div",{target:"e1pnf9a40",label:"ConfirmHeader"})({name:"1pihav0",styles:"font-size:1.2em;margin-bottom:10px;"})},"./app/views/settings/account/accountSecurity/components/removeConfirm.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),o=n.n(s),r=n("../../../../node_modules/react/index.js"),a=n("./app/components/confirm.tsx"),i=n("./app/locale.tsx"),l=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),u=n("./app/views/settings/components/text/textBlock.tsx"),c=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),d=(0,c.tZ)(r.Fragment,null,(0,c.tZ)(l.Z,null,(0,i.t)("Do you want to remove this method?")),(0,c.tZ)(u.Z,null,(0,i.t)("Removing the last authentication method will disable two-factor authentication completely."))),p=function(e){return(0,c.tZ)(a.Z,o()({},e,{message:d}))};p.displayName="RemoveConfirm";const m=p},"./app/views/settings/account/accountSecurity/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te});var s=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),o=n.n(s),r=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),a=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),f=n.n(m),g=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(g),y=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),Z=(n("../../../../node_modules/react/index.js"),n("./app/actionCreators/indicator.tsx")),b=n("./app/components/button.tsx"),v=n("./app/components/circleIndicator.tsx"),w=n("./app/components/links/listLink.tsx"),x=n("./app/components/navTabs.tsx"),j=n("./app/components/panels/index.tsx"),k=n("./app/components/tooltip.tsx"),_=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),C=n("./app/styles/space.tsx"),P=n("./app/utils/recreateRoute.tsx"),R=n("./app/views/asyncView.tsx"),q=n("./app/views/settings/account/accountSecurity/components/removeConfirm.tsx"),N=n("./app/components/alert.tsx"),T=n("./app/components/links/externalLink.tsx"),A=n("./app/utils/getPendingInvite.tsx"),z=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),B=(0,y.Z)(N.Z,{target:"e21uako0",label:"StyledAlert"})("margin:",(0,C.Z)(3)," 0;");const F=function(){return(0,A.Z)()?(0,z.tZ)(B,{"data-test-id":"require-2fa",type:"error",icon:(0,z.tZ)(_.Gy,{size:"md"})},(0,S._N)("You have been invited to an organization that requires [link:two-factor authentication]. Setup two-factor authentication below to join your organization.",{link:(0,z.tZ)(T.Z,{href:"https://docs.sentry.io/accounts/require-2fa/"})})):null};var H=n("./app/data/forms/accountPassword.tsx"),I=n("./app/stores/configStore.tsx"),E=n("./app/views/settings/components/forms/form.tsx"),O=n("./app/views/settings/components/forms/jsonForm.tsx");function V(){var e=I.Z.get("user");return(0,z.tZ)(E.Z,{apiMethod:"PUT",apiEndpoint:"/users/me/password/",initialData:{},onSubmitSuccess:function(e,t){t.resetForm(),(0,Z.S9)("Password has been changed")},onSubmitError:function(){(0,Z.Iw)("Error changing password")},hideFooter:!0},(0,z.tZ)(O.Z,{forms:H.default,additionalFieldProps:{user:e},renderFooter:function(){return(0,z.tZ)(j.Lv,{justifyContent:"flex-end"},(0,z.tZ)(b.ZP,{type:"submit",priority:"primary"},(0,S.t)("Change password")))},renderHeader:function(){return(0,z.tZ)(j.aU,{type:"info"},(0,S.t)("Changing your password will invalidate all logged in sessions."))}}))}V.displayName="PasswordForm";const L=V;var D=n("./app/views/settings/components/emptyMessage.tsx"),W=n("./app/views/settings/components/forms/field/index.tsx"),G=n("./app/views/settings/components/settingsPageHeader.tsx"),M=n("./app/views/settings/components/text/textBlock.tsx");var U=function(e){p()(r,e);var t,n,s=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=h()(t);if(n){var o=h()(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return f()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=s.call.apply(s,[this].concat(n))).handleSessionClose=a()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.requestPromise("/auth/",{method:"DELETE",data:{all:!0}});case 3:window.location.assign("/auth/login/"),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),(0,Z.Iw)((0,S.t)("There was a problem closing all sessions")),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.formatOrgSlugs=function(){var t=e.props.orgsRequire2fa.map((function(e){return e.slug}));return[t.slice(0,-1).join(", "),t.slice(-1)[0]].join(t.length>1?" and ":"")},e}return c()(r,[{key:"getTitle",value:function(){return(0,S.t)("Security")}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.authenticators,s=t.countEnrolled,o=t.deleteDisabled,r=t.onDisable,a=!(null!=n&&n.length);return(0,z.tZ)("div",null,(0,z.tZ)(G.Z,{title:(0,S.t)("Security"),tabs:(0,z.tZ)(x.Z,{underlined:!0},(0,z.tZ)(w.Z,{to:(0,P.Z)("",this.props),index:!0},(0,S.t)("Settings")),(0,z.tZ)(w.Z,{to:(0,P.Z)("session-history/",this.props)},(0,S.t)("Session History")))}),!a&&0===s&&(0,z.tZ)(F,null),(0,z.tZ)(L,null),(0,z.tZ)(j.s_,null,(0,z.tZ)(j.V9,null,(0,S.t)("Sessions")),(0,z.tZ)(j.N,null,(0,z.tZ)(W.Z,{alignRight:!0,flexibleControlStateSize:!0,label:(0,S.t)("Sign out of all devices"),help:(0,S.t)("Signing out of all devices will sign you out of this device as well.")},(0,z.tZ)(b.ZP,{"data-test-id":"signoutAll",onClick:this.handleSessionClose},(0,S.t)("Sign out of all devices"))))),(0,z.tZ)(j.s_,null,(0,z.tZ)(j.V9,null,(0,S.t)("Two-Factor Authentication")),a&&(0,z.tZ)(D.Z,null,(0,S.t)("No available authenticators to add")),(0,z.tZ)(j.N,null,!a&&(null==n?void 0:n.map((function(t){var n=t.id,s=t.authId,a=t.description,i=t.isBackupInterface,l=t.isEnrolled,u=t.configureButton,c=t.name;return(0,z.tZ)(Q,{key:n},(0,z.tZ)(J,null,(0,z.tZ)(K,null,(0,z.tZ)($,{enabled:l}),(0,z.tZ)(Y,null,c)),(0,z.tZ)(X,null,!i&&!l&&(0,z.tZ)(b.ZP,{to:"/settings/account/security/mfa/".concat(n,"/enroll/"),size:"small",priority:"primary",className:"enroll-button"},(0,S.t)("Add")),l&&s&&(0,z.tZ)(b.ZP,{to:"/settings/account/security/mfa/".concat(s,"/"),size:"small",className:"details-button"},u),!i&&l&&(0,z.tZ)(k.Z,{title:(0,S.t)("Two-factor authentication is required for organization(s): ".concat(e.formatOrgSlugs(),".")),disabled:!o},(0,z.tZ)(q.Z,{onConfirm:function(){return r(t)},disabled:o},(0,z.tZ)(b.ZP,{size:"small",label:(0,S.t)("delete"),icon:(0,z.tZ)(_.Fz,null)})))),i&&!l?(0,S.t)("requires 2FA"):null),(0,z.tZ)(ee,null,a))}))))))}}]),r}(R.Z),Y=(0,y.Z)("span",{target:"ekt5q3n0",label:"AuthenticatorName"})({name:"1x1uhd2",styles:"font-size:1.2em;"}),Q=(0,y.Z)(j.Lv,{target:"ekt5q3n1",label:"AuthenticatorPanelItem"})({name:"cgq59l",styles:"flex-direction:column;"}),J=(0,y.Z)("div",{target:"ekt5q3n2",label:"AuthenticatorHeader"})({name:"14oqdsi",styles:"display:flex;flex:1;align-items:center;"}),K=(0,y.Z)("div",{target:"ekt5q3n3",label:"AuthenticatorTitle"})({name:"1rr4qq7",styles:"flex:1;"}),X=(0,y.Z)("div",{target:"ekt5q3n4",label:"Actions"})("display:grid;grid-auto-flow:column;grid-gap:",(0,C.Z)(1),";"),$=(0,y.Z)(v.Z,{target:"ekt5q3n5",label:"AuthenticatorStatus"})("margin-right:",(0,C.Z)(1),";"),ee=(0,y.Z)(M.Z,{target:"ekt5q3n6",label:"Description"})("margin-top:",(0,C.Z)(2),";margin-bottom:0;");const te=U},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>q});var s=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=n.n(s),r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(m),g=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=n("../../../../node_modules/react/index.js"),y=n("./app/styles/organization.tsx"),Z=n("./app/styles/space.tsx"),b=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var v=function(e){c()(r,e);var t,n,s=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=f()(t);if(n){var o=f()(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return p()(this,e)});function r(){return a()(this,r),s.apply(this,arguments)}return l()(r,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,s=e.subtitle,r=e.action,a=e.tabs,i=e.noTitleStyles,l=e.body,u=o()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),c=!s;return(0,b.tZ)("div",u,(0,b.tZ)(w,{isNarrow:c},(0,b.tZ)(x,null,t&&(0,b.tZ)(_,null,t),n&&(0,b.tZ)(j,{tabs:a,styled:i},(0,b.tZ)(y.Gh,null,n),s&&(0,b.tZ)(k,null,s))),r&&(0,b.tZ)(S,{isNarrow:c},r)),l&&(0,b.tZ)(P,null,l),a&&(0,b.tZ)(R,null,a))}}]),r}(h.Component);v.displayName="UnstyledSettingsPageHeader",v.defaultProps={noTitleStyles:!1};var w=(0,g.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),x=(0,g.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),j=(0,g.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,Z.Z)(4)," ",(0,Z.Z)(2)," ",(0,Z.Z)(3)," 0;"),k=(0,g.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,Z.Z)(1.5)," 0 0;"),_=(0,g.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,Z.Z)(1),";"),S=(0,g.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,Z.Z)(4)}),";"),C=(0,g.Z)(v,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,Z.Z)(4),";"),P=(0,g.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,Z.Z)(3),";"),R=(0,g.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const q=C}}]);
//# sourceMappingURL=AccountSecurity.js.map