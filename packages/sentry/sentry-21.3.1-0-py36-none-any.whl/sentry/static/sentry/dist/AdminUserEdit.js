(self.webpackChunk=self.webpackChunk||[]).push([["AdminUserEdit"],{"./app/views/admin/adminUserEdit.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),p=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(m),f=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=n.n(f),y=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),b=n.n(y),g=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),x=n("../../../../node_modules/react/index.js"),w=n("../../../../node_modules/react-router/es/index.js"),Z=n("./app/actionCreators/indicator.tsx"),j=n("./app/actionCreators/modal.tsx"),C=n("./app/components/button.tsx"),_=n("./app/locale.tsx"),k=n("./app/styles/space.tsx"),R=n("./app/views/asyncView.tsx"),U=n("./app/views/settings/components/forms/controls/radioGroup.tsx"),E=n("./app/views/settings/components/forms/form.tsx"),P=n("./app/views/settings/components/forms/jsonForm.tsx"),S=n("./app/views/settings/components/forms/model.tsx"),T=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var s=b()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return v()(this,n)}}var D={title:"User details",fields:[{name:"name",type:"string",required:!0,label:(0,_.t)("Name")},{name:"username",type:"string",required:!0,label:(0,_.t)("Username"),help:(0,_.t)("The username is the unique id of the user in the system")},{name:"email",type:"string",required:!0,label:(0,_.t)("Email"),help:(0,_.t)("The users primary email address")},{name:"isActive",type:"boolean",required:!0,label:(0,_.t)("Active"),help:(0,_.t)("Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")},{name:"isStaff",type:"boolean",required:!0,label:(0,_.t)("Admin"),help:(0,_.t)("Designates whether this user can perform administrative functions.")},{name:"isSuperuser",type:"boolean",required:!0,label:(0,_.t)("Superuser"),help:(0,_.t)("Designates whether this user has all permissions without explicitly assigning them.")}]},M={disable:(0,_.t)("Disable User"),delete:(0,_.t)("Permanently Delete User")},A=function(e){h()(n,e);var t=q(n);function n(){var e;c()(this,n);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={deleteType:"disable"},e.onRemove=function(){e.props.onRemove(e.state.deleteType),e.props.closeModal()},e}return p()(n,[{key:"render",value:function(){var e=this,t=this.props.user,n=this.state.deleteType;return(0,T.tZ)(x.Fragment,null,(0,T.tZ)(U.Z,{value:n,label:(0,_.t)("Remove user %s",t.email),onChange:function(t){return e.setState({deleteType:t})},choices:[["disable",(0,_.t)("Disable the account.")],["delete",(0,_.t)("Permanently remove the user and their data.")]]}),(0,T.tZ)(F,null,(0,T.tZ)(C.ZP,{priority:"danger",onClick:this.onRemove},M[n]),(0,T.tZ)(C.ZP,{onClick:this.props.closeModal},(0,_.t)("Cancel"))))}}]),n}(x.Component);A.displayName="RemoveUserModal";var B=function(e){h()(o,e);var t,n,r=q(o);function o(){var e;c()(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=r.call.apply(r,[this].concat(n))).removeUser=function(t){return"delete"===t?e.deleteUser():e.deactivateUser()},e.formModel=new S.Z,e}return p()(o,[{key:"userEndpoint",get:function(){var e=this.props.params;return"/users/".concat(e.id,"/")}},{key:"getEndpoints",value:function(){return[["user",this.userEndpoint]]}},{key:"deleteUser",value:(n=l()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"DELETE",data:{hardDelete:!0,organizations:[]}});case 2:(0,Z.S9)((0,_.t)("%s's account has been deleted.",null===(t=this.state.user)||void 0===t?void 0:t.email)),w.browserHistory.replace("/manage/users/");case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deactivateUser",value:(t=l()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"PUT",data:{isActive:!1}});case 2:t=e.sent,this.setState({user:t}),this.formModel.setInitialData(t),(0,Z.S9)((0,_.t)("%s's account has been deactivated.",t.email));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderBody",value:function(){var e=this,t=this.state.user;return null===t?null:(0,T.tZ)(x.Fragment,null,(0,T.tZ)("h3",null,(0,_.t)("Users")),(0,T.tZ)("p",null,(0,_.t)("Editing user: %s",t.email)),(0,T.tZ)(E.Z,{model:this.formModel,initialData:t,apiMethod:"PUT",apiEndpoint:this.userEndpoint,requireChanges:!0,onSubmitError:Z.Iw,onSubmitSuccess:function(t){e.setState({user:t}),(0,Z.S9)("User account updated.")},extraButton:(0,T.tZ)(C.ZP,{type:"button",onClick:function(){return(0,j.openModal)((function(n){return(0,T.tZ)(A,s()({user:t,onRemove:e.removeUser},n))}))},style:{marginLeft:(0,k.Z)(1)},priority:"danger"},(0,_.t)("Remove User"))},(0,T.tZ)(P.Z,{forms:[D]})))}}]),o}(R.Z),F=(0,g.Z)("div",{target:"e1drqbta0",label:"ModalFooter"})("display:grid;grid-auto-flow:column;grid-gap:",(0,k.Z)(1),";justify-content:end;padding:20px 30px;margin:20px -30px -30px;border-top:1px solid ",(function(e){return e.theme.border}),";");const O=B},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(d),m=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),h=n.n(m),f=n("./app/components/asyncComponent.tsx"),v=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){l()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p()(t);if(n){var s=p()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return c()(this,e)});function o(){return s()(this,o),r.apply(this,arguments)}return a()(o,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,v.tZ)(h(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),o}(f.Z);y.displayName="AsyncView"}}]);
//# sourceMappingURL=AdminUserEdit.js.map