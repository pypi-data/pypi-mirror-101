(self.webpackChunk=self.webpackChunk||[]).push([["TeamSettings"],{"./app/actionCreators/teams.tsx":(e,t,n)=>{"use strict";n.d(t,{eM:()=>u,z_:()=>l,fs:()=>m,um:()=>d,s:()=>p,Cm:()=>f,tT:()=>g});var r=n("./app/actionCreators/indicator.tsx"),a=n("./app/actions/teamActions.tsx"),o=n("./app/locale.tsx"),s=n("./app/utils/callIfFunction.tsx"),c=n("./app/utils/guid.tsx"),i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];s.g.apply(void 0,[e[t]].concat(r))};function u(e,t,n){return a.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){a.Z.fetchDetailsSuccess(t.teamId,e),i(n,"success",e)},error:function(e){a.Z.fetchDetailsError(t.teamId,e),i(n,"error",e)}})}function l(e,t){a.Z.updateSuccess(e,t)}function m(e,t,n){var r="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return a.Z.update(t.teamId,t.data),e.request(r,{method:"PUT",data:t.data,success:function(e){l(t.teamId,e),i(n,"success",e)},error:function(e){a.Z.updateError(t.teamId,e),i(n,"error",e)}})}function d(e,t,n){var r,o="/organizations/".concat(t.orgId,"/members/").concat(null!==(r=t.memberId)&&void 0!==r?r:"me","/teams/").concat(t.teamId,"/"),s=(0,c.E)();return a.Z.update(s,t.teamId),e.request(o,{method:"POST",success:function(e){a.Z.updateSuccess(t.teamId,e),i(n,"success",e)},error:function(e){a.Z.updateError(s,t.teamId,e),i(n,"error",e)}})}function p(e,t,n){var r="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),o=(0,c.E)();return a.Z.update(o,t.teamId),e.request(r,{method:"DELETE",success:function(e){a.Z.updateSuccess(t.teamId,e),i(n,"success",e)},error:function(e){a.Z.updateError(o,t.teamId,e),i(n,"error",e)}})}function f(e,t,n){return a.Z.createTeam(t),e.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return a.Z.createTeamSuccess(e),(0,r.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:n.orgId})),e}),(function(e){throw a.Z.createTeamError(t.slug,e),(0,r.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),e}))}function g(e,t){return a.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return a.Z.removeTeamSuccess(t.teamId,e),(0,r.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw a.Z.removeTeamError(t.teamId,e),(0,r.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/data/forms/teamSettingsFields.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{route:()=>o,default:()=>s});var r=n("./app/locale.tsx"),a=n("./app/utils/slugify.tsx"),o="/settings/:orgId/teams/:teamId/settings/";const s=[{title:"Team Settings",fields:[{name:"slug",type:"string",required:!0,label:(0,r.t)("Name"),placeholder:"e.g. api-team",help:(0,r.t)("A unique ID used to identify the team"),disabled:function(e){return!e.access.has("team:write")},transformInput:a.Z,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,r.t)("You will be redirected to the new team slug after saving")}]}]},"./app/utils/slugify.tsx":(e,t,n)=>{"use strict";function r(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}n.d(t,{Z:()=>r})},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(o),c=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),i=n.n(c),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(u),m=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(m),p=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),f=n.n(p),g=n("./app/components/asyncComponent.tsx"),h=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var v=function(e){i()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var a=d()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return l()(this,e)});function o(){return a()(this,o),r.apply(this,arguments)}return s()(o,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,h.tZ)(f(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),o}(g.Z);v.displayName="AsyncView"},"./app/views/settings/organizationTeams/teamSettings/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var r=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),a=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),s=n.n(o),c=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(c),u=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(u),m=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(m),p=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),f=n.n(p),g=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(g),v=n("../../../../node_modules/react/index.js"),y=n("../../../../node_modules/prop-types/index.js"),I=n.n(y),b=n("./app/actionCreators/indicator.tsx"),x=n("./app/actionCreators/teams.tsx"),Z=n("./app/components/button.tsx"),w=n("./app/components/confirm.tsx"),T=n("./app/components/panels/index.tsx"),S=n("./app/data/forms/teamSettingsFields.tsx"),_=n("./app/icons/index.tsx"),j=n("./app/locale.tsx"),z=n("./app/sentryTypes.tsx"),R=n("./app/views/asyncView.tsx"),C=n("./app/views/settings/components/forms/field/index.tsx"),E=n("./app/views/settings/components/forms/form.tsx"),P=n("./app/views/settings/components/forms/jsonForm.tsx");const k=function(e){d()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var a=h()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return f()(this,e)});function a(e,t){var n;return i()(this,a),(n=r.call(this)).orgId=void 0,n.teamId=void 0,n.orgId=e,n.teamId=t,n}return l()(a,[{key:"doApiRequest",value:function(e){var t=this,n=e.data;return new Promise((function(e,r){return(0,x.fs)(t.api,{orgId:t.orgId,teamId:t.teamId,data:n},{success:e,error:r})}))}}]),a}(n("./app/views/settings/components/forms/model.tsx").Z);var O=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var q=function(e){d()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var a=h()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return f()(this,e)});function o(){var e;i()(this,o);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=r.call.apply(r,[this].concat(n))).model=new k(e.props.params.orgId,e.props.params.teamId),e.handleSubmitSuccess=function(t,n,r){(0,x.z_)(t.slug,t),"slug"===r&&((0,b.S9)((0,j.t)("Team name changed")),e.props.router.replace("/settings/".concat(e.props.params.orgId,"/teams/").concat(n.getValue(r),"/settings/")),e.setState({loading:!0}))},e.handleRemoveTeam=s()(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.tT)(e.api,e.props.params);case 2:e.props.router.replace("/settings/".concat(e.props.params.orgId,"/teams/"));case 3:case"end":return t.stop()}}),t)}))),e}return l()(o,[{key:"getTitle",value:function(){return"Team Settings"}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=this.context,t=e.location,n=e.organization,r=this.props.team,a=new Set(n.access);return(0,O.tZ)(v.Fragment,null,(0,O.tZ)(E.Z,{model:this.model,apiMethod:"PUT",saveOnBlur:!0,allowUndo:!0,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:function(){return(0,b.Iw)((0,j.t)("Unable to save change"))},initialData:{name:r.name,slug:r.slug}},(0,O.tZ)(P.Z,{access:a,location:t,forms:S.default})),(0,O.tZ)(T.s_,null,(0,O.tZ)(T.V9,null,(0,j.t)("Remove Team")),(0,O.tZ)(C.Z,{help:(0,j.t)("This may affect team members' access to projects and associated alert delivery.")},(0,O.tZ)("div",null,(0,O.tZ)(w.Z,{disabled:!a.has("team:admin"),onConfirm:this.handleRemoveTeam,priority:"danger",message:(0,j._N)("Are you sure you want to remove the team [team]?",{team:"#".concat(r.slug)})},(0,O.tZ)(Z.ZP,{icon:(0,O.tZ)(_.Fz,null),priority:"danger",disabled:!a.has("team:admin")},(0,j.t)("Remove Team")))))))}}]),o}(R.Z);q.contextTypes={router:I().object,location:I().object,organization:z.ZP.Organization}}}]);
//# sourceMappingURL=TeamSettings.js.map