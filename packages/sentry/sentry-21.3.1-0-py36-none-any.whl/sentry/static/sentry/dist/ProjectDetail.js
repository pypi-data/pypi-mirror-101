(self.webpackChunk=self.webpackChunk||[]).push([["ProjectDetail"],{"./app/views/projectDetail/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>dr});var n=r("../../../../node_modules/react/index.js"),o=r("./app/components/acl/feature.tsx"),i=r("./app/components/alert.tsx"),s=r("./app/locale.tsx"),a=r("./app/styles/organization.tsx"),l=r("./app/utils/withOrganization.tsx"),c=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),u=r.n(c),p=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),d=r.n(p),h=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),f=r.n(h),g=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),v=r.n(g),m=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),y=r.n(m),b=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),Z=r.n(b),j=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),S=r.n(j),x=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),P=r.n(x),z=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),k=r.n(z),O=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),w=r("./app/actionCreators/globalSelection.tsx"),R=r("./app/components/breadcrumbs.tsx"),T=r("./app/components/button.tsx"),D=r("./app/components/buttonBar.tsx"),C=r("./app/components/createAlertButton.tsx"),A=r("./app/components/globalSdkUpdateAlert.tsx"),I=r("./app/components/idBadge/index.tsx"),q=r("./app/components/layouts/thirds.tsx"),_=r("./app/components/lightWeightNoProjectMessage.tsx"),B=r("./app/components/organizations/globalSelectionHeader/index.tsx"),E=r("./app/components/textOverflow.tsx"),N=r("./app/icons/index.tsx"),L=r("./app/utils.tsx"),F=r("./app/utils/routeTitle.tsx"),M=r("./app/utils/withGlobalSelection.tsx"),H=r("./app/utils/withProjects.tsx"),W=r("./app/views/asyncView.tsx"),U=r("./app/styles/space.tsx"),G=r("../../../../node_modules/@babel/runtime/helpers/get.js"),V=r.n(G),Q=r("../../../../node_modules/lodash/round.js"),Y=r.n(Q),J=r("./app/components/asyncComponent.tsx"),X=r("./app/components/count.tsx"),K=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),$=r("./app/components/organizations/timeRangeSelector/utils.tsx"),ee=r("./app/components/panels/index.tsx"),te=r("./app/components/questionTooltip.tsx"),re=r("./app/styles/overflowEllipsis.tsx"),ne=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function oe(e){var t=e.title,r=e.score,n=e.help,o=e.trend,i=e.trendStatus,s=e.className;return(0,ne.tZ)(se,{className:s},(0,ne.tZ)(ae,null,(0,ne.tZ)(le,null,t),n&&(0,ne.tZ)(te.Z,{title:n,size:"sm",position:"top"})),(0,ne.tZ)(ce,null,(0,ne.tZ)(ue,null,null!=r?r:"—"),(0,L.ri)(o)&&(0,ne.tZ)(pe,{trendStatus:i},o)))}function ie(e){switch(e.trendStatus){case"good":return e.theme.green300;case"bad":return e.theme.red300;default:return e.theme.gray300}}oe.displayName="ScoreCard";var se=(0,O.Z)(ee.s_,{target:"e1f488220",label:"StyledPanel"})("display:flex;flex-direction:column;justify-content:space-between;padding:",(0,U.Z)(2)," ",(0,U.Z)(3),";min-height:96px;"),ae=(0,O.Z)("div",{target:"e1f488221",label:"HeaderTitle"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,U.Z)(1),";align-items:center;width:fit-content;"),le=(0,O.Z)("div",{target:"e1f488222",label:"Title"})(re.Z,";"),ce=(0,O.Z)("div",{target:"e1f488223",label:"ScoreWrapper"})({name:"x1sij0",styles:"display:flex;align-items:baseline;"}),ue=(0,O.Z)("span",{target:"e1f488224",label:"Score"})({name:"1i9r7pg",styles:"font-size:32px;line-height:1;"}),pe=(0,O.Z)("span",{target:"e1f488225",label:"Trend"})("color:",ie,";margin-left:",(0,U.Z)(1),";line-height:1;",re.Z,";");const de=oe;var he=r("./app/utils/discover/fields.tsx"),fe=r("./app/utils/getPeriod.tsx"),ge=r("./app/views/performance/data.tsx"),ve=r("./app/components/modals/featureTourModal.tsx"),me=r("./app/utils/analytics.tsx"),ye=r("./app/views/performance/onboarding.tsx"),be="https://docs.sentry.io/performance-monitoring/getting-started/";function Ze(e){var t=e.organization;return(0,ne.tZ)(o.Z,{hookName:"feature-disabled:project-performance-score-card",features:["performance-view"],organization:t},(0,ne.tZ)(je,{gap:1},(0,ne.tZ)(T.ZP,{size:"small",priority:"primary",external:!0,href:be},(0,s.t)("Start Setup")),(0,ne.tZ)(ve.ZP,{steps:ye.A,onAdvance:function(e,r){(0,me.ec)({eventKey:"project_detail.performance_tour.advance",eventName:"Project Detail: Performance Tour Advance",organization_id:parseInt(t.id,10),step:e,duration:r})},onCloseModal:function(e,r){(0,me.ec)({eventKey:"project_detail.performance_tour.close",eventName:"Project Detail: Performance Tour Close",organization_id:parseInt(t.id,10),step:e,duration:r})},doneText:(0,s.t)("Start Setup"),doneUrl:be},(function(e){var t=e.showModal;return(0,ne.tZ)(T.ZP,{size:"small",onClick:t},(0,s.t)("Get a tour"))}))))}Ze.displayName="MissingPerformanceButtons";var je=(0,O.Z)(D.Z,{target:"enmztnv0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const Se=Ze;var xe=r("./app/views/projectDetail/utils.tsx");function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ke=function(e){S()(i,e);var t,r,o=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=k()(t);if(r){var o=k()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return P()(this,e)});function i(){return y()(this,i),o.apply(this,arguments)}return Z()(i,[{key:"getDefaultState",value:function(){return ze(ze({},V()(k()(i.prototype),"getDefaultState",this).call(this)),{},{currentApdex:null,previousApdex:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasTransactions;if(!this.hasFeature()||!n||!o)return[];var i=r.projects,s=r.environments,a=r.datetime,l=a.period,c={environment:s,project:i.map((function(e){return String(e)})),field:["apdex(".concat(t.apdexThreshold,")")],query:"event.type:transaction count():>0"},u=[["currentApdex","/organizations/".concat(t.slug,"/eventsv2/"),{query:ze(ze({},c),(0,K.Q)(a))}]];if((0,xe.D)(a)){var p=(0,$.s)((0,fe.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod).start,d=(0,$.s)((0,fe.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!1}).statsPeriod).start;u.push(["previousApdex","/organizations/".concat(t.slug,"/eventsv2/"),{query:ze(ze({},c),{},{start:p,end:d})}])}return u}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized,o=t.hasTransactions;e.selection===r&&e.hasTransactions===o||!n||this.remountComponent()}},{key:"hasFeature",value:function(){return this.props.organization.features.includes("performance-view")}},{key:"cardTitle",get:function(){return(0,s.t)("Apdex")}},{key:"cardHelp",get:function(){var e=(0,ge.$r)(this.props.organization,ge.V$.APDEX);return this.trend?e+(0,s.t)(" This shows how it has changed since the last period."):e}},{key:"currentApdex",get:function(){var e,t=this.props.organization,r=this.state.currentApdex,n=null==r||null===(e=r.data[0])||void 0===e?void 0:e[(0,he.LY)("apdex(".concat(t.apdexThreshold,")"))];return void 0===n?void 0:Number(n)}},{key:"previousApdex",get:function(){var e,t=this.props.organization,r=this.state.previousApdex,n=null==r||null===(e=r.data[0])||void 0===e?void 0:e[(0,he.LY)("apdex(".concat(t.apdexThreshold,")"))];return void 0===n?void 0:Number(n)}},{key:"trend",get:function(){return this.currentApdex&&this.previousApdex?Y()(this.currentApdex-this.previousApdex,3):null}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:(0,ne.tZ)(Se,{organization:e})})}},{key:"renderScore",value:function(){return(0,L.ri)(this.currentApdex)?(0,ne.tZ)(X.Z,{value:this.currentApdex}):"—"}},{key:"renderTrend",value:function(){return(0,L.ri)(this.currentApdex)&&(0,L.ri)(this.trend)?(0,ne.tZ)(n.Fragment,null,this.trend>=0?(0,ne.tZ)(N.CC,{direction:"up",size:"xs"}):(0,ne.tZ)(N.CC,{direction:"down",size:"xs"}),(0,ne.tZ)(X.Z,{value:Math.abs(this.trend)})):null}},{key:"renderBody",value:function(){var e=this.props.hasTransactions;return this.hasFeature()&&!1!==e?(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus}):this.renderMissingFeatureCard()}}]),i}(J.Z);var Oe=r("./app/components/charts/utils.tsx"),we=r("./app/constants/index.tsx"),Re=r("./app/utils/formatters.tsx"),Te=r("./app/views/releases/utils/index.tsx"),De=r("./app/views/releases/utils/sessionTerm.tsx"),Ce=r("./app/views/releases/list/releaseLanding.tsx"),Ae="https://docs.sentry.io/product/releases/",Ie="https://docs.sentry.io/product/releases/health/";function qe(e){var t=e.organization,r=e.health,n=e.projectId;return(0,ne.tZ)(_e,{gap:1},(0,ne.tZ)(T.ZP,{size:"small",priority:"primary",external:!0,href:r?Ie:Ae},(0,s.t)("Start Setup")),!r&&(0,ne.tZ)(ve.ZP,{steps:Ce.J,onAdvance:function(e,r){(0,me.ec)({eventKey:"project_detail.releases_tour.advance",eventName:"Project Detail: Releases Tour Advance",organization_id:parseInt(t.id,10),project_id:n&&parseInt(n,10),step:e,duration:r})},onCloseModal:function(e,r){(0,me.ec)({eventKey:"project_detail.releases_tour.close",eventName:"Project Detail: Releases Tour Close",organization_id:parseInt(t.id,10),project_id:n&&parseInt(n,10),step:e,duration:r})},doneText:(0,s.t)("Start Setup"),doneUrl:r?Ie:Ae},(function(e){var t=e.showModal;return(0,ne.tZ)(T.ZP,{size:"small",onClick:t},(0,s.t)("Get a tour"))})))}qe.displayName="MissingReleasesButtons";var _e=(0,O.Z)(D.Z,{target:"e4jdnlq0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const Be=qe;function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Le=function(e){S()(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=k()(t);if(r){var o=k()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return P()(this,e)});function o(){return y()(this,o),n.apply(this,arguments)}return Z()(o,[{key:"getDefaultState",value:function(){return Ne(Ne({},V()(k()(o.prototype),"getDefaultState",this).call(this)),{},{currentSessions:null,previousSessions:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasSessions;if(!n||!o)return[];var i=r.projects,s=r.environments,a=r.datetime,l=a.period,c={environment:s,project:i[0],field:"sum(session)",groupBy:"session.status",interval:(0,Oe.Nm)(a)>=1440?"1d":"1h"},u=[["currentSessions","/organizations/".concat(t.slug,"/sessions/"),{query:Ne(Ne({},c),(0,K.Q)(a))}]];if((0,xe.D)(a)){var p=(0,fe.X)({period:l,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod;u.push(["previousSessions","/organizations/".concat(t.slug,"/sessions/"),{query:Ne(Ne({},c),{},{statsPeriodStart:p,statsPeriodEnd:null!=l?l:we.GY})}])}return u}},{key:"cardTitle",get:function(){return(0,s.t)("Crash Free Sessions")}},{key:"cardHelp",get:function(){return this.trend?(0,s.t)("The percentage of crash free sessions and how it has changed since the last period."):(0,De.RE)(De._k.STABILITY,null)}},{key:"score",get:function(){var e=this.state.currentSessions;return this.calculateCrashFree(e)}},{key:"trend",get:function(){var e=this.state.previousSessions,t=this.calculateCrashFree(e);if((0,L.ri)(this.score)&&(0,L.ri)(t))return Y()(this.score-t,3)}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized,o=t.hasSessions;e.selection===r&&e.hasSessions===o||!n||this.remountComponent()}},{key:"calculateCrashFree",value:function(e){var t;if(e){var r=e.groups.reduce((function(e,t){return e+t.totals["sum(session)"]}),0),n=null===(t=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===t?void 0:t.totals["sum(session)"];if(0!==r&&(0,L.ri)(r)&&(0,L.ri)(n)){var o=(0,L.aQ)(n,r);return(0,Te.Mf)(100-o)}}}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:(0,ne.tZ)(Be,{organization:e,health:!0})})}},{key:"renderScore",value:function(){return this.state.loading||!(0,L.ri)(this.score)?"—":(0,Te.zB)(this.score)}},{key:"renderTrend",value:function(){return!this.state.loading&&(0,L.ri)(this.score)&&(0,L.ri)(this.trend)?(0,ne.tZ)("div",null,this.trend>=0?(0,ne.tZ)(N.CC,{direction:"up",size:"xs"}):(0,ne.tZ)(N.CC,{direction:"down",size:"xs"}),"".concat((0,Re.Du)(Math.abs(this.trend)),"%")):null}},{key:"renderBody",value:function(){return!1===this.props.hasSessions?this.renderMissingFeatureCard():(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus})}}]),o}(J.Z);var Fe=r("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),Me=r.n(Fe),He=r("./app/actionCreators/projects.tsx");function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Ge=function(e){S()(a,e);var t,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k()(r);if(o){var n=k()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P()(this,e)});function a(){return y()(this,a),i.apply(this,arguments)}return Z()(a,[{key:"getDefaultState",value:function(){return Ue(Ue({},V()(k()(a.prototype),"getDefaultState",this).call(this)),{},{currentReleases:null,previousReleases:null,noReleaseEver:!1})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.selection;if(!e.isProjectStabilized)return[];var n=r.projects,o=r.environments,i=r.datetime,s=i.period,a={environment:o,project:n[0]},l=[["currentReleases","/organizations/".concat(t.slug,"/releases/stats/"),{includeAllArgs:!0,method:"GET",query:Ue(Ue({},a),(0,K.Q)(i))}]];if((0,xe.D)(i)){var c=(0,$.s)((0,fe.X)({period:s,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod).start,u=(0,$.s)((0,fe.X)({period:s,start:void 0,end:void 0},{shouldDoublePeriod:!1}).statsPeriod).start;l.push(["previousReleases","/organizations/".concat(t.slug,"/releases/stats/"),{query:Ue(Ue({},a),{},{start:c,end:u})}])}return l}},{key:"onLoadAllEndpointsSuccess",value:(t=f()(d().mark((function e(){var t,r,n,o,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.currentReleases,n=t.previousReleases,o=this.props,i=o.organization,s=o.selection,o.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===[].concat(Me()(null!=r?r:[]),Me()(null!=n?n:[])).length){e.next=7;break}return this.setState({noReleaseEver:!1}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,(0,He.mf)(this.api,i.slug,s.projects[0]);case 10:a=e.sent,this.setState({noReleaseEver:!a,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cardTitle",get:function(){return(0,s.t)("Number of Releases")}},{key:"cardHelp",get:function(){return this.trend?(0,s.t)("The number of releases for this project and how it has changed since the last period."):(0,s.t)("The number of releases for this project.")}},{key:"trend",get:function(){var e=this.state,t=e.currentReleases,r=e.previousReleases;return(0,L.ri)(t)&&(0,L.ri)(r)?t.length-r.length:null}},{key:"trendStatus",get:function(){if(this.trend)return this.trend>0?"good":"bad"}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.selection,n=t.isProjectStabilized;e.selection===r&&e.isProjectStabilized===n||this.remountComponent()}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderMissingFeatureCard",value:function(){var e=this.props.organization;return(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:(0,ne.tZ)(Be,{organization:e})})}},{key:"renderScore",value:function(){var e=this.state,t=e.currentReleases;return e.loading||!(0,L.ri)(t)?"—":1e3===t.length?"".concat(999,"+"):t.length}},{key:"renderTrend",value:function(){var e=this.state,t=e.loading,r=e.currentReleases;return t||!(0,L.ri)(this.trend)||1e3===(null==r?void 0:r.length)?null:(0,ne.tZ)(n.Fragment,null,this.trend>=0?(0,ne.tZ)(N.CC,{direction:"up",size:"xs"}):(0,ne.tZ)(N.CC,{direction:"down",size:"xs"}),Math.abs(this.trend))}},{key:"renderBody",value:function(){return this.state.noReleaseEver?this.renderMissingFeatureCard():(0,ne.tZ)(de,{title:this.cardTitle,help:this.cardHelp,score:this.renderScore(),trend:this.renderTrend(),trendStatus:this.trendStatus})}}]),a}(J.Z);function Ve(e){var t=e.organization,r=e.selection,n=e.isProjectStabilized,o=e.hasSessions,i=e.hasTransactions;return(0,ne.tZ)(Qe,null,(0,ne.tZ)(Le,{organization:t,selection:r,isProjectStabilized:n,hasSessions:o}),(0,ne.tZ)(Ge,{organization:t,selection:r,isProjectStabilized:n}),(0,ne.tZ)(ke,{organization:t,selection:r,isProjectStabilized:n,hasTransactions:i}))}Ve.displayName="ProjectScoreCards";var Qe=(0,O.Z)("div",{target:"ejtb3ti0",label:"CardWrapper"})("display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-column-gap:",(0,U.Z)(2),";@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr;grid-template-rows:repeat(3,1fr);}");const Ye=Ve;var Je=r("./app/views/projectDetail/projectCharts.tsx"),Xe=r("../../../../node_modules/lodash/pick.js"),Ke=r.n(Xe),$e=r("./app/components/charts/styles.tsx"),et=r("./app/components/issues/groupList.tsx"),tt=r("./app/constants/globalSelectionHeader.tsx"),rt=r("./app/utils/queryString.tsx"),nt=r("./app/views/issueList/noGroupsHandler/index.tsx");function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e){var t=e.organization,r=e.location,o=e.projectId,i=e.api,a="/organizations/".concat(t.slug,"/issues/"),l="is:unresolved error.unhandled:true",c=it(it({limit:5},(0,K.Q)(Ke()(r.query,[].concat(Me()(Object.values(tt.nF)),["cursor"])))),{},{query:l,sort:"freq"}),u={pathname:a,query:c};return(0,ne.tZ)(n.Fragment,null,(0,ne.tZ)(at,null,(0,ne.tZ)($e.OT,null,(0,s.t)("Frequent Unhandled Issues")),(0,ne.tZ)(T.ZP,{"data-test-id":"issues-open",size:"small",to:u,onClick:function(){(0,me.ec)({eventKey:"project_detail.open_issues",eventName:"Project Detail: Open issues from project detail",organization_id:parseInt(t.id,10)})}},(0,s.t)("Open in Issues"))),(0,ne.tZ)(lt,null,(0,ne.tZ)(et.Z,{orgId:t.slug,endpointPath:a,queryParams:c,query:"",canSelectGroups:!1,renderEmptyMessage:function(){var e=r.query.start?null:we.wh[(0,rt.ro)(r.query.statsPeriod,we.GY)],n=e?e.toLowerCase():(0,s.t)("given timeframe");return(0,ne.tZ)(ee.s_,null,(0,ne.tZ)(ee.N,null,(0,ne.tZ)(nt.Z,{api:i,organization:t,query:l,selectedProjectIds:[o],groupIds:[],emptyMessage:(0,s._N)("No unhandled issues for the [timePeriod].",{timePeriod:n})})))},withChart:!1,withPagination:!0})))}st.displayName="ProjectIssues";var at=(0,O.Z)("div",{target:"e2wsoa40",label:"ControlsWrapper"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,U.Z)(1),";"),lt=(0,O.Z)("div",{target:"e2wsoa41",label:"TableWrapper"})("margin-bottom:",(0,U.Z)(4),";",ee.s_,"{margin-bottom:-",(0,U.Z)(1),";}");const ct=st;var ut=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),pt=r("./app/components/emptyStateWarning.tsx"),dt=r("./app/components/links/link.tsx"),ht=r("./app/components/placeholder.tsx"),ft=r("./app/components/timeSince.tsx"),gt=r("./app/views/alerts/types.tsx");function vt(e){var t=e.organization,r=e.projectSlug;return(0,ne.tZ)(mt,{gap:1},(0,ne.tZ)(C.Z,{organization:t,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"project_detail",projectSlug:r,hideIcon:!0},(0,s.t)("Create Alert")),(0,ne.tZ)(T.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/alerts-notifications/metric-alerts/"},(0,s.t)("Learn More")))}vt.displayName="MissingAlertsButtons";var mt=(0,O.Z)(D.Z,{target:"e1gvj5vo0",label:"StyledButtonBar"})({name:"l44j9w",styles:"grid-template-columns:minmax(auto,max-content) minmax(auto,max-content);"});const yt=vt;var bt=r("./app/components/globalSelectionLink.tsx"),Zt=(0,O.Z)("section",{target:"e2gf9iq0",label:"SidebarSection"})("margin-bottom:",(0,U.Z)(2),";",$e.OT,"{line-height:1;}"),jt=(0,O.Z)("div",{target:"e2gf9iq1",label:"SectionHeadingWrapper"})({name:"69i1ev",styles:"display:flex;justify-content:space-between;align-items:center;"}),St=(0,O.Z)(bt.Z,{target:"e2gf9iq2",label:"SectionHeadingLink"})({name:"k008qs",styles:"display:flex;"});function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zt="172px",kt=function(e){S()(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k()(r);if(n){var o=k()(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return P()(this,e)});function i(){var e;y()(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).renderAlertRow=function(t){var r=e.props,n=r.organization,o=r.theme,i=t.status,a=t.id,l=t.identifier,c=t.title,u=t.dateClosed,p=t.dateStarted,d=i===gt.vt.CLOSED,h=i===gt.vt.WARNING,f=d?o.green300:h?o.yellow300:o.red300,g=d?N.DL:h?N.FC:N.zC;return(0,ne.tZ)(Ot,{to:"/organizations/".concat(n.slug,"/alerts/").concat(l,"/"),key:a},(0,ne.tZ)(wt,{color:f,icon:g},(0,ne.tZ)(Rt,null,(0,ne.tZ)(g,{color:"white"}))),(0,ne.tZ)(Tt,null,(0,ne.tZ)(Dt,null,c),(0,ne.tZ)(Ct,{color:f},d?(0,s._N)("Resolved [date]",{date:u?(0,ne.tZ)(ft.Z,{date:u}):null}):(0,s._N)("Triggered [date]",{date:(0,ne.tZ)(ft.Z,{date:p})}))))},e}return Z()(i,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.location,o=r.isProjectStabilized;return!(this.state===t&&!(0,xe.W)(n,e.location)&&o===e.isProjectStabilized)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.location,n=t.isProjectStabilized;((0,xe.W)(e.location,r)||e.isProjectStabilized!==n)&&this.remountComponent()}},{key:"getEndpoints",value:function(){var e=this.props,t=e.location,r=e.organization;if(!e.isProjectStabilized)return[];var n=Pt(Pt({},Ke()(t.query,Object.values(tt.nF))),{},{per_page:3});return[["unresolvedAlerts","/organizations/".concat(r.slug,"/incidents/"),{query:Pt(Pt({},n),{},{status:"open"})}],["resolvedAlerts","/organizations/".concat(r.slug,"/incidents/"),{query:Pt(Pt({},n),{},{status:"closed"})}]]}},{key:"onLoadAllEndpointsSuccess",value:(t=f()(d().mark((function e(){var t,r,n,o,i,s,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.unresolvedAlerts,n=t.resolvedAlerts,o=this.props,i=o.location,s=o.organization,o.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===[].concat(Me()(null!=r?r:[]),Me()(null!=n?n:[])).length){e.next=7;break}return this.setState({hasAlertRule:!0}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,this.api.requestPromise("/organizations/".concat(s.slug,"/alert-rules/"),{method:"GET",query:Pt(Pt({},Ke()(i.query,Me()(Object.values(tt.nF)))),{},{per_page:1})});case 10:a=e.sent,this.setState({hasAlertRule:a.length>0,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"alertsLink",get:function(){var e=this.props.organization;return{pathname:"/organizations/".concat(e.slug,"/alerts/"),query:{statsPeriod:void 0,start:void 0,end:void 0,utc:void 0}}}},{key:"renderInnerBody",value:function(){var e=this.props,t=e.organization,r=e.projectSlug,n=e.isProjectStabilized,o=this.state,i=o.loading,a=o.unresolvedAlerts,l=o.resolvedAlerts,c=o.hasAlertRule,u=[].concat(Me()(null!=a?a:[]),Me()(null!=l?l:[])),p=0===u.length&&void 0===c;return i||p||!n?(0,ne.tZ)(ht.Z,{height:zt}):c?0===u.length?(0,ne.tZ)(At,{small:!0},(0,s.t)("No alerts found")):u.slice(0,3).map(this.renderAlertRow):(0,ne.tZ)(yt,{organization:t,projectSlug:r})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){return(0,ne.tZ)(Zt,null,(0,ne.tZ)(jt,null,(0,ne.tZ)($e.OT,null,(0,s.t)("Latest Alerts")),(0,ne.tZ)(St,{to:this.alertsLink},(0,ne.tZ)(N.V$,null))),(0,ne.tZ)("div",null,this.renderInnerBody()))}}]),i}(J.Z),Ot=(0,O.Z)(dt.Z,{target:"e1bsap10",label:"AlertRowLink"})("display:flex;align-items:center;height:40px;margin-bottom:",(0,U.Z)(3),";margin-left:",(0,U.Z)(.5),";&,&:hover,&:focus{color:inherit;}&:first-child{margin-top:",(0,U.Z)(1),";}"),wt=(0,O.Z)("div",{target:"e1bsap11",label:"AlertBadge"})("display:flex;align-items:center;justify-content:center;flex-shrink:0;line-height:",(function(e){return e.icon===N.FC?void 0:1}),";&:before{content:'';width:30px;height:30px;border-radius:",(function(e){return e.theme.borderRadius}),";background-color:",(function(e){return e.color}),";transform:rotate(45deg);}"),Rt=(0,O.Z)("div",{target:"e1bsap12",label:"AlertIconWrapper"})({name:"12efcmn",styles:"position:absolute;"}),Tt=(0,O.Z)("div",{target:"e1bsap13",label:"AlertDetails"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-left:",(0,U.Z)(2),";",re.Z),Dt=(0,O.Z)("div",{target:"e1bsap14",label:"AlertTitle"})({name:"k2hmek",styles:"font-weight:400;overflow:hidden;text-overflow:ellipsis;"}),Ct=(0,O.Z)("span",{target:"e1bsap15",label:"AlertDate"})("color:",(function(e){return e.color}),";"),At=(0,O.Z)(pt.Z,{target:"e1bsap16",label:"StyledEmptyStateWarning"})("height:",zt,";justify-content:center;");const It=(0,ut.Zz)(kt);var qt=r("./app/components/dateTime.tsx"),_t=r("./app/components/version.tsx");function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt="160px",Lt=function(e){S()(a,e);var t,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k()(r);if(o){var n=k()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P()(this,e)});function a(){var e;y()(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=i.call.apply(i,[this].concat(r))).handleTourAdvance=function(t){var r=e.props,n=r.organization,o=r.projectId;(0,me.co)("releases.landing_card_clicked",{org_id:parseInt(n.id,10),project_id:o&&parseInt(o,10),step_id:t,step_title:Ce.J[t].title})},e.renderReleaseRow=function(t){var r=e.props.projectId,o=t.lastDeploy,i=t.dateCreated;return(0,ne.tZ)(n.Fragment,{key:t.version},(0,ne.tZ)(qt.Z,{date:(null==o?void 0:o.dateFinished)||i,seconds:!1}),(0,ne.tZ)(E.Z,null,(0,ne.tZ)(Mt,{version:t.version,tooltipRawVersion:!0,projectId:r})))},e}return Z()(a,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.location,o=r.isProjectStabilized;return!(this.state===t&&!(0,xe.W)(n,e.location)&&o===e.isProjectStabilized)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.location,n=t.isProjectStabilized;((0,xe.W)(e.location,r)||e.isProjectStabilized!==n)&&this.remountComponent()}},{key:"getEndpoints",value:function(){var e=this.props,t=e.location,r=e.organization,n=e.projectSlug;if(!e.isProjectStabilized)return[];var o=Et(Et({},Ke()(t.query,Object.values(tt.nF))),{},{per_page:5});return[["releases","/projects/".concat(r.slug,"/").concat(n,"/releases/"),{query:o}]]}},{key:"onLoadAllEndpointsSuccess",value:(t=f()(d().mark((function e(){var t,r,n,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.releases,r=this.props,n=r.organization,o=r.projectId,r.isProjectStabilized){e.next=4;break}return e.abrupt("return");case 4:if(0===(null!=t?t:[]).length&&o){e.next=7;break}return this.setState({hasOlderReleases:!0}),e.abrupt("return");case 7:return this.setState({loading:!0}),e.next=10,(0,He.mf)(this.api,n.slug,o);case 10:i=e.sent,this.setState({hasOlderReleases:i,loading:!1});case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"releasesLink",get:function(){var e=this.props.organization;return{pathname:"/organizations/".concat(e.slug,"/releases/"),query:{statsPeriod:void 0,start:void 0,end:void 0,utc:void 0}}}},{key:"renderInnerBody",value:function(){var e=this.props,t=e.organization,r=e.projectId,n=e.isProjectStabilized,o=this.state,i=o.loading,a=o.releases,l=o.hasOlderReleases,c=!(null!=a?a:[]).length&&void 0===l;return i||c||!n?(0,ne.tZ)(ht.Z,{height:Nt}):l?a&&0!==a.length?(0,ne.tZ)(Ft,null,a.map(this.renderReleaseRow)):(0,ne.tZ)(Ht,{small:!0},(0,s.t)("No releases found")):(0,ne.tZ)(Be,{organization:t,projectId:r})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){return(0,ne.tZ)(Zt,null,(0,ne.tZ)(jt,null,(0,ne.tZ)($e.OT,null,(0,s.t)("Latest Releases")),(0,ne.tZ)(St,{to:this.releasesLink},(0,ne.tZ)(N.V$,null))),(0,ne.tZ)("div",null,this.renderInnerBody()))}}]),a}(J.Z),Ft=(0,O.Z)("div",{target:"e1yz6gpb0",label:"ReleasesTable"})("display:grid;font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;grid-template-columns:1fr auto;margin-bottom:",(0,U.Z)(2),";& > *{padding:",(0,U.Z)(.5)," ",(0,U.Z)(1),";height:32px;}& > *:nth-child(2n + 2){text-align:right;}& > *:nth-child(4n + 1),& > *:nth-child(4n + 2){background-color:",(function(e){return e.theme.rowBackground}),";}"),Mt=(0,O.Z)(_t.Z,{target:"e1yz6gpb1",label:"StyledVersion"})(re.Z," line-height:1.6;"),Ht=(0,O.Z)(pt.Z,{target:"e1yz6gpb2",label:"StyledEmptyStateWarning"})("height:",Nt,";justify-content:center;");const Wt=Lt;var Ut=r("./app/components/tooltip.tsx"),Gt=r("./app/utils/tokenizeSearch.tsx"),Vt=r("./app/views/performance/landing.tsx"),Qt=r("./app/views/performance/trends/utils.tsx"),Yt=r("./app/views/performance/utils.tsx");function Jt(e){var t,r,n=e.organization,o=e.project,i=e.location,a=[{title:(0,s.t)("User Feedback"),to:{pathname:"/organizations/".concat(n.slug,"/user-feedback/"),query:{project:null==o?void 0:o.id}}},{title:(0,s.t)("Most Improved/Regressed Transactions"),to:(t=(0,rt.ro)(i.query.query),r=(0,Gt.aI)(t||""),r.setTagValues("tpm()",[">0.01"]),r.setTagValues("transaction.duration",[">0","<".concat(Qt.bg)]),{pathname:(0,Yt.de)(n),query:{project:null==o?void 0:o.id,cursor:void 0,query:(0,Gt.gZ)(r),view:Vt.FilterViews.TRENDS}}),disabled:!n.features.includes("performance-view")}];return(0,ne.tZ)(Zt,null,(0,ne.tZ)($e.OT,null,(0,s.t)("Quick Links")),a.sort((function(e,t){return Number(!!e.disabled)-Number(!!t.disabled)})).map((function(e){var t=e.title,r=e.to,n=e.disabled;return(0,ne.tZ)("div",{key:t},(0,ne.tZ)(Ut.Z,{title:(0,s.t)("You don't have access to this feature"),disabled:!n},(0,ne.tZ)(Xt,{to:r,disabled:n},(0,ne.tZ)(N.JH,null),(0,ne.tZ)(Kt,null,t))))})))}Jt.displayName="ProjectQuickLinks";var Xt=(0,O.Z)((function(e){return e.disabled?(0,ne.tZ)("span",{className:e.className},e.children):(0,ne.tZ)(bt.Z,e)}),{target:"eam62960",label:"QuickLink"})("margin-bottom:",(0,U.Z)(1),";display:grid;align-items:center;gap:",(0,U.Z)(1),";grid-template-columns:auto 1fr;",(function(e){return e.disabled&&"\n    color: ".concat(e.theme.gray200,";\n    cursor: not-allowed;\n  ")})),Kt=(0,O.Z)("span",{target:"eam62961",label:"QuickLinkText"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";",re.Z);const $t=Jt;var er=r("./app/components/collapsible.tsx");function tr(e){var t=e.organization,r=e.project,n=t.access.includes("project:write"),o="/settings/".concat(t.slug,"/projects/").concat(null==r?void 0:r.slug,"/teams/");return(0,ne.tZ)(rr,null,(0,ne.tZ)(jt,null,(0,ne.tZ)($e.OT,null,(0,s.t)("Team Access")),(0,ne.tZ)(St,{to:o},(0,ne.tZ)(N.V$,null))),(0,ne.tZ)("div",null,r?0===r.teams.length?(0,ne.tZ)(T.ZP,{to:o,disabled:!n,title:n?void 0:(0,s.t)("You do not have permission to do this"),priority:"primary",size:"small"},(0,s.t)("Assign Team")):(0,ne.tZ)(er.Z,{expandButton:function(e){var t=e.onExpand,r=e.numberOfCollapsedItems;return(0,ne.tZ)(T.ZP,{priority:"link",onClick:t},(0,s.tn)("Show %s collapsed team","Show %s collapsed teams",r))}},r.teams.sort((function(e,t){return e.slug.localeCompare(t.slug)})).map((function(e){return(0,ne.tZ)(nr,{to:"/settings/".concat(t.slug,"/teams/").concat(e.slug,"/"),key:e.slug},(0,ne.tZ)(I.Z,{team:e,hideAvatar:!0}))}))):(0,ne.tZ)(ht.Z,{height:"23px"})))}tr.displayName="ProjectTeamAccess";var rr=(0,O.Z)(Zt,{target:"e1r0e2mu0",label:"StyledSidebarSection"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";"),nr=(0,O.Z)(dt.Z,{target:"e1r0e2mu1",label:"StyledLink"})("display:block;margin-bottom:",(0,U.Z)(.5),";");const or=tr;function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){v()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ar=function(e){S()(u,e);var t,r,l,c=(r=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k()(r);if(l){var n=k()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P()(this,e)});function u(){var e;y()(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).handleProjectChange=function(t){var r=e.props,n=r.projects,o=r.router,i=r.location,s=r.organization,a=n.find((function(e){return e.id===String(t[0])}));null!=a&&a.id&&o.replace({pathname:"/organizations/".concat(s.slug,"/projects/").concat(a.slug,"/"),query:sr(sr({},i.query),{},{project:a.id,environment:void 0})})},e}return Z()(u,[{key:"getTitle",value:function(){var e=this.props.params;return(0,F.Z)((0,s.t)("Project %s",e.projectId),e.orgId,!1)}},{key:"componentDidMount",value:function(){this.syncProjectWithSlug(),this.props.location.query.project&&this.fetchSessionsExistence()}},{key:"componentDidUpdate",value:function(e){this.syncProjectWithSlug(),e.location.query.project!==this.props.location.query.project&&this.fetchSessionsExistence()}},{key:"project",get:function(){var e=this.props,t=e.projects,r=e.params;return t.find((function(e){return e.slug===r.projectId}))}},{key:"fetchSessionsExistence",value:(t=f()(d().mark((function e(){var t,r,n,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.organization,n=t.location,o=n.query.project){e.next=4;break}return e.abrupt("return");case 4:return this.setState({hasSessions:null}),e.next=7,this.api.requestPromise("/organizations/".concat(r.slug,"/sessions/"),{query:{project:o,field:"sum(session)",statsPeriod:"90d",interval:"1d"}});case 7:i=e.sent,this.setState({hasSessions:i.groups[0].totals["sum(session)"]>0});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"syncProjectWithSlug",value:function(){var e,t=this.props,r=t.router,n=t.location,o=null===(e=this.project)||void 0===e?void 0:e.id;o&&o!==n.query.project&&(0,w.id)([Number(o)],r)}},{key:"isProjectStabilized",value:function(){var e,t=this.props,r=t.selection,n=t.location,o=null===(e=this.project)||void 0===e?void 0:e.id;return(0,L.ri)(o)&&o===n.query.project&&o===String(r.projects[0])}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderProjectNotFound",value:function(){return(0,ne.tZ)(a.JH,null,(0,ne.tZ)(i.Z,{type:"error",icon:(0,ne.tZ)(N.FC,null)},(0,s.t)("This project could not be found.")))}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.params,i=e.location,a=e.router,l=e.loadingProjects,c=e.selection,u=this.project,p=this.state.hasSessions,d=t.features.includes("performance-view")&&(null==u?void 0:u.firstTransactionEvent),h=this.isProjectStabilized(),f=["chart1"];return(d||p)&&f.push("chart2"),l||u?(0,ne.tZ)(B.Z,{disableMultipleProjectSelection:!0,skipLoadLastUsed:!0,onUpdateProjects:this.handleProjectChange},(0,ne.tZ)(_.Z,{organization:t},(0,ne.tZ)(lr,null,(0,ne.tZ)(q.h4,null,(0,ne.tZ)(q.oB,null,(0,ne.tZ)(R.Z,{crumbs:[{to:"/organizations/".concat(r.orgId,"/projects/"),label:(0,s.t)("Projects")},{label:(0,s.t)("Project Details")}]}),(0,ne.tZ)(q.Dx,null,(0,ne.tZ)(E.Z,null,u&&(0,ne.tZ)(I.Z,{project:u,avatarSize:28,displayName:r.projectId,disableLink:!0})))),(0,ne.tZ)(q.kP,null,(0,ne.tZ)(D.Z,{gap:1},(0,ne.tZ)(T.ZP,{title:(0,s.t)("You’re seeing the new project details page because you’ve opted to be an early adopter of new features. Send us feedback via email."),href:"mailto:project-feedback@sentry.io?subject=Project Details Feedback"},(0,s.t)("Give Feedback")),(0,ne.tZ)(T.ZP,{to:null!=u&&u.id?"/organizations/".concat(r.orgId,"/issues/?project=").concat(u.id):"/".concat(r.orgId,"/").concat(r.projectId)},(0,s.t)("View All Issues")),(0,ne.tZ)(C.Z,{organization:t,projectSlug:r.projectId}),(0,ne.tZ)(T.ZP,{icon:(0,ne.tZ)(N.iC,null),label:(0,s.t)("Settings"),to:"/settings/".concat(r.orgId,"/projects/").concat(r.projectId,"/")})))),(0,ne.tZ)(q.uT,null,(0,ne.tZ)(cr,null),(0,ne.tZ)(q.or,null,(0,ne.tZ)(Ye,{organization:t,isProjectStabilized:h,selection:c,hasSessions:p,hasTransactions:d}),h&&(0,ne.tZ)(n.Fragment,null,f.map((function(e,r){return(0,ne.tZ)(Je.Z,{location:i,organization:t,router:a,key:"project-charts-".concat(e),chartId:e,chartIndex:r,projectId:null==u?void 0:u.id,hasSessions:p,hasTransactions:!!d,visibleCharts:f})})),(0,ne.tZ)(ct,{organization:t,location:i,projectId:c.projects[0],api:this.api}))),(0,ne.tZ)(q.MF,null,(0,ne.tZ)(or,{organization:t,project:u}),(0,ne.tZ)(o.Z,{features:["incidents"]},(0,ne.tZ)(It,{organization:t,projectSlug:r.projectId,location:i,isProjectStabilized:h})),(0,ne.tZ)(Wt,{organization:t,projectSlug:r.projectId,projectId:null==u?void 0:u.id,location:i,isProjectStabilized:h}),(0,ne.tZ)($t,{organization:t,project:u,location:i})))))):this.renderProjectNotFound()}}]),u}(W.Z),lr=(0,O.Z)(a.JH,{target:"e1fgo0qj0",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"}),cr=(0,O.Z)(A.Z,{target:"e1fgo0qj1",label:"StyledSdkUpdatesAlert"})("@media (min-width:",(function(e){return e.theme.breakpoints[1]}),"){margin-bottom:0;}");cr.defaultProps={Wrapper:function(e){return(0,ne.tZ)(q.or,u()({fullWidth:!0},e))}};const ur=(0,H.Z)((0,M.Z)(ar));function pr(e){return(0,ne.tZ)(o.Z,{features:["project-detail"],organization:e.organization,renderDisabled:function(){return(0,ne.tZ)(a.JH,null,(0,ne.tZ)(i.Z,{type:"warning"},(0,s.t)("You don't have access to this feature")))}},(0,ne.tZ)(ur,e))}pr.displayName="ProjectDetailContainer";const dr=(0,l.Z)(pr)}}]);
//# sourceMappingURL=ProjectDetail.js.map