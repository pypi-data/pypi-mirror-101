(self.webpackChunk=self.webpackChunk||[]).push([["ProjectGeneralSettings"],{"./app/data/forms/projectGeneralSettings.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{route:()=>d,fields:()=>h});var r=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),s=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/platformicons/build/index.js")),o=n("./app/data/platforms.tsx"),a=n("./app/locale.tsx"),i=n("./app/styles/space.tsx"),l=n("./app/utils.tsx"),c=n("./app/utils/getDynamicText.tsx"),u=n("./app/utils/slugify.tsx"),p=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),d="/settings/:orgId/projects/:projectId/",m=function(){for(var e=0,t=[];e<=720;)t.push(e),e+=e<12?1:e<24?3:e<36?6:e<48?12:24;return t}(),f=(0,a.t)("This option is enforced by your organization's settings and cannot be customized per-project."),h={slug:{name:"slug",type:"string",required:!0,label:(0,a.t)("Name"),placeholder:(0,a.t)("my-service-name"),help:(0,a.t)("A unique ID used to identify this project"),transformInput:u.Z,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,a.t)("You will be redirected to the new project slug after saving")},platform:{name:"platform",type:"select",deprecatedSelectControl:!1,label:(0,a.t)("Platform"),choices:function(){return o.Z.map((function(e){var t=e.id,n=e.name;return[t,(0,p.tZ)(g,{key:t},(0,p.tZ)(y,{platform:t}),n)]}))},help:(0,a.t)("The primary platform for this project")},subjectPrefix:{name:"subjectPrefix",type:"string",label:(0,a.t)("Subject Prefix"),placeholder:(0,a.t)("e.g. [my-org]"),help:(0,a.t)("Choose a custom prefix for emails from this project")},resolveAge:{name:"resolveAge",type:"range",allowedValues:m,label:(0,a.t)("Auto Resolve"),help:(0,a.t)("Automatically resolve an issue if it hasn't been seen for this amount of time"),formatLabel:function(e){return 0===(e=Number(e))?(0,a.t)("Disabled"):e>23&&e%24==0?(e/=24,(0,a.tn)("%s day","%s days",e)):(0,a.tn)("%s hour","%s hours",e)},saveOnBlur:!1,saveMessage:(0,a._N)("[Caution]: Enabling auto resolve will immediately resolve anything that has not been seen within this period of time. There is no undo!",{Caution:(0,p.tZ)("strong",null,"Caution")}),saveMessageAlertType:"warning"},allowedDomains:{name:"allowedDomains",type:"string",multiline:!0,autosize:!0,maxRows:10,rows:1,placeholder:(0,a.t)("https://example.com or example.com"),label:(0,a.t)("Allowed Domains"),help:(0,a.t)("Separate multiple entries with a newline"),getValue:function(e){return(0,l.Fl)(e)},setValue:function(e){return(0,l.PU)(e)}},scrapeJavaScript:{name:"scrapeJavaScript",type:"boolean",disabled:function(e){return!e.organization[e.name]},disabledReason:f,setValue:function(e,t){return t.organization&&t.organization[t.name]&&e},label:(0,a.t)("Enable JavaScript source fetching"),help:(0,a.t)("Allow Sentry to scrape missing JavaScript source context when possible")},securityToken:{name:"securityToken",type:"string",label:(0,a.t)("Security Token"),help:(0,a.t)('Outbound requests matching Allowed Domains will have the header "{token_header}: {token}" appended'),setValue:function(e){return(0,c.Z)({value:e,fixed:"__SECURITY_TOKEN__"})}},securityTokenHeader:{name:"securityTokenHeader",type:"string",placeholder:(0,a.t)("X-Sentry-Token"),label:(0,a.t)("Security Token Header"),help:(0,a.t)('Outbound requests matching Allowed Domains will have the header "{token_header}: {token}" appended')},verifySSL:{name:"verifySSL",type:"boolean",label:(0,a.t)("Verify TLS/SSL"),help:(0,a.t)("Outbound requests will verify TLS (sometimes known as SSL) connections")}},g=(0,r.Z)("div",{target:"eqzsp1o0",label:"PlatformWrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),y=(0,r.Z)(s.v,{target:"eqzsp1o1",label:"StyledPlatformIcon"})("margin-right:",(0,i.Z)(1),";")},"./app/utils/recreateRoute.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("../../../../node_modules/lodash/findLastIndex.js"),s=n.n(r),o=n("./app/utils/replaceRouterParams.tsx");function a(e,t){var n,r,a,i,l=t.routes,c=t.params,u=t.location,p=t.stepBack,d=l.map((function(e){return e.path||""}));"string"!=typeof e?(i=l.indexOf(e)+1,a=s()(d.slice(0,i),(function(e){return"/"===e[0]}))):a=s()(d,(function(e){return"/"===e[0]}));var m=d.slice(a,i);void 0!==p&&(m=m.slice(0,p));var f=null!==(n=null==u?void 0:u.search)&&void 0!==n?n:"",h=null!==(r=null==u?void 0:u.hash)&&void 0!==r?r:"",g="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(f).concat(h);return(0,o.Z)(g,c)}},"./app/utils/routeTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,s="".concat(e," - ").concat(t),o=r?"".concat(s," - ").concat(r):s;return n?"".concat(o," - Sentry"):o}},"./app/utils/slugify.tsx":(e,t,n)=>{"use strict";function r(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}n.d(t,{Z:()=>r})},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(i),c=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),m=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),f=n.n(m),h=n("./app/components/asyncComponent.tsx"),g=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var y=function(e){l()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return u()(this,e)});function o(){return s()(this,o),r.apply(this,arguments)}return a()(o,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,g.tZ)(f(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),o}(h.Z);y.displayName="AsyncView"},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(i),c=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(c),p=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(p),m=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(m),h=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),g=n("../../../../node_modules/react/index.js"),y=n("./app/styles/organization.tsx"),b=n("./app/styles/space.tsx"),v=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var j=function(e){u()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var s=f()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)});function o(){return a()(this,o),r.apply(this,arguments)}return l()(o,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,o=e.action,a=e.tabs,i=e.noTitleStyles,l=e.body,c=s()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),u=!r;return(0,v.tZ)("div",c,(0,v.tZ)(Z,{isNarrow:u},(0,v.tZ)(x,null,t&&(0,v.tZ)(P,null,t),n&&(0,v.tZ)(w,{tabs:a,styled:i},(0,v.tZ)(y.Gh,null,n),r&&(0,v.tZ)(S,null,r))),o&&(0,v.tZ)(_,{isNarrow:u},o)),l&&(0,v.tZ)(k,null,l),a&&(0,v.tZ)(R,null,a))}}]),o}(g.Component);j.displayName="UnstyledSettingsPageHeader",j.defaultProps={noTitleStyles:!1};var Z=(0,h.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),x=(0,h.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),w=(0,h.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,b.Z)(4)," ",(0,b.Z)(2)," ",(0,b.Z)(3)," 0;"),S=(0,h.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,b.Z)(1.5)," 0 0;"),P=(0,h.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,b.Z)(1),";"),_=(0,h.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,b.Z)(4)}),";"),T=(0,h.Z)(j,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,b.Z)(4),";"),k=(0,h.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,b.Z)(3),";"),R=(0,h.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const C=T},"./app/views/settings/project/permissionAlert.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),a=n.n(o),i=(n("../../../../node_modules/react/index.js"),n("./app/components/acl/access.tsx")),l=n("./app/components/alert.tsx"),c=n("./app/icons/index.tsx"),u=n("./app/locale.tsx"),p=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),d=function(e){var t=e.access,n=void 0===t?["project:write"]:t,r=a()(e,["access"]);return(0,p.tZ)(i.Z,{access:n},(function(e){return!e.hasAccess&&(0,p.tZ)(l.Z,s()({type:"warning",icon:(0,p.tZ)(c.FC,{size:"xs"})},r),(0,u.t)("These settings can only be edited by users with the organization owner, manager, or admin role."))}))};d.displayName="PermissionAlert";const m=d},"./app/views/settings/projectGeneralSettings.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(i),c=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(c),p=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(p),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),f=n.n(m),h=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),g=n.n(h),y=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-router/es/index.js")),b=n("../../../../node_modules/create-react-class/index.js"),v=n.n(b),j=n("../../../../node_modules/reflux/src/index.js"),Z=n.n(j),x=n("./app/actionCreators/projects.tsx"),w=n("./app/actions/projectActions.tsx"),S=n("./app/components/button.tsx"),P=n("./app/components/confirm.tsx"),_=n("./app/components/panels/index.tsx"),T=n("./app/data/forms/projectGeneralSettings.tsx"),k=n("./app/locale.tsx"),R=n("./app/stores/projectsStore.tsx"),C=n("./app/utils/handleXhrErrorResponse.tsx"),O=n("./app/utils/recreateRoute.tsx"),A=n("./app/utils/routeTitle.tsx"),z=n("./app/utils/withOrganization.tsx"),I=n("./app/views/asyncView.tsx"),N=n("./app/views/settings/components/forms/field/index.tsx"),q=n("./app/views/settings/components/forms/form.tsx"),D=n("./app/views/settings/components/forms/jsonForm.tsx"),B=n("./app/views/settings/components/forms/textField.tsx"),L=n("./app/views/settings/components/settingsPageHeader.tsx"),E=n("./app/views/settings/components/text/textBlock.tsx"),U=n("./app/views/settings/project/permissionAlert.tsx"),H=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){d()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=g()(t);if(n){var s=g()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return f()(this,e)});function o(){var e;l()(this,o);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=r.call.apply(r,[this].concat(n)))._form={},e.handleTransferFieldChange=function(t,n){e._form[t]=n},e.handleRemoveProject=function(){var t=e.props.params.orgId,n=e.state.data;n&&(0,x.rR)(e.api,t,n).then((function(){window.location.assign("/")}),(0,C.Z)("Unable to remove project"))},e.handleTransferProject=function(){var t=e.props.params.orgId,n=e.state.data;n&&("string"!=typeof e._form.email||e._form.email.length<1||(0,x.bL)(e.api,t,n,e._form.email).then((function(){window.location.assign("/")}),(0,C.Z)("Unable to transfer project")))},e.isProjectAdmin=function(){return new Set(e.props.organization.access).has("project:admin")},e}return u()(o,[{key:"getTitle",value:function(){var e=this.props.params.projectId;return(0,A.Z)((0,k.t)("Project Settings"),e,!1)}},{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["data","/projects/".concat(t,"/").concat(n,"/")]]}},{key:"renderRemoveProject",value:function(){var e=this.state.data,t=this.isProjectAdmin(),n=e.isInternal;return(0,H.tZ)(N.Z,{label:(0,k.t)("Remove Project"),help:(0,k._N)("Remove the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,H.tZ)("strong",null,e.slug),linebreak:(0,H.tZ)("br",null)})},!t&&(0,k.t)("You do not have the required permission to remove this project."),n&&(0,k.t)("This project cannot be removed. It is used internally by the Sentry server."),t&&!n&&(0,H.tZ)(P.Z,{onConfirm:this.handleRemoveProject,priority:"danger",confirmText:(0,k.t)("Remove project"),message:(0,H.tZ)("div",null,(0,H.tZ)(E.Z,null,(0,H.tZ)("strong",null,(0,k.t)("Removing this project is permanent and cannot be undone!"))),(0,H.tZ)(E.Z,null,(0,k.t)("This will also remove all associated event data.")))},(0,H.tZ)("div",null,(0,H.tZ)(S.ZP,{className:"ref-remove-project",type:"button",priority:"danger"},(0,k.t)("Remove Project")))))}},{key:"renderTransferProject",value:function(){var e=this,t=this.state.data,n=this.isProjectAdmin(),r=t.isInternal;return(0,H.tZ)(N.Z,{label:(0,k.t)("Transfer Project"),help:(0,k._N)("Transfer the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,H.tZ)("strong",null,t.slug),linebreak:(0,H.tZ)("br",null)})},!n&&(0,k.t)("You do not have the required permission to transfer this project."),r&&(0,k.t)("This project cannot be transferred. It is used internally by the Sentry server."),n&&!r&&(0,H.tZ)(P.Z,{onConfirm:this.handleTransferProject,priority:"danger",confirmText:(0,k.t)("Transfer project"),renderMessage:function(t){var n=t.confirm;return(0,H.tZ)("div",null,(0,H.tZ)(E.Z,null,(0,H.tZ)("strong",null,(0,k.t)("Transferring this project is permanent and cannot be undone!"))),(0,H.tZ)(E.Z,null,(0,k.t)("Please enter the email of an organization owner to whom you would like to transfer this project.")),(0,H.tZ)(_.s_,null,(0,H.tZ)(q.Z,{hideFooter:!0,onFieldChange:e.handleTransferFieldChange,onSubmit:function(e,t,r,s){s.stopPropagation(),n()}},(0,H.tZ)(B.Z,{name:"email",label:(0,k.t)("Organization Owner"),placeholder:"admin@example.com",required:!0,help:(0,k.t)("A request will be emailed to this address, asking the organization owner to accept the project transfer.")}))))}},(0,H.tZ)("div",null,(0,H.tZ)(S.ZP,{className:"ref-transfer-project",type:"button",priority:"danger"},(0,k.t)("Transfer Project")))))}},{key:"renderBody",value:function(){var e,t=this,n=this.props.organization,r=this.state.data,o=this.props.params,a=o.orgId,i=o.projectId,l="/projects/".concat(a,"/").concat(i,"/"),c=new Set(n.access),u={additionalFieldProps:{organization:n},features:new Set(n.features),access:c,disabled:!c.has("project:write")},p=r.teams.length?null===(e=r.teams)||void 0===e?void 0:e[0]:void 0;return(0,H.tZ)("div",null,(0,H.tZ)(L.Z,{title:(0,k.t)("Project Settings")}),(0,H.tZ)(U.Z,null),(0,H.tZ)(q.Z,{saveOnBlur:!0,allowUndo:!0,initialData:F(F({},r),{},{team:p}),apiMethod:"PUT",apiEndpoint:l,onSubmitSuccess:function(e){t.setState({data:e}),i!==e.slug&&((0,x.TA)(i,e.slug),t.props.onChangeSlug(e.slug)),w.Z.updateSuccess(e)}},(0,H.tZ)(D.Z,s()({},u,{title:(0,k.t)("Project Details"),fields:[T.fields.slug,T.fields.platform]})),(0,H.tZ)(D.Z,s()({},u,{title:(0,k.t)("Email"),fields:[T.fields.subjectPrefix]})),(0,H.tZ)(D.Z,s()({},u,{title:(0,k.t)("Event Settings"),fields:[T.fields.resolveAge]})),(0,H.tZ)(D.Z,s()({},u,{title:(0,k.t)("Client Security"),fields:[T.fields.allowedDomains,T.fields.scrapeJavaScript,T.fields.securityToken,T.fields.securityTokenHeader,T.fields.verifySSL],renderHeader:function(){return(0,H.tZ)(_.aU,{type:"info"},(0,H.tZ)(E.Z,{noMargin:!0},(0,k._N)("Configure origin URLs which Sentry should accept events from. This is used for communication with clients like [link].",{link:(0,H.tZ)("a",{href:"https://github.com/getsentry/sentry-javascript"},"sentry-javascript")})," ",(0,k._N)("This will restrict requests based on the [Origin] and [Referer] headers.",{Origin:(0,H.tZ)("code",null,"Origin"),Referer:(0,H.tZ)("code",null,"Referer")})))}}))),(0,H.tZ)(_.s_,null,(0,H.tZ)(_.V9,null,(0,k.t)("Project Administration")),this.renderRemoveProject(),this.renderTransferProject()))}}]),o}(I.Z),G=v()({displayName:"ProjectGeneralSettingsContainer",mixins:[Z().listenTo(R.Z,"onProjectsUpdate")],changedSlug:void 0,onProjectsUpdate:function(){this.changedSlug&&R.Z.getBySlug(this.changedSlug)&&y.browserHistory.replace((0,O.Z)("",F(F({},this.props),{},{params:F(F({},this.props.params),{},{projectId:this.changedSlug})})))},render:function(){var e=this;return(0,H.tZ)(M,s()({onChangeSlug:function(t){return e.changedSlug=t}},this.props))}});const W=(0,z.Z)(G)}}]);
//# sourceMappingURL=ProjectGeneralSettings.js.map