(self.webpackChunk=self.webpackChunk||[]).push([["SentryAppDetailedView"],{"./app/actionCreators/sentryAppInstallations.tsx":(t,e,n)=>{"use strict";n.d(e,{G:()=>o,W:()=>a});var r=n("./app/actionCreators/indicator.tsx"),s=n("./app/locale.tsx");function o(t,e,n){(0,r.E3)();var o=t.requestPromise("/organizations/".concat(e,"/sentry-app-installations/"),{method:"POST",data:{slug:n.slug}});return o.then((function(){return(0,r.B8)()}),(function(){return(0,r.Iw)((0,s.t)("Unable to install ".concat(n.name)))})),o}function a(t,e){(0,r.E3)();var n=t.requestPromise("/sentry-app-installations/".concat(e.uuid,"/"),{method:"DELETE"});return n.then((function(){(0,r.S9)((0,s.t)("".concat(e.app.slug," successfully uninstalled.")))}),(function(){return(0,r.B8)()})),n}},"./app/utils/consolidatedScopes.tsx":(t,e,n)=>{"use strict";n.d(e,{A:()=>_,m:()=>j});var r=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(i),u=n("../../../../node_modules/lodash/groupBy.js"),c=n.n(u),p=n("../../../../node_modules/lodash/invertBy.js"),d=n.n(p),f=n("../../../../node_modules/lodash/pick.js"),m=n.n(f);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={read:0,write:1,admin:2},b={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},v={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},w="project:releases",x=function(t){var e=t.split(":")[1];return h[e]},Z=function(t,e){return x(t)-x(e)};function j(t){var e,n=y({},v),r=a()(t);return t.includes(w)&&(n.Release="admin",r=t.filter((function(t){return t!==w}))),(e=r,Object.values(c()(e,(function(t){return t.split(":")[0]}))).map((function(t){return t.sort(Z)})).map((function(t){return t.pop()}))).forEach((function(t){if(t){var e=t.split(":"),r=s()(e,2),o=r[0],a=r[1];n[b[o]]=a}})),n}function _(t){var e=j(t),n=m()(d()(e),["read","write","admin"]);return y(y({},{read:[],write:[],admin:[]}),n)}},"./app/views/organizationIntegrations/sentryAppDetailedView.tsx":(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>$});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),l=n.n(i),u=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),c=n.n(u),p=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),m=n.n(f),g=n("../../../../node_modules/@babel/runtime/helpers/get.js"),y=n.n(g),h=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),b=n.n(h),v=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),w=n.n(v),x=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),Z=n.n(x),j=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),_=n("../../../../node_modules/react/index.js"),k=n("./app/actionCreators/indicator.tsx"),I=n("./app/actionCreators/modal.tsx"),A=n("./app/actionCreators/sentryAppInstallations.tsx"),C=n("./app/components/button.tsx"),O=n("./app/components/circleIndicator.tsx"),P=n("./app/components/confirm.tsx"),S=n("./app/icons/index.tsx"),z=n("./app/locale.tsx"),E=n("./app/styles/space.tsx"),R=n("./app/utils/consolidatedScopes.tsx"),B=n("./app/utils/integrationUtil.tsx"),U=n("./app/utils/queryString.tsx"),D=n("./app/utils/recordSentryAppInteraction.tsx"),T=n("./app/utils/withOrganization.tsx"),M=n("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),L=n("./app/views/settings/components/forms/textCopyInput.tsx"),N=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var q=function(t){b()(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Z()(e);if(n){var s=Z()(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return w()(this,t)});function s(){var t;d()(this,s);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n))).onCopy=c()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t.props.installationId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),t.handleContinue=function(){t.onCopy(),(0,k.S9)("Copied to clipboard"),setTimeout((function(){window.open("https://app.split.io/org/admin/integrations")}),2e3)},t}return m()(s,[{key:"render",value:function(){var t=this.props,e=t.installationId,n=t.closeModal;return(0,N.tZ)("div",null,(0,N.tZ)(W,null,"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."),(0,N.tZ)(W,null,(0,N.tZ)(L.Z,{onCopy:this.onCopy},e)),(0,N.tZ)(G,null,(0,N.tZ)(C.ZP,{size:"small",onClick:n},"Close"),(0,N.tZ)(C.ZP,{size:"small",priority:"primary",onClick:this.handleContinue},"Copy and Open Link")))}}]),s}(_.Component);q.displayName="SplitInstallationIdModal";var W=(0,j.Z)("div",{target:"e14h1mmf0",label:"ItemHolder"})({name:"eaeacs",styles:"margin:10px;"}),G=(0,j.Z)(W,{target:"e14h1mmf1",label:"ButtonHolder"})({name:"99h030",styles:"text-align:right;& button{margin:5px;}"});var V=function(t){b()(s,t);var e,n,r=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Z()(e);if(n){var s=Z()(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return w()(this,t)});function s(){var t;d()(this,s);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n))).tabs=["overview"],t.redirectUser=function(e){var n=t.props.organization,r=t.state.sentryApp,s={installationId:e.uuid,code:e.code,orgSlug:n.slug};if(r.redirectUrl){var o=(0,U.Yi)(r.redirectUrl,s);window.location.assign(o)}},t.handleInstall=c()(a().mark((function e(){var n,r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.organization,r=t.state.sentryApp,t.trackIntegrationEvent("integrations.installation_start",{integration_status:r.status}),e.next=5,(0,A.G)(t.api,n.slug,r);case 5:"installed"===(s=e.sent).status&&t.trackIntegrationEvent("integrations.installation_complete",{integration_status:r.status}),r.redirectUrl?t.redirectUser(s):((0,k.S9)((0,z.t)("".concat(r.slug," successfully installed."))),t.setState({appInstalls:[s].concat(l()(t.state.appInstalls))}),["split","split-dev","split-testing"].includes(r.slug)&&(0,I.openModal)((function(t){var e=t.closeModal;return(0,N.tZ)(q,{installationId:s.uuid,closeModal:e})})));case 8:case"end":return e.stop()}}),e)}))),t.handleUninstall=function(){var e=c()(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,A.W)(t.api,n);case 3:return t.trackIntegrationEvent("integrations.uninstall_completed",{integration_status:t.sentryApp.status}),r=t.state.appInstalls.filter((function(e){return e.app.slug!==t.sentryApp.slug})),e.abrupt("return",t.setState({appInstalls:r}));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,k.Iw)((0,z.t)("Unable to uninstall ".concat(t.sentryApp.name))));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.recordUninstallClicked=function(){var e=t.sentryApp;t.trackIntegrationEvent("integrations.uninstall_clicked",{integration_status:e.status})},t}return m()(s,[{key:"getEndpoints",value:function(){var t=this.props,e=t.organization,n=t.params.integrationSlug;return[["sentryApp","/sentry-apps/".concat(n,"/")],["featureData","/sentry-apps/".concat(n,"/features/")],["appInstalls","/organizations/".concat(e.slug,"/sentry-app-installations/")]]}},{key:"onLoadAllEndpointsSuccess",value:function(){var t=this.props,e=t.organization,n=t.params.integrationSlug,r=t.router;"internal"!==this.sentryApp.status?(y()(Z()(s.prototype),"onLoadAllEndpointsSuccess",this).call(this),(0,D.E)(n,"sentry_app_viewed")):r.push("/settings/".concat(e.slug,"/developer-settings/").concat(n,"/"))}},{key:"integrationType",get:function(){return"sentry_app"}},{key:"sentryApp",get:function(){return this.state.sentryApp}},{key:"description",get:function(){return this.state.sentryApp.overview||""}},{key:"author",get:function(){return this.sentryApp.author}},{key:"resourceLinks",get:function(){return"published"!==this.sentryApp.status?[]:[{title:"Documentation",url:"https://docs.sentry.io/product/integrations/".concat(this.integrationSlug,"/")}]}},{key:"permissions",get:function(){return(0,R.A)(this.sentryApp.scopes)}},{key:"installationStatus",get:function(){return(0,B.Az)(this.install)}},{key:"integrationName",get:function(){return this.sentryApp.name}},{key:"featureData",get:function(){return this.state.featureData}},{key:"install",get:function(){var t=this;return this.state.appInstalls.find((function(e){return e.app.slug===t.sentryApp.slug}))}},{key:"renderPermissions",value:function(){var t=this.permissions;return Object.keys(t).some((function(e){return t[e].length>0}))?(0,N.tZ)(F,null,(0,N.tZ)(J,null,"Permissions"),t.read.length>0&&(0,N.tZ)(Y,null,(0,N.tZ)(K,null),(0,N.tZ)(H,{key:"read"},(0,z._N)("[read] access to [resources] resources",{read:(0,N.tZ)("strong",null,"Read"),resources:t.read.join(", ")}))),t.write.length>0&&(0,N.tZ)(Y,null,(0,N.tZ)(K,null),(0,N.tZ)(H,{key:"write"},(0,z._N)("[read] and [write] access to [resources] resources",{read:(0,N.tZ)("strong",null,"Read"),write:(0,N.tZ)("strong",null,"Write"),resources:t.write.join(", ")}))),t.admin.length>0&&(0,N.tZ)(Y,null,(0,N.tZ)(K,null),(0,N.tZ)(H,{key:"admin"},(0,z._N)("[admin] access to [resources] resources",{admin:(0,N.tZ)("strong",null,"Admin"),resources:t.admin.join(", ")})))):null}},{key:"renderTopButton",value:function(t,e){var n=this,r=this.install;return r?(0,N.tZ)(P.Z,{disabled:!e,message:(0,z._N)("Are you sure you want to remove the [slug] installation?",{slug:this.integrationSlug}),onConfirm:function(){return n.handleUninstall(r)},onConfirming:this.recordUninstallClicked,priority:"danger"},(0,N.tZ)(X,{size:"small","data-test-id":"sentry-app-uninstall"},(0,N.tZ)(S.JZ,{isCircled:!0,style:{marginRight:(0,E.Z)(.75)}}),(0,z.t)("Uninstall"))):e?(0,N.tZ)(Q,{"data-test-id":"install-button",disabled:t,onClick:function(){return n.handleInstall()},priority:"primary",size:"small",style:{marginLeft:(0,E.Z)(1)}},(0,z.t)("Accept & Install")):this.renderRequestIntegrationButton()}},{key:"renderConfigurations",value:function(){return null}}]),s}(M.Z),H=(0,j.Z)("p",{target:"e1nw372o0",label:"Text"})({name:"1y1i75n",styles:"margin:0px 6px;"}),Y=(0,j.Z)("div",{target:"e1nw372o1",label:"Permission"})({name:"k008qs",styles:"display:flex;"}),F=(0,j.Z)("div",{target:"e1nw372o2",label:"PermissionWrapper"})("padding-bottom:",(0,E.Z)(2),";"),J=(0,j.Z)("p",{target:"e1nw372o3",label:"Title"})("margin-bottom:",(0,E.Z)(1),";font-weight:bold;"),K=(0,j.Z)((function(t){return(0,N.tZ)(O.Z,s()({size:7},t))}),{target:"e1nw372o4",label:"Indicator"})("margin-top:3px;color:",(function(t){return t.theme.success}),";"),Q=(0,j.Z)(C.ZP,{target:"e1nw372o5",label:"InstallButton"})("margin-left:",(0,E.Z)(1),";"),X=(0,j.Z)(C.ZP,{target:"e1nw372o6",label:"StyledUninstallButton"})("color:",(function(t){return t.theme.gray300}),";background:",(function(t){return t.theme.background}),";border:",(function(t){return"1px solid ".concat(t.theme.gray300)}),";box-sizing:border-box;box-shadow:0px 2px 1px rgba(0,0,0,0.08);border-radius:4px;");const $=(0,T.Z)(V)},"../../../../node_modules/lodash/_baseInverter.js":(t,e,n)=>{var r=n("../../../../node_modules/lodash/_baseForOwn.js");t.exports=function(t,e,n,s){return r(t,(function(t,r,o){e(s,n(t),r,o)})),s}},"../../../../node_modules/lodash/_createInverter.js":(t,e,n)=>{var r=n("../../../../node_modules/lodash/_baseInverter.js");t.exports=function(t,e){return function(n,s){return r(n,t,e(s),{})}}},"../../../../node_modules/lodash/invertBy.js":(t,e,n)=>{var r=n("../../../../node_modules/lodash/_baseIteratee.js"),s=n("../../../../node_modules/lodash/_createInverter.js"),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,l=s((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=i.call(e)),a.call(t,e)?t[e].push(n):t[e]=[n]}),r);t.exports=l}}]);
//# sourceMappingURL=SentryAppDetailedView.js.map