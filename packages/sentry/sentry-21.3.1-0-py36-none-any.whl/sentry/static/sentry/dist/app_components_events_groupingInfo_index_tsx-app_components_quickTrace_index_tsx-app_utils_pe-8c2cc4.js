(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_groupingInfo_index_tsx-app_components_quickTrace_index_tsx-app_utils_pe-8c2cc4","app_components_events_groupingInfo_index_tsx"],{"./app/components/events/groupingInfo/index.tsx":(t,e,n)=>{"use strict";n.d(e,{B:()=>Dt,Z:()=>It});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(s),c=n("../../../../node_modules/@babel/runtime/helpers/get.js"),l=n.n(c),p=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=n.n(f),m=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),v=n.n(m),h=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),y=n("../../../../node_modules/react/index.js"),b=n("./app/components/asyncComponent.tsx"),Z=n("./app/components/button.tsx"),x=n("./app/components/events/eventDataSection.tsx"),w=n("./app/components/loadingIndicator.tsx"),O=n("./app/locale.tsx"),j=n("./app/styles/space.tsx"),k=n("./app/utils/withOrganization.tsx"),_=n("./app/components/dropdownAutoComplete/index.tsx"),C=n("./app/components/dropdownButton.tsx"),S=n("./app/components/tooltip.tsx"),P=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(t){d()(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=v()(e);if(n){var o=v()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return g()(this,t)});function o(){return a()(this,o),r.apply(this,arguments)}return u()(o,[{key:"getDefaultState",value:function(){return D(D({},l()(v()(o.prototype),"getDefaultState",this).call(this)),{},{configs:[]})}},{key:"getEndpoints",value:function(){return[["configs","/grouping-configs/"]]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var t=this.props,e=t.configId,n=t.eventConfigId,r=t.onSelect,o=this.state.configs.map((function(t){var e=t.id,r=t.hidden;return{value:e,label:(0,P.tZ)(Dt,{isHidden:r,isActive:e===n},e)}}));return(0,P.tZ)(_.Z,{onSelect:r,items:o},(function(t){var r=t.isOpen;return(0,P.tZ)(S.Z,{title:(0,O.t)("Click here to experiment with other grouping configs")},(0,P.tZ)(I,{isOpen:r,size:"small"},(0,P.tZ)(Dt,{isActive:n===e},e)))}))}}]),o}(b.Z),I=(0,h.Z)(C.Z,{target:"e10t66ir0",label:"StyledDropdownButton"})({name:"1qd1og9",styles:"font-weight:inherit;"});const E=N;var A=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),z=n.n(A),q=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),R=n.n(q),G=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),L=n.n(G),V=n("../../../../node_modules/lodash/capitalize.js"),B=n.n(V),F=n("./app/components/buttonBar.tsx"),M=n("./app/components/events/interfaces/keyValueList/keyValueList.tsx"),Q=n("./app/components/questionTooltip.tsx"),H=n("./app/icons/index.tsx"),K=n("./app/styles/overflowEllipsis.tsx"),J=n("./app/types/index.tsx"),U=n("../../../../node_modules/lodash/isObject.js"),W=n.n(U);function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y(t){if(null==t||!t.contributes)return!0;var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t.values);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(W()(r)&&Y(r))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}function X(t,e){if(W()(t)){if(!t.contributes&&!t.hint&&0===t.values.length)return!1;if(!e&&!t.contributes)return!1}return!0}var tt=function(t){var e=t.component,n=t.showNonContributing;return(0,P.tZ)(y.Fragment,null,e.values.filter((function(t){return X(t,n)})).map((function(t,r){return(0,P.tZ)(ct,{key:r},W()(t)?(0,P.tZ)(ft,{component:t,showNonContributing:n}):(0,P.tZ)(lt,{valueType:e.name||e.id},"string"==typeof t||"number"==typeof t?t:JSON.stringify(t,null,2)))})))};tt.displayName="GroupingComponentChildren";const et=tt;var nt=function(t){d()(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=v()(e);if(n){var o=v()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return g()(this,t)});function o(){var t;a()(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=r.call.apply(r,[this].concat(n))).state={collapsed:!0},t}return u()(o,[{key:"render",value:function(){var t=this,e=this.props,n=e.items,r=e.maxVisibleItems,o=this.state.collapsed,i=n.length>r;return(0,P.tZ)(y.Fragment,null,n.map((function(e,a){return!o||a<r?(0,P.tZ)(ct,{isCollapsable:i,key:a},e):a===r?(0,P.tZ)(ct,{key:a},(0,P.tZ)(rt,{size:"small",priority:"link",icon:(0,P.tZ)(H.N_,{size:"8px"}),onClick:function(){return t.setState({collapsed:!1})}},(0,O._N)("show [numberOfFrames] similiar",{numberOfFrames:n.length-r}))):null})),!o&&n.length>r&&(0,P.tZ)(ct,null,(0,P.tZ)(rt,{size:"small",priority:"link",icon:(0,P.tZ)(H.JZ,{size:"8px"}),onClick:function(){return t.setState({collapsed:!0})}},(0,O._N)("collapse [numberOfFrames] similiar",{numberOfFrames:n.length-r}))))}}]),o}(y.Component);nt.displayName="GroupingComponentFrames",nt.defaultProps={maxVisibleItems:2};var rt=(0,h.Z)(Z.ZP,{target:"e85hq7x0",label:"ToggleCollapse"})("margin:",(0,j.Z)(.5)," 0;");const ot=nt;var it=function(t){var e,n=t.component,r=t.showNonContributing;return(0,P.tZ)(y.Fragment,null,(e=[],n.values.filter((function(t){return X(t,r)})).forEach((function(t){var n=t.values.filter((function(t){return X(t,r)})).map((function(t){return t.id})).sort((function(t,e){return t.localeCompare(e)})).join(""),o=e[e.length-1];(null==o?void 0:o.key)===n?o.data.push(t):e.push({key:n,data:[t]})})),e).map((function(t,e){return(0,P.tZ)(ot,{key:e,items:t.data.map((function(t,e){return(0,P.tZ)(ft,{key:e,component:t,showNonContributing:r})}))})})))};it.displayName="GroupingComponentStacktrace";const at=it;var st=function(t){var e=t.component,n=t.showNonContributing,r=function(t){return t.values.every((function(t){return!W()(t)}))}(e),o="stacktrace"===e.id?at:et;return(0,P.tZ)(pt,{isContributing:e.contributes},(0,P.tZ)("span",null,e.name||e.id,e.hint&&(0,P.tZ)(dt,null," (".concat(e.hint,")"))),(0,P.tZ)(ut,{isInline:r},(0,P.tZ)(o,{component:e,showNonContributing:n})))};st.displayName="GroupingComponent";var ut=(0,h.Z)("ul",{target:"eg7fssn0",label:"GroupingComponentList"})("padding:0;margin:0;list-style:none;&,& > li{display:",(function(t){return t.isInline?"inline":"block"}),";}"),ct=(0,h.Z)("li",{target:"eg7fssn1",label:"GroupingComponentListItem"})("padding:0;margin:",(0,j.Z)(.25)," 0 ",(0,j.Z)(.25)," ",(0,j.Z)(1.5),";",(function(t){return t.isCollapsable&&"\n    border-left: 1px solid ".concat(t.theme.innerBorder,";\n    margin: 0 0 -").concat((0,j.Z)(.25)," ").concat((0,j.Z)(1),";\n    padding-left: ").concat((0,j.Z)(.5),";\n  ")})),lt=(0,h.Z)("code",{target:"eg7fssn2",label:"GroupingValue"})("display:inline-block;margin:",(0,j.Z)(.25)," ",(0,j.Z)(.5)," ",(0,j.Z)(.25)," 0;font-size:",(function(t){return t.theme.fontSizeSmall}),";padding:0 ",(0,j.Z)(.25),";background:rgba(112,163,214,0.1);color:#4e3fb4;",(function(t){var e=t.valueType;return("function"===e||"symbol"===e)&&"\n    font-weight: bold;\n    color: #2c58a8;\n  "})),pt=(0,h.Z)("div",{target:"eg7fssn3",label:"GroupingComponentWrapper"})("color:",(function(t){return t.isContributing?null:t.theme.gray200}),";",lt,",button{opacity:",(function(t){return t.isContributing?1:.6}),";}"),dt=(0,h.Z)("small",{target:"eg7fssn4",label:"GroupingHint"})({name:"1lpx31t",styles:"font-size:0.8em;"});const ft=st;function gt(t,e){e.matched_rule&&t.push([(0,O.t)("Fingerprint rule"),(0,P.tZ)(wt,{key:"type"},e.matched_rule,(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("The server-side fingerprinting rule that produced the fingerprint.")}))]),e.values&&t.push([(0,O.t)("Fingerprint values"),e.values]),e.client_values&&t.push([(0,O.t)("Client fingerprint values"),(0,P.tZ)(wt,{key:"type"},e.client_values,(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("The client sent a fingerprint that was overridden by a server-side fingerprinting rule.")}))])}var mt=function(t){d()(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=v()(e);if(n){var o=v()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return g()(this,t)});function o(){var t;a()(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=r.call.apply(r,[this].concat(n))).state={showNonContributing:!1},t.handleShowNonContributing=function(){t.setState({showNonContributing:!0})},t.handleHideNonContributing=function(){t.setState({showNonContributing:!1})},t}return u()(o,[{key:"getVariantData",value:function(){var t,e,n,r=this.props,o=r.variant,i=r.showGroupingConfig,a=[];if(!this.state.showNonContributing&&null===o.hash)return[a,n];switch(null!==o.hash&&a.push([(0,O.t)("Hash"),(0,P.tZ)(wt,{key:"hash"},(0,P.tZ)(Ot,null,o.hash),(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("Events with the same hash are grouped together")}))]),o.hashMismatch&&a.push([(0,O.t)("Hash mismatch"),(0,O.t)("hashing algorithm produced a hash that does not match the event")]),o.type){case J.bo.COMPONENT:n=o.component,a.push([(0,O.t)("Type"),(0,P.tZ)(wt,{key:"type"},o.type,(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("Uses a complex grouping algorithm taking event data into account")}))]),i&&null!==(t=o.config)&&void 0!==t&&t.id&&a.push([(0,O.t)("Grouping Config"),o.config.id]);break;case J.bo.CUSTOM_FINGERPRINT:a.push([(0,O.t)("Type"),(0,P.tZ)(wt,{key:"type"},o.type,(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("Overrides the default grouping by a custom fingerprinting rule")}))]),gt(a,o);break;case J.bo.SALTED_COMPONENT:n=o.component,a.push([(0,O.t)("Type"),(0,P.tZ)(wt,{key:"type"},o.type,(0,P.tZ)(Q.Z,{size:"xs",position:"top",title:(0,O.t)("Uses a complex grouping algorithm taking event data and a fingerprint into account")}))]),gt(a,o),i&&null!==(e=o.config)&&void 0!==e&&e.id&&a.push([(0,O.t)("Grouping Config"),o.config.id])}return n&&a.push([(0,O.t)("Grouping"),(0,P.tZ)(xt,{key:n.id},(0,P.tZ)(ft,{component:n,showNonContributing:this.state.showNonContributing}))]),[a,n]}},{key:"renderTitle",value:function(){var t,e,n,r=this.props.variant,o=null!==r.hash;if(o)n=(0,O.t)("Contributing variant");else{var i,a=null===(i=r.component)||void 0===i?void 0:i.hint;n=a?(0,O.t)("Non-contributing variant: %s",a):(0,O.t)("Non-contributing variant")}return(0,P.tZ)(S.Z,{title:n},(0,P.tZ)(yt,null,(0,P.tZ)(bt,{isContributing:o}),(0,O.t)("By")," ",null!==(t=null===(e=r.description)||void 0===e?void 0:e.split(" ").map((function(t){return B()(t)})).join(" "))&&void 0!==t?t:(0,O.t)("Nothing")))}},{key:"renderContributionToggle",value:function(){var t=this.state.showNonContributing;return(0,P.tZ)(Zt,{merged:!0,active:t?"all":"relevant"},(0,P.tZ)(Z.ZP,{barId:"relevant",size:"xsmall",onClick:this.handleHideNonContributing},(0,O.t)("Contributing values")),(0,P.tZ)(Z.ZP,{barId:"all",size:"xsmall",onClick:this.handleShowNonContributing},(0,O.t)("All values")))}},{key:"render",value:function(){var t=this.getVariantData(),e=L()(t,2),n=e[0],r=e[1];return(0,P.tZ)(vt,null,(0,P.tZ)(ht,null,this.renderTitle(),Y(r)&&this.renderContributionToggle()),(0,P.tZ)(M.Z,{data:n,isContextData:!0,isSorted:!1}))}}]),o}(y.Component);mt.displayName="GroupVariant";var vt=(0,h.Z)("div",{target:"e1o15qc80",label:"VariantWrapper"})("margin-bottom:",(0,j.Z)(4),";"),ht=(0,h.Z)("div",{target:"e1o15qc81",label:"Header"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,j.Z)(2),";@media (max-width:",(function(t){return t.theme.breakpoints[0]}),"){display:block;}"),yt=(0,h.Z)("h5",{target:"e1o15qc82",label:"VariantTitle"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";margin:0;display:flex;align-items:center;"),bt=(0,h.Z)((function(t){var e=t.isContributing,n=R()(t,["isContributing"]);return e?(0,P.tZ)(H.DL,z()({size:"sm",isCircled:!0,color:"green300"},n)):(0,P.tZ)(H.bM,z()({size:"sm",isCircled:!0,color:"red"},n))}),{target:"e1o15qc83",label:"ContributionIcon"})("margin-right:",(0,j.Z)(1),";"),Zt=(0,h.Z)(F.Z,{target:"e1o15qc84",label:"ContributingToggle"})("justify-content:flex-end;@media (max-width:",(function(t){return t.theme.breakpoints[0]}),"){margin-top:",(0,j.Z)(.5),";}"),xt=(0,h.Z)("div",{target:"e1o15qc85",label:"GroupingTree"})({name:"1lujcy7",styles:"color:#2f2936;"}),wt=(0,h.Z)("div",{target:"e1o15qc86",label:"TextWithQuestionTooltip"})("display:grid;align-items:center;grid-template-columns:max-content min-content;grid-gap:",(0,j.Z)(.5),";"),Ot=(0,h.Z)("span",{target:"e1o15qc87",label:"Hash"})("@media (max-width:",(function(t){return t.theme.breakpoints[0]}),"){",K.Z,";width:210px;}");const jt=mt;function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct=function(t){d()(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=v()(e);if(n){var o=v()(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return g()(this,t)});function o(){var t;a()(this,o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=r.call.apply(r,[this].concat(n))).toggle=function(){t.setState((function(t){return{isOpen:!t.isOpen,configOverride:t.isOpen?null:t.configOverride}}))},t.handleConfigSelect=function(e){t.setState({configOverride:e.value},(function(){return t.reloadData()}))},t}return u()(o,[{key:"getEndpoints",value:function(){var t,e=this.props,n=e.organization,r=e.event,o=e.projectId,i="/projects/".concat(n.slug,"/").concat(o,"/events/").concat(r.id,"/grouping-info/");return null!==(t=this.state)&&void 0!==t&&t.configOverride&&(i="".concat(i,"?config=").concat(this.state.configOverride)),[["groupInfo",i]]}},{key:"getDefaultState",value:function(){return _t(_t({},l()(v()(o.prototype),"getDefaultState",this).call(this)),{},{isOpen:!1,configOverride:null})}},{key:"renderGroupInfoSummary",value:function(){var t=this.state.groupInfo;if(!t)return null;var e=Object.values(t).filter((function(t){return null!==t.hash&&null!==t.description})).map((function(t){return t.description})).sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())})).join(", ");return(0,P.tZ)(St,{"data-test-id":"loaded-grouping-info"},"(".concat((0,O.t)("grouped by")," ").concat(e||(0,O.t)("nothing"),")"))}},{key:"renderGroupConfigSelect",value:function(){var t=this.state.configOverride,e=this.props.event,n=null!=t?t:e.groupingConfig.id;return(0,P.tZ)(Tt,null,(0,P.tZ)(E,{eventConfigId:e.groupingConfig.id,configId:n,onSelect:this.handleConfigSelect}))}},{key:"renderGroupInfo",value:function(){var t=this.state,e=t.groupInfo,n=t.loading,r=this.props.showGroupingConfig,o=e?Object.values(e).sort((function(t,e){var n,r,o,i;return t.hash&&!e.hash?-1:null!==(n=null===(r=t.description)||void 0===r?void 0:r.toLowerCase().localeCompare(null!==(o=null===(i=e.description)||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:""))&&void 0!==n?n:1})):[];return(0,P.tZ)(y.Fragment,null,r&&this.renderGroupConfigSelect(),n?(0,P.tZ)(w.Z,null):o.map((function(t,e){return(0,P.tZ)(y.Fragment,{key:t.key},(0,P.tZ)(jt,{variant:t,showGroupingConfig:r}),e<o.length-1&&(0,P.tZ)(Nt,null))})))}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var t=this.state.isOpen,e=(0,P.tZ)(y.Fragment,null,(0,O.t)("Event Grouping Information"),!t&&this.renderGroupInfoSummary()),n=(0,P.tZ)(Pt,{onClick:this.toggle,priority:"link"},t?(0,O.t)("Hide Details"):(0,O.t)("Show Details"));return(0,P.tZ)(x.Z,{type:"grouping-info",title:e,actions:n},t&&this.renderGroupInfo())}}]),o}(b.Z),St=(0,h.Z)("small",{target:"e1wq4mnb0",label:"SummaryGroupedBy"})("@media (max-width:",(function(t){return t.theme.breakpoints[0]}),"){display:block;margin:0 !important;}"),Pt=(0,h.Z)(Z.ZP,{target:"e1wq4mnb1",label:"ToggleButton"})("font-weight:700;color:",(function(t){return t.theme.subText}),";&:hover,&:focus{color:",(function(t){return t.theme.textColor}),";}"),Tt=(0,h.Z)("div",{target:"e1wq4mnb2",label:"GroupConfigWrapper"})("margin-bottom:",(0,j.Z)(1.5),";margin-top:-",(0,j.Z)(1),";"),Dt=(0,h.Z)("span",{target:"e1wq4mnb3",label:"GroupingConfigItem"})("font-family:",(function(t){return t.theme.text.familyMono}),";opacity:",(function(t){return t.isHidden?.5:null}),";font-weight:",(function(t){return t.isActive?"bold":null}),";font-size:",(function(t){return t.theme.fontSizeSmall}),";"),Nt=(0,h.Z)("hr",{target:"e1wq4mnb4",label:"VariantDivider"})("padding-top:",(0,j.Z)(1),";");const It=(0,k.Z)(Ct)},"./app/components/events/interfaces/keyValueList/keyValueList.tsx":(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(r),i=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),a=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/lodash/sortBy.js")),s=n.n(a),u=n("./app/components/contextData.tsx"),c=n("./app/utils/theme.tsx"),l=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function p(t){var e=t.data,n=t.onClick,r=t.isContextData,i=void 0!==r&&r,a=t.isSorted,c=void 0===a||a,p=t.raw,f=void 0!==p&&p,g=t.longKeys,m=void 0!==g&&g;return e=null==e?[]:e instanceof Array?e.filter((function(t){return null!==t})):Object.entries(e),e=c?s()(e,[function(t){return o()(t,1)[0]}]):e,(0,l.tZ)("table",{className:"table key-value",onClick:n},(0,l.tZ)("tbody",null,e.map((function(t){var e=o()(t,2),n=e[0],r=e[1];return i?[(0,l.tZ)("tr",{key:n},(0,l.tZ)(d,{className:"key",wide:m},n),(0,l.tZ)("td",{className:"val"},(0,l.tZ)(u.Z,{data:f?JSON.stringify(r):r})))]:[(0,l.tZ)("tr",{key:n},(0,l.tZ)(d,{className:"key",wide:m},n),(0,l.tZ)("td",{className:"val"},(0,l.tZ)("pre",{className:"val-string"},""+r||" ")))]}))))}p.displayName="KeyValueList";var d=(0,i.Z)("td",{target:"e6ctlma0",label:"TableData"})("@media (min-width:",c.ZP.breakpoints[2],"){max-width:",(function(t){return t.wide?"620px !important":null}),";}");const f=p},"./app/components/quickTrace/index.tsx":(t,e,n)=>{"use strict";n.d(e,{Z:()=>G});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("../../../../node_modules/react/index.js"),a=n("../../../../node_modules/react-router/es/index.js"),s=n("./app/components/dropdownLink.tsx"),u=n("./app/components/idBadge/projectBadge.tsx"),c=n("./app/components/quickTrace/utils.tsx"),l=n("./app/components/tooltip.tsx"),p=n("./app/icons/index.tsx"),d=n("./app/locale.tsx"),f=n("./app/utils.tsx"),g=n("./app/utils/analytics.tsx"),m=n("./app/utils/formatters.tsx"),v=n("./app/utils/performance/quickTrace/utils.tsx"),h=n("./app/utils/projects.tsx"),y=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),b=n("./app/components/menuItem.tsx"),Z=n("./app/components/tag.tsx"),x=n("./app/components/truncate.tsx"),w=n("./app/styles/space.tsx"),O=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),j=(0,y.Z)("div",{target:"esxo4vt0",label:"SectionSubtext"})("color:",(function(t){return"error"===t.type?t.theme.error:t.theme.subText}),";font-size:",(function(t){return t.theme.fontSizeMedium}),";"),k=(0,y.Z)("div",{target:"esxo4vt1",label:"QuickTraceContainer"})({name:"ci1l7n",styles:"display:flex;align-items:center;height:24px;"}),_=function(t){return{error:{color:t.white,background:t.red300,border:t.red300},warning:{color:t.red300,background:t.background,border:t.red300},white:{color:t.textColor,background:t.background,border:t.textColor},black:{color:t.background,background:t.textColor,border:t.textColor}}},C=(0,y.Z)(Z.Z,{target:"esxo4vt2",label:"EventNode"})("span{display:flex;color:",(function(t){return _(t.theme)[t.type||"white"].color}),";}& ",Z.A,"{background-color:",(function(t){return _(t.theme)[t.type||"white"].background}),";border:1px solid ",(function(t){return _(t.theme)[t.type||"white"].border}),";}"),S=(0,y.Z)("div",{target:"esxo4vt3",label:"TraceConnector"})("width:",(0,w.Z)(1),";border-top:1px solid ",(function(t){return t.theme.textColor}),";"),P=(0,y.Z)(b.Z,{target:"esxo4vt4",label:"StyledMenuItem"})("border-top:",(function(t){return t.first?null:"1px solid ".concat(t.theme.innerBorder)}),";width:350px;"),T=(0,y.Z)("div",{target:"esxo4vt5",label:"MenuItemContent"})({name:"z7mtfw",styles:"display:flex;justify-content:space-between;width:100%;"});function D(t){var e=t.children,n=t.first,r=t.onSelect,o=t.to;return(0,O.tZ)(P,{to:o,onSelect:r,first:n},(0,O.tZ)(T,null,e))}D.displayName="DropdownItem";var N=(0,y.Z)("div",{target:"esxo4vt6",label:"DropdownItemSubContainer"})({name:"1l9yxva",styles:"display:flex;flex-direction:row;> a{padding-left:0 !important;}"}),I=(0,y.Z)(x.Z,{target:"esxo4vt7",label:"StyledTruncate"})({name:"epvm6",styles:"white-space:nowrap;"}),E=(0,y.Z)("div",{target:"esxo4vt8",label:"ErrorNodeContent"})("display:grid;grid-template-columns:repeat(2,auto);grid-gap:",(0,w.Z)(.25),";align-items:center;");function A(t){var e=t.event;return(0,O.tZ)("div",null,(0,O.tZ)(x.Z,{value:e.transaction,maxLength:30,leftTrim:!0,trimRegex:/\.|\//g,expandable:!1}),(0,O.tZ)("div",null,(0,m.g9)(e["transaction.duration"]/1e3,e["transaction.duration"]<1e3?0:2,!0)))}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}A.displayName="SingleEventHoverText";var R={root:"root",ancestors:"ancestor",parent:"parent",current:"",children:"child",descendants:"descendant"};function G(t){var e,n=t.event,r=t.quickTrace,o=t.location,a=t.organization,s=t.anchor,u=t.errorDest,l=t.transactionDest;try{e=(0,v.R8)(r,n)}catch(t){return(0,O.tZ)(i.Fragment,null,"â€”")}var p=e,g=p.root,m=p.ancestors,h=p.parent,y=p.children,b=p.descendants,Z=p.current,x=[];return g&&(x.push((0,O.tZ)(V,{key:"root-node",location:o,organization:a,events:[g],text:(0,d.t)("Root"),anchor:s,nodeKey:"root",errorDest:u,transactionDest:l})),x.push((0,O.tZ)(S,{key:"root-connector"}))),null!=m&&m.length&&(x.push((0,O.tZ)(V,{key:"ancestors-node",location:o,organization:a,events:m,text:(0,d.tn)("%s Ancestor","%s Ancestors",m.length),extrasTarget:(0,c.Y5)(n,m,a,"Ancestor"),anchor:s,nodeKey:"ancestors",errorDest:u,transactionDest:l})),x.push((0,O.tZ)(S,{key:"ancestors-connector"}))),h&&(x.push((0,O.tZ)(V,{key:"parent-node",location:o,organization:a,events:[h],text:(0,d.t)("Parent"),anchor:s,nodeKey:"parent",errorDest:u,transactionDest:l})),x.push((0,O.tZ)(S,{key:"parent-connector"}))),x.push((0,O.tZ)(V,{key:"current-node",location:o,organization:a,text:(0,d.t)("This %s",(0,f.LF)(n.type)),events:[Z],currentEvent:n,anchor:s,nodeKey:"current",errorDest:u,transactionDest:l})),y.length&&(x.push((0,O.tZ)(S,{key:"children-connector"})),x.push((0,O.tZ)(V,{key:"children-node",location:o,organization:a,events:y,text:(0,d.tn)("%s Child","%s Children",y.length),extrasTarget:(0,c.Y5)(n,y,a,"Children"),anchor:s,nodeKey:"children",errorDest:u,transactionDest:l}))),null!=b&&b.length&&(x.push((0,O.tZ)(S,{key:"descendants-connector"})),x.push((0,O.tZ)(V,{key:"descendants-node",location:o,organization:a,events:b,text:(0,d.tn)("%s Descendant","%s Descendants",b.length),extrasTarget:(0,c.Y5)(n,b,a,"Descendant"),anchor:s,nodeKey:"descendants",errorDest:u,transactionDest:l}))),(0,O.tZ)(k,null,x)}function L(t,e,n,r){(0,g.ec)({eventKey:"quick_trace.dropdown.clicked"+(r?"_extra":""),eventName:"Quick Trace: Dropdown clicked",organization_id:parseInt(n.id,10),node_key:e}),a.browserHistory.push(t)}function V(t){var e=t.location,n=t.organization,r=t.events,o=void 0===r?[]:r,i=t.text,a=t.currentEvent,u=t.extrasTarget,l=t.nodeKey,f=t.anchor,v=t.errorDest,h=t.transactionDest,y=t.numEvents,b=void 0===y?5:y,Z=[];o.forEach((function(t){var e;null==t||null===(e=t.errors)||void 0===e||e.forEach((function(e){a&&a.id===e.event_id||Z.push(q(q({},e),{},{transaction:t.transaction}))}))})),o=a?o.filter((function(t){return t.event_id!==a.id})):o;var x="current"===l?"black":"white";if((Z.length>0||a&&"transaction"!==(null==a?void 0:a.type))&&(x="current"===l?"error":"warning",i=(0,O.tZ)(E,null,(0,O.tZ)(p.zC,{size:"xs"}),i)),o.length+Z.length===0)return(0,O.tZ)(C,{type:x},i);if(o.length+Z.length===1){var w=Z.length?(0,d.t)("View the error for this Transaction"):(0,O.tZ)(A,{event:o[0]}),j=Z.length?(0,c.Tn)(Z[0],n,e,v):(0,c.MV)(o[0],n,e,h);return(0,O.tZ)(F,{text:i,hoverText:w,to:j,onClick:function(){return function(t,e){(0,g.ec)({eventKey:"quick_trace.node.clicked",eventName:"Quick Trace: Node clicked",organization_id:parseInt(e.id,10),node_key:t})}(l,n)},type:x})}var k=(0,d._N)("View [eventPrefix] [eventType]",{eventPrefix:R[l],eventType:Z.length&&o.length?"events":o.length?"transactions":"errors"});return(0,O.tZ)(s.Z,{caret:!1,title:(0,O.tZ)(F,{text:i,hoverText:k,type:x}),anchorRight:"right"===f},Z.slice(0,b).map((function(t,r){var o=(0,c.Tn)(t,n,e,v);return(0,O.tZ)(B,{key:t.event_id,event:t,onSelect:function(){return L(o,l,n,!1)},first:0===r,organization:n,subtext:"error",subtextType:"error",anchor:f})})),o.slice(0,b).map((function(t,r){var o=(0,c.MV)(t,n,e,h);return(0,O.tZ)(B,{key:t.event_id,event:t,onSelect:function(){return L(o,l,n,!1)},first:0===r&&0===Z.length,organization:n,subtext:(0,m.g9)(t["transaction.duration"]/1e3,t["transaction.duration"]<1e3?0:2,!0),subtextType:"default",anchor:f})})),o.length>b&&k&&u&&(0,O.tZ)(D,{onSelect:function(){return L(u,l,n,!0)}},k))}function B(t){var e=t.event,n=t.onSelect,r=t.first,o=t.organization,i=t.subtext,a=t.subtextType,s=t.anchor;return(0,O.tZ)(D,{onSelect:n,first:r},(0,O.tZ)(N,null,(0,O.tZ)(h.Z,{orgId:o.slug,slugs:[e.project_slug]},(function(t){var n=t.projects.find((function(t){return t.slug===e.project_slug}));return(0,O.tZ)(u.Z,{hideName:!0,project:n||{slug:e.project_slug},avatarSize:16})})),(0,O.tZ)(I,{value:e.transaction,expandDirection:"left"===s?"right":"left",maxLength:35,leftTrim:!0,trimRegex:/\.|\//g})),(0,O.tZ)(j,{type:a},i))}function F(t){var e=t.text,n=t.hoverText,r=t.to,o=t.onClick,i=t.type,a=void 0===i?"white":i;return(0,O.tZ)(l.Z,{position:"top",containerDisplayMode:"inline-flex",title:n},(0,O.tZ)(C,{type:a,icon:null,to:r,onClick:o},e))}G.displayName="QuickTrace",B.displayName="DropdownNodeItem",F.displayName="StyledEventNode"},"./app/components/quickTrace/utils.tsx":(t,e,n)=>{"use strict";n.d(e,{Tn:()=>h,MV:()=>y,Y5:()=>b,aV:()=>Z});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=n.n(i),s=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),u=n("./app/constants/globalSelectionHeader.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/urls.tsx"),p=n("./app/utils/performance/quickTrace/utils.tsx"),d=n("./app/utils/tokenizeSearch.tsx"),f=n("./app/views/performance/traceDetails/utils.tsx"),g=n("./app/views/performance/utils.tsx");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t,e,n){var r=(0,l.JE)({id:t.event_id,project:t.project_slug});return(0,l.eQ)({orgSlug:e.slug,eventSlug:r,eventView:c.ZP.fromLocation(n)})}function h(t,e,n,r){switch(r){case"issue":return function(t,e){return"/organizations/".concat(e.slug,"/issues/").concat(t.issue_id,"/events/").concat(t.event_id)}(t,e);case"discover":default:return v(t,e,n)}}function y(t,e,n,r){switch(r){case"performance":return function(t,e,n){var r=(0,l.JE)({id:t.event_id,project:t.project_slug});return(0,g.DD)(e,r,t.transaction,n.query)}(t,e,n);case"discover":default:return v(t,e,n)}}function b(t,e,n,r){for(var o=new d.an([]),i=e.map((function(t){return t.event_id})),s=0;s<i.length;s++)o.addOp(0===s?"(":"OR"),o.addQuery("id:".concat(i[s])),s===i.length-1&&o.addOp(")");var u=(0,p.$J)(t),l=u.start,f=u.end;return c.ZP.fromSavedQuery({id:void 0,name:"".concat(r," Transactions of Event ID ").concat(t.id),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:(0,d.gZ)(o),projects:a()(new Set(e.map((function(t){return t.project_id})))),version:2,start:l,end:f}).getResultsViewUrlTarget(n.slug)}function Z(t,e){var n,r,i,a=null!==(n=null===(r=t.contexts)||void 0===r||null===(i=r.trace)||void 0===i?void 0:i.trace_id)&&void 0!==n?n:"",l=(0,s.Q)((0,p.$J)(t));return e.features.includes("trace-view-summary")?(0,f.YA)(e,a,l,{}):c.ZP.fromSavedQuery(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:void 0,name:"Transactions with Trace ID ".concat(a),fields:["transaction","project","trace.span","transaction.duration","timestamp"],orderby:"-timestamp",query:"event.type:transaction trace:".concat(a),projects:[u.mP],version:2},l)).getResultsViewUrlTarget(e.slug)}},"./app/utils/performance/quickTrace/quickTraceQuery.tsx":(t,e,n)=>{"use strict";n.d(e,{Z:()=>O});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(i),s=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),u=n.n(s),c=n("../../../../node_modules/react/index.js"),l=n("./app/utils/performance/quickTrace/traceFullQuery.tsx"),p=n("./app/utils/discover/genericDiscoverQuery.tsx"),d=n("./app/utils/performance/quickTrace/utils.tsx"),f=n("./app/utils/withApi.tsx"),g=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){var e=t.eventId,n=u()(t,["eventId"]),r=(0,d.Lb)(n);return Object.assign({event_id:e},r)}function h(t){var e=t.children;return(0,g.tZ)(c.Fragment,null,e({isLoading:!1,error:null,trace:null,type:"partial"}))}function y(t){var e=t.traceId,n=t.start,r=t.end,i=t.statsPeriod,s=t.children,c=u()(t,["traceId","start","end","statsPeriod","children"]);if(!e)return(0,g.tZ)(h,null,s);var l=(0,d._Z)({start:n,end:r,statsPeriod:i});return(0,g.tZ)(p.Z,o()({route:"events-trace-light/".concat(e),getRequestPayload:v,beforeFetch:d.VP,eventView:l},c),(function(t){var e=t.tableData,n=u()(t,["tableData"]);return s(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({trace:e||null,type:"partial"},n))}))}h.displayName="EmptyTrace",y.displayName="TraceLiteQuery";const b=(0,f.Z)(y);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t){var e,n,r=t.children,i=t.event,a=u()(t,["children","event"]),s=null===(e=i.contexts)||void 0===e||null===(n=e.trace)||void 0===n?void 0:n.trace_id;if(!s)return(0,g.tZ)(c.Fragment,null,r({isLoading:!1,error:null,trace:[],type:"empty"}));var p=(0,d.$J)(i),f=p.start,m=p.end;return(0,g.tZ)(b,o()({eventId:i.id,traceId:s,start:f,end:m},a),(function(t){return(0,g.tZ)(l.g,o()({traceId:s,start:f,end:m},a),(function(e){var n;if(!e.isLoading&&null===e.error&&null!==e.traces){var o,a=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e.traces);try{for(a.s();!(o=a.n()).done;){var s=o.value;try{var u=(0,d.eW)(i,s);return r(x(x({},e),{},{trace:u}))}catch(t){}}}catch(t){a.e(t)}finally{a.f()}}return t.isLoading||null!==t.error||null===t.trace?r({isLoading:e.isLoading||t.isLoading,error:null!==(n=e.error)&&void 0!==n?n:t.error,trace:[],type:"empty"}):r(t)}))}))}O.displayName="QuickTraceQuery"},"./app/utils/performance/quickTrace/traceFullQuery.tsx":(t,e,n)=>{"use strict";n.d(e,{g:()=>y,H:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(i),s=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),u=n.n(s),c=n("../../../../node_modules/react/index.js"),l=n("./app/utils/discover/genericDiscoverQuery.tsx"),p=n("./app/utils/performance/quickTrace/utils.tsx"),d=n("./app/utils/withApi.tsx"),f=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){var e=t.detailed,n=u()(t,["detailed"]),r=(0,p.Lb)(n);return r.detailed=e?"1":"0",r}function v(t){var e=t.children;return(0,f.tZ)(c.Fragment,null,e({isLoading:!1,error:null,traces:null,type:"full"}))}function h(t){var e=t.traceId,n=t.start,r=t.end,i=t.statsPeriod,s=t.children,c=u()(t,["traceId","start","end","statsPeriod","children"]);if(!e)return(0,f.tZ)(v,null,s);var d=(0,p._Z)({start:n,end:r,statsPeriod:i});return(0,f.tZ)(l.Z,o()({route:"events-trace/".concat(e),getRequestPayload:m,beforeFetch:p.VP,eventView:d},c),(function(t){var e=t.tableData,n=u()(t,["tableData"]);return s(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({traces:e||null,type:"full"},n))}))}v.displayName="EmptyTrace",h.displayName="GenericTraceFullQuery";var y=(0,d.Z)((function(t){return(0,f.tZ)(h,o()({},t,{detailed:!1}))})),b=(0,d.Z)((function(t){return(0,f.tZ)(h,o()({},t,{detailed:!0}))}))},"./app/utils/performance/quickTrace/utils.tsx":(t,e,n)=>{"use strict";n.d(e,{hp:()=>d,eW:()=>g,R8:()=>v,VP:()=>y,Lb:()=>b,_Z:()=>Z,$J:()=>x,S2:()=>w});var r=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),i=n("../../../../node_modules/lodash/omit.js"),a=n.n(i),s=n("./app/components/events/interfaces/spans/utils.tsx"),u=n("./app/constants/globalSelectionHeader.tsx"),c=n("./app/utils/discover/eventView.tsx");function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){throw t})),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){s=!0,i=t})),f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t){return"transaction"===t.type}function f(t,e){return d(e)?t.event_id===e.id:void 0!==t.errors&&t.errors.some((function(t){return t.event_id===e.id}))}function g(t,e){for(var n=[],r=[],i=[{event:e,path:[]}];i.length;){var a=i.shift();if(f(a.event,t)){var s,u=l(a.path);try{for(u.s();!(s=u.n()).done;){var c=s.value;n.push(c)}}catch(t){u.e(t)}finally{u.f()}r.push(a.event)}else{var p,d=[].concat(o()(a.path),[m(a.event)]),g=l(a.event.children);try{for(g.s();!(p=g.n()).done;){var v=p.value;i.push({event:v,path:d})}}catch(t){g.e(t)}finally{g.f()}}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){var h,y=r.shift(),b=l(y.children);try{for(b.s();!(h=b.n()).done;){var Z=h.value;r.push(Z)}}catch(t){b.e(t)}finally{b.f()}n.push(m(y))}return n}function m(t){return a()(t,["children"])}function v(t,e){var n,r,o,i=t.type,a=t.trace;if("empty"===i||null===a)throw new Error("Current event not in quick trace!");var s="full"===i,u=null!==(n=a.find((function(t){return f(t,e)})))&&void 0!==n?n:null;if(null===u)throw new Error("Current event not in quick trace!");var c=u.parent_event_id&&null!==(r=a.find((function(t){return t.event_id===u.parent_event_id})))&&void 0!==r?r:null,l=null!==(o=a.find((function(t){return t.event_id!==u.event_id&&t.event_id!==(null==c?void 0:c.event_id)&&0===t.generation})))&&void 0!==o?o:null,p=s?[]:null,d=[],g=s?[]:null;return a.forEach((function(t){!function(t){return t.parent_event_id===u.event_id}(t)?s&&(function(t){return null!==u.generation&&null!==t.generation&&t.generation>0&&u.generation-1>t.generation}(t)?null==p||p.push(t):function(t){return null!==u.generation&&null!==t.generation&&u.generation+1<t.generation}(t)&&(null==g||g.push(t))):d.push(t)})),{root:l,ancestors:null===p?null:h(p),parent:c,current:u,children:h(d),descendants:null===g?null:h(g)}}function h(t){return t.sort((function(t,e){return e["transaction.duration"]-t["transaction.duration"]}))}function y(t){t.clear()}function b(t){var e=t.eventView,n=t.location;return a()(e.getEventsAPIPayload(n),["field","sort","per_page"])}function Z(t){var e=t.start,n=t.end,r=t.statsPeriod;return c.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[u.mP],query:"",environment:[],start:e,end:n,range:r})}function x(t){var e=d(t)?t.startTimestamp:new Date(t.dateCreated).getTime()/1e3,n=d(t)?t.endTimestamp:e;return(0,s.TC)({start:e,end:n})}function w(t,e,n){for(var r=n,o=[t];o.length;){var i,a=o.pop(),s=l(a.children);try{for(s.s();!(i=s.n()).done;){var u=i.value;o.push(u)}}catch(t){s.e(t)}finally{s.f()}r=e(r,a)}return r}},"./app/views/performance/traceDetails/utils.tsx":(t,e,n)=>{"use strict";n.d(e,{YA:()=>p,Rg:()=>d,Ci:()=>f,ud:()=>a.ud,bQ:()=>s.bQ,yI:()=>s.yI,uM:()=>g});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("./app/utils/performance/quickTrace/utils.tsx"),a=n("./app/components/events/interfaces/spans/spanBar.tsx"),s=n("./app/components/events/interfaces/spans/utils.tsx");function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n,r){return{pathname:"/organizations/".concat(t.slug,"/performance/trace/").concat(e,"/"),query:l(l({},r),n)}}function d(t){var e={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return t.reduce((function(t,e){return(0,i.S2)(e,(function(t,e){var n,r,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(null!==(n=e.errors)&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var i=r.value;t.errors.add(i.event_id)}}catch(t){o.e(t)}finally{o.f()}return t.transactions.add(e.event_id),t.projects.add(e.project_slug),t.startTimestamp=Math.min(t.startTimestamp,e.start_timestamp),t.endTimestamp=Math.max(t.endTimestamp,e.timestamp),t.maxGeneration=Math.max(t.maxGeneration,e.generation),t}),t)}),e)}function f(t){return Boolean(t.event_id)}function g(t){return null===t.parent_span_id}}}]);
//# sourceMappingURL=app_components_events_groupingInfo_index_tsx-app_components_quickTrace_index_tsx-app_utils_pe-8c2cc4.js.map