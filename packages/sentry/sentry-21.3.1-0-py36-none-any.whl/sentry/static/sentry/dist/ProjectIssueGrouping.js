(self.webpackChunk=self.webpackChunk||[]).push([["ProjectIssueGrouping"],{"./app/data/forms/projectIssueGrouping.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{route:()=>m,fields:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),i=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),s=n("../../../../node_modules/react/index.js"),a=n("./app/components/events/groupingInfo/index.tsx"),l=n("./app/components/links/externalLink.tsx"),u=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),c=n("./app/utils/marked.tsx"),d=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m="/settings/:orgId/projects/:projectId/issue-grouping/",h={name:"groupingConfig",type:"select",deprecatedSelectControl:!1,label:(0,u.t)("Grouping Config"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,u.t)("Changing grouping config will apply to future events only (can take up to a minute)."),selectionInfoFunction:function(e){var t=e.groupingConfigs,n=e.value,r=t.find((function(e){return e.id===n})),o=(null==r?void 0:r.changelog)||"";return o?(0,d.tZ)(Z,null,(0,d.tZ)(x,null,(0,u._N)("New in version [version]",{version:r.id}),":"),(0,d.tZ)("div",{dangerouslySetInnerHTML:{__html:(0,c.Z)(o)}})):null},choices:function(e){return e.groupingConfigs.map((function(e){var t=e.id,n=e.hidden;return[t.toString(),(0,d.tZ)(a.B,{key:t,isHidden:n},t)]}))},help:(0,u.t)("Sets the grouping algorithm to be used for new events."),visible:function(e){return e.features.has("set-grouping-config")}},b={fingerprintingRules:{name:"fingerprintingRules",type:"string",label:(0,u.t)("Fingerprint Rules"),hideLabel:!0,placeholder:(0,u.t)("error.type:MyException -> fingerprint-value\nstack.function:some_panic_function -> fingerprint-value"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,u.t)("Changing fingerprint rules will apply to future events only (can take up to a minute)."),formatMessageValue:!1,help:function(){return(0,d.tZ)(s.Fragment,null,(0,d.tZ)(y,null,(0,u._N)("This can be used to modify the fingerprint rules on the server with custom rules.\n        Rules follow the pattern [pattern]. To learn more about fingerprint rules, [docs:read the docs].",{pattern:(0,d.tZ)("code",null,"matcher:glob -> fingerprint, values"),docs:(0,d.tZ)(l.Z,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2Fserver-side-fingerprinting%2F"})})),(0,d.tZ)(v,null,"# force all errors of the same type to have the same fingerprint\nerror.type:DatabaseUnavailable -> system-down\n# force all memory allocation errors to be grouped together\nstack.function:malloc -> memory-allocation-error"))},visible:!0},groupingEnhancements:{name:"groupingEnhancements",type:"string",label:(0,u.t)("Stack Trace Rules"),hideLabel:!0,placeholder:(0,u.t)("stack.function:raise_an_exception ^-group\nstack.function:namespace::* +app"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,u.t)("Changing stack trace rules will apply to future events only (can take up to a minute)."),formatMessageValue:!1,help:function(){return(0,d.tZ)(s.Fragment,null,(0,d.tZ)(y,null,(0,u._N)("This can be used to enhance the grouping algorithm with custom rules.\n        Rules follow the pattern [pattern]. To learn more about stack trace rules, [docs:read the docs].",{pattern:(0,d.tZ)("code",null,"matcher:glob [^v]?[+-]flag"),docs:(0,d.tZ)(l.Z,{href:"https://docs.sentry.io/platform-redirect/?next=/data-management/event-grouping/stack-trace-rules/"})})),(0,d.tZ)(v,null,"# remove all frames above a certain function from grouping\nstack.function:panic_handler ^-group\n# mark all functions following a prefix in-app\nstack.function:mylibrary_* +app"))},validate:function(){return[]},visible:!0},groupingConfig:h,secondaryGroupingConfig:f(f({},h),{},{name:"secondaryGroupingConfig",label:(0,u.t)("Fallback/Secondary Grouping Config"),help:(0,u.t)("Sets the secondary grouping algorithm that should be run in addition to avoid creating too many new groups. Controlled by expiration date below.")}),secondaryGroupingExpiry:{name:"secondaryGroupingExpiry",type:"number",label:(0,u.t)("Expiration date of secondary grouping"),help:(0,u.t)("If this UNIX timestamp is in the past, the secondary grouping configuration stops applying automatically.")}},y=(0,i.Z)("div",{target:"e11tperv0",label:"RuleDescription"})("margin-bottom:",(0,p.Z)(1),";margin-top:-",(0,p.Z)(1),";margin-right:36px;"),v=(0,i.Z)("pre",{target:"e11tperv1",label:"RuleExample"})("margin-bottom:",(0,p.Z)(1),";margin-right:36px;"),Z=(0,i.Z)("div",{target:"e11tperv2",label:"Changelog"})("position:relative;top:-1px;margin-bottom:-1px;padding:",(0,p.Z)(2),";border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";background:",(function(e){return e.theme.backgroundSecondary}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";&:last-child{border:0;border-bottom-left-radius:",(function(e){return e.theme.borderRadius}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";}"),x=(0,i.Z)("h3",{target:"e11tperv3",label:"ChangelogTitle"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-bottom:",(0,p.Z)(.75)," !important;")},"./app/utils/routeTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,o="".concat(e," - ").concat(t),i=r?"".concat(o," - ").concat(r):o;return n?"".concat(i," - Sentry"):i}},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(i),a=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(u),c=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(c),g=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),f=n.n(g),m=n("./app/components/asyncComponent.tsx"),h=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var b=function(e){l()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var o=d()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return p()(this,e)});function i(){return o()(this,i),r.apply(this,arguments)}return s()(i,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,h.tZ)(f(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),i}(m.Z);b.displayName="AsyncView"},"./app/views/settings/components/settingsPageHeader.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(i),a=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(u),c=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(c),g=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(g),m=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=n("../../../../node_modules/react/index.js"),b=n("./app/styles/organization.tsx"),y=n("./app/styles/space.tsx"),v=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var Z=function(e){p()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f()(t);if(n){var o=f()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return d()(this,e)});function i(){return s()(this,i),r.apply(this,arguments)}return l()(i,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.subtitle,i=e.action,s=e.tabs,a=e.noTitleStyles,l=e.body,u=o()(e,["icon","title","subtitle","action","tabs","noTitleStyles","body"]),p=!r;return(0,v.tZ)("div",u,(0,v.tZ)(x,{isNarrow:p},(0,v.tZ)(j,null,t&&(0,v.tZ)(C,null,t),n&&(0,v.tZ)(w,{tabs:s,styled:a},(0,v.tZ)(b.Gh,null,n),r&&(0,v.tZ)(k,null,r))),i&&(0,v.tZ)(_,{isNarrow:p},i)),l&&(0,v.tZ)(S,null,l),s&&(0,v.tZ)(T,null,s))}}]),i}(h.Component);Z.displayName="UnstyledSettingsPageHeader",Z.defaultProps={noTitleStyles:!1};var x=(0,m.Z)("div",{target:"e1uay4fd0",label:"TitleAndActions"})("display:flex;align-items:",(function(e){return e.isNarrow?"center":"flex-start"}),";"),j=(0,m.Z)("div",{target:"e1uay4fd1",label:"TitleWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),w=(0,m.Z)("div",{target:"e1uay4fd2",label:"Title"})((function(e){return!e.styled&&"font-size: 20px; font-weight: 600;"}),";margin:",(0,y.Z)(4)," ",(0,y.Z)(2)," ",(0,y.Z)(3)," 0;"),k=(0,m.Z)("div",{target:"e1uay4fd3",label:"Subtitle"})("color:",(function(e){return e.theme.gray400}),";font-weight:400;font-size:",(function(e){return e.theme.fontSizeLarge}),";padding:",(0,y.Z)(1.5)," 0 0;"),C=(0,m.Z)("div",{target:"e1uay4fd4",label:"Icon"})("margin-right:",(0,y.Z)(1),";"),_=(0,m.Z)("div",{target:"e1uay4fd5",label:"Action"})("margin-top:",(function(e){return e.isNarrow?"0":(0,y.Z)(4)}),";"),O=(0,m.Z)(Z,{target:"e1uay4fd6",label:"SettingsPageHeader"})("font-size:14px;margin-top:-",(0,y.Z)(4),";"),S=(0,m.Z)("div",{target:"e1uay4fd7",label:"BodyWrapper"})("flex:1;margin:0 0 ",(0,y.Z)(3),";"),T=(0,m.Z)("div",{target:"e1uay4fd8",label:"TabsWrapper"})({name:"8k0ai7",styles:"flex:1;margin:0;"});const P=O},"./app/views/settings/projectIssueGrouping/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(i),a=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),l=n.n(a),u=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),p=n.n(u),c=n("../../../../node_modules/@babel/runtime/helpers/get.js"),d=n.n(c),g=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(g),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(m),b=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=n.n(b),v=n("../../../../node_modules/react/index.js"),Z=n("./app/actions/projectActions.tsx"),x=n("./app/components/acl/feature.tsx"),j=n("./app/components/links/externalLink.tsx"),w=n("./app/data/forms/projectIssueGrouping.tsx"),k=n("./app/locale.tsx"),C=n("./app/utils/routeTitle.tsx"),_=n("./app/views/asyncView.tsx"),O=n("./app/views/settings/components/forms/form.tsx"),S=n("./app/views/settings/components/forms/jsonForm.tsx"),T=n("./app/views/settings/components/settingsPageHeader.tsx"),P=n("./app/views/settings/components/text/textBlock.tsx"),R=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),G=n.n(R),N=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),I=n.n(N),E=n("./app/actionCreators/indicator.tsx"),B=n("./app/components/alert.tsx"),F=n("./app/components/button.tsx"),z=n("./app/components/confirm.tsx"),D=n("./app/components/panels/index.tsx"),M=n("./app/utils/handleXhrErrorResponse.tsx"),U=n("./app/utils/marked.tsx"),A=n("./app/views/settings/components/forms/field/index.tsx"),L=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function H(e){var t=e.groupingConfigs,n=e.organization,r=e.projectId,o=e.project,i=e.onUpgrade,s=e.api,a=n.access.includes("project:write"),l=function(e,t){var n={},r="",o=0,i=null;if(t.forEach((function(t){n[t.id]=t,t.latest&&e.groupingConfig!==t.id&&(r=t.changelog,i=t,o=t.risk)})),i)for(var s,a=null!==(s=i.base)&&void 0!==s?s:"";a!==e.groupingConfig;){var l,u=n[a];if(!u)break;o=Math.max(o,u.risk),r=u.changelog+"\n"+r,a=null!==(l=u.base)&&void 0!==l?l:""}return{updateNotes:r,riskLevel:o,latestGroupingConfig:i}}(o,t),u=l.updateNotes,p=l.riskLevel,c=l.latestGroupingConfig,d=function(e){switch(e){case 0:return{riskNote:(0,k.t)("This upgrade has the chance to create some new issues."),alertType:"info"};case 1:return{riskNote:(0,k.t)("This upgrade will create some new issues."),alertType:"warning"};case 2:return{riskNote:(0,L.tZ)("strong",null,(0,k.t)("The new grouping strategy is incompatible with the current and will create entirely new issues.")),alertType:"error"};default:return{riskNote:void 0,alertType:void 0}}}(p),g=d.riskNote,f=d.alertType,m=!c,h={};c&&(h.groupingConfig=c.id);var b=function(){var e=I()(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,E.E3)((0,k.t)("Changing grouping…")),e.prev=1,e.next=4,s.requestPromise("/projects/".concat(n.slug,"/").concat(r,"/"),{method:"PUT",data:h});case 4:t=e.sent,(0,E.B8)(),Z.Z.updateSuccess(t),i(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,M.Z)((0,k.t)("Unable to upgrade config"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return t?(0,L.tZ)(D.s_,{id:"upgrade-grouping"},(0,L.tZ)(D.V9,null,(0,k.t)("Upgrade Grouping")),(0,L.tZ)(D.N,null,(0,L.tZ)(A.Z,{label:(0,k.t)("Upgrade Grouping Strategy"),help:(0,k._N)("If the project uses an old grouping strategy an update is possible.[linebreak]Doing so will cause new events to group differently.",{linebreak:(0,L.tZ)("br",null)}),disabled:!0},(0,L.tZ)(z.Z,{disabled:m,onConfirm:b,priority:p>=2?"danger":"primary",confirmText:(0,k.t)("Upgrade"),message:(0,L.tZ)(v.Fragment,null,(0,L.tZ)(P.Z,null,(0,L.tZ)("strong",null,(0,k.t)("Upgrade Grouping Strategy"))),(0,L.tZ)(P.Z,null,(0,k.t)("You can upgrade the grouping strategy to the latest but this is an irreversible operation.")),(0,L.tZ)(P.Z,null,(0,L.tZ)("strong",null,(0,k.t)("New Behavior")),(0,L.tZ)("div",{dangerouslySetInnerHTML:{__html:(0,U.Z)(u)}})),(0,L.tZ)(P.Z,null,(0,L.tZ)(B.Z,{type:f},g)))},(0,L.tZ)("div",null,(0,L.tZ)(F.ZP,{disabled:!a||m,title:a?m?(0,k.t)("You are already on the latest version"):void 0:(0,k.t)("You do not have sufficient permissions to do this"),type:"button",priority:p>=2?"danger":"primary"},(0,k.t)("Upgrade Grouping Strategy"))))))):null}H.displayName="UpgradeGrouping";const V=H;function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Y=function(e){f()(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=y()(t);if(n){var o=y()(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h()(this,e)});function i(){var e;l()(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).handleSubmit=function(e){Z.Z.updateSuccess(e)},e}return p()(i,[{key:"getTitle",value:function(){var e=this.props.params.projectId;return(0,C.Z)((0,k.t)("Issue Grouping"),e,!1)}},{key:"getDefaultState",value:function(){return q(q({},d()(y()(i.prototype),"getDefaultState",this).call(this)),{},{groupingConfigs:[]})}},{key:"getEndpoints",value:function(){return[["groupingConfigs","/grouping-configs/"]]}},{key:"renderBody",value:function(){var e=this.state.groupingConfigs,t=this.props,n=t.organization,r=t.project,i=t.params,s=i.orgId,a=i.projectId,l="/projects/".concat(s,"/").concat(a,"/"),u=new Set(n.access),p={additionalFieldProps:{organization:n,groupingConfigs:e},features:new Set(n.features),access:u,disabled:!u.has("project:write")};return(0,L.tZ)(v.Fragment,null,(0,L.tZ)(T.Z,{title:(0,k.t)("Issue Grouping")}),(0,L.tZ)(P.Z,null,(0,k._N)("All events have a fingerprint. Events with the same fingerprint are grouped together into an issue. To learn more about issue grouping, [link: read the docs].",{link:(0,L.tZ)(j.Z,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2F"})})),(0,L.tZ)(O.Z,{saveOnBlur:!0,allowUndo:!0,initialData:r,apiMethod:"PUT",apiEndpoint:l,onSubmitSuccess:this.handleSubmit},(0,L.tZ)(S.Z,o()({},p,{title:(0,k.t)("Fingerprint Rules"),fields:[w.fields.fingerprintingRules]})),(0,L.tZ)(S.Z,o()({},p,{title:(0,k.t)("Stack Trace Rules"),fields:[w.fields.groupingEnhancements]})),(0,L.tZ)(x.Z,{features:["set-grouping-config"],organization:n},(0,L.tZ)(S.Z,o()({},p,{title:(0,k.t)("Change defaults"),fields:[w.fields.groupingConfig,w.fields.secondaryGroupingConfig,w.fields.secondaryGroupingExpiry]}))),(0,L.tZ)(V,{groupingConfigs:null!=e?e:[],organization:n,projectId:i.projectId,project:r,api:this.api,onUpgrade:this.fetchData})))}}]),i}(_.Z)}}]);
//# sourceMappingURL=ProjectIssueGrouping.js.map