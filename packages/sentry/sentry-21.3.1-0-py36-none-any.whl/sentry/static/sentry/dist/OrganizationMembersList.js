(self.webpackChunk=self.webpackChunk||[]).push([["OrganizationMembersList"],{"./app/utils/recreateRoute.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("../../../../node_modules/lodash/findLastIndex.js"),a=n.n(r),o=n("./app/utils/replaceRouterParams.tsx");function i(e,t){var n,r,i,s,l=t.routes,u=t.params,c=t.location,d=t.stepBack,p=l.map((function(e){return e.path||""}));"string"!=typeof e?(s=l.indexOf(e)+1,i=a()(p.slice(0,s),(function(e){return"/"===e[0]}))):i=a()(p,(function(e){return"/"===e[0]}));var m=p.slice(i,s);void 0!==d&&(m=m.slice(0,d));var f=null!==(n=null==c?void 0:c.search)&&void 0!==n?n:"",g=null!==(r=null==c?void 0:c.hash)&&void 0!==r?r:"",v="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(f).concat(g);return(0,o.Z)(v,u)}},"./app/utils/routeTitle.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,a="".concat(e," - ").concat(t),o=r?"".concat(a," - ").concat(r):a;return n?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(o),s=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=n.n(s),u=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=n.n(d),m=(n("../../../../node_modules/react/index.js"),n("../../../../node_modules/react-document-title/index.js")),f=n.n(m),g=n("./app/components/asyncComponent.tsx"),v=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var b=function(e){l()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p()(t);if(n){var a=p()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return c()(this,e)});function o(){return a()(this,o),r.apply(this,arguments)}return i()(o,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return(0,v.tZ)(f(),{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),o}(g.Z);b.displayName="AsyncView"},"./app/views/settings/organizationMembers/organizationMembersList.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>je});var r=n("../../../../node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),a=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),i=n.n(o),s=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(s),u=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),c=n.n(u),d=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),p=n.n(d),m=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),f=n.n(m),g=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),v=n.n(g),b=n("../../../../node_modules/@babel/runtime/helpers/get.js"),h=n.n(b),Z=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),y=n.n(Z),x=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),w=n.n(x),k=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),S=n.n(k),z=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),j=n("../../../../node_modules/react/index.js"),C=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),R=n("./app/actionCreators/indicator.tsx"),N=n("./app/actionCreators/members.tsx"),_=n("./app/actionCreators/organizations.tsx"),L=n("./app/components/button.tsx"),O=n("./app/components/dropdownMenu.tsx"),P=n("./app/components/pagination.tsx"),I=n("./app/components/panels/index.tsx"),M=n("./app/constants/index.tsx"),T=n("./app/icons/index.tsx"),A=n("./app/locale.tsx"),E=n("./app/stores/configStore.tsx"),q=n("./app/styles/space.tsx"),F=n("./app/utils/routeTitle.tsx"),B=n("./app/utils/theme.tsx"),V=n("./app/utils/withOrganization.tsx"),D=n("./app/views/asyncView.tsx"),U=n("./app/views/settings/components/emptyMessage.tsx"),Y=n("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),G=n.n(Y),H=n("./app/components/checkbox.tsx"),J=n("./app/components/switchButton.tsx"),W=n("./app/utils/tokenizeSearch.tsx"),K=function(e){return Array.isArray(e)&&e.length?e&&e.map((function(e){return e.toLowerCase()})).includes("true"):null},Q=function(e){var t=e.className,n=e.roles,r=e.query,a=e.onChange,o=(0,W.aI)(r),i={roles:o.getTagValues("role")||[],isInvited:K(o.getTagValues("isInvited")),ssoLinked:K(o.getTagValues("ssoLinked")),has2fa:K(o.getTagValues("has2fa"))},s=function(e){return function(){var t=new Set(o.getTagValues("role")?G()(o.getTagValues("role")):[]);t.has(e)?t.delete(e):t.add(e);var n=o.copy();n.setTagValues("role",G()(t)),a((0,W.gZ)(n))}},l=function(e){return function(t){var n=o.copy();n.removeTag(e),null!==t&&n.setTagValues(e,[Boolean(t).toString()]),a((0,W.gZ)(n))}};return(0,C.tZ)($,{className:t},(0,C.tZ)(ee,null,(0,A.t)("Filter By")),(0,C.tZ)(te,null,(0,C.tZ)(ne,null,(0,C.tZ)("h3",null,(0,A.t)("User Role")),n.map((function(e){var t=e.id,n=e.name;return(0,C.tZ)("label",{key:t},(0,C.tZ)(H.Z,{"data-test-id":"filter-role-".concat(t),checked:i.roles.includes(t),onChange:s(t)}),n)}))),(0,C.tZ)(ne,null,(0,C.tZ)("h3",null,(0,A.t)("Status")),(0,C.tZ)(X,{"data-test-id":"filter-isInvited",onChange:l("isInvited"),value:i.isInvited},(0,A.t)("Invited")),(0,C.tZ)(X,{"data-test-id":"filter-has2fa",onChange:l("has2fa"),value:i.has2fa},(0,A.t)("2FA")),(0,C.tZ)(X,{"data-test-id":"filter-ssoLinked",onChange:l("ssoLinked"),value:i.ssoLinked},(0,A.t)("SSO Linked")))))};Q.displayName="MembersFilter";var X=function(e){var t=e.onChange,n=e.value,r=e.children;return(0,C.tZ)("label",null,(0,C.tZ)(H.Z,{checked:null!==n,onChange:function(){return t(null===n||null)}}),r,(0,C.tZ)(J.Z,{isDisabled:null===n,isActive:!0===n,toggle:function(){return t(!n)}}))};X.displayName="BooleanFilter";var $=(0,z.Z)("div",{target:"ehjw1av0",label:"FilterContainer"})("border-radius:4px;background:",(function(e){return e.theme.background}),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border:1px solid ",(function(e){return e.theme.border}),";"),ee=(0,z.Z)("h2",{target:"ehjw1av1",label:"FilterHeader"})("border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid ",(function(e){return e.theme.border}),";background:",(function(e){return e.theme.backgroundSecondary}),";color:",(function(e){return e.theme.subText}),";text-transform:uppercase;font-size:",(function(e){return e.theme.fontSizeExtraSmall}),";padding:",(0,q.Z)(1),";margin:0;"),te=(0,z.Z)("div",{target:"ehjw1av2",label:"FilterLists"})("display:grid;grid-template-columns:100px max-content;grid-gap:",(0,q.Z)(3),";margin:",(0,q.Z)(1.5),";margin-top:",(0,q.Z)(.75),";"),ne=(0,z.Z)("div",{target:"ehjw1av3",label:"Filters"})("display:grid;grid-template-rows:repeat(auto-fit,minmax(0,max-content));grid-gap:",(0,q.Z)(1),";font-size:",(function(e){return e.theme.fontSizeMedium}),";h3{color:#000;font-size:",(function(e){return e.theme.fontSizeSmall}),";text-transform:uppercase;margin:",(0,q.Z)(1)," 0;}label{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:",(0,q.Z)(.75),";align-items:center;font-weight:normal;white-space:nowrap;height:",(0,q.Z)(2),";}input,label{margin:0;}");const re=Q;var ae=n("./app/components/avatar/userAvatar.tsx"),oe=n("./app/components/confirm.tsx"),ie=n("./app/components/links/link.tsx"),se=n("./app/components/loadingIndicator.tsx"),le=n("./app/utils/recreateRoute.tsx");var ue=function(e){y()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var a=S()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return w()(this,e)});function a(){var e;f()(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={busy:!1},e.handleRemove=function(){var t=e.props.onRemove;"function"==typeof t&&(e.setState({busy:!0}),t(e.props.member))},e.handleLeave=function(){var t=e.props.onLeave;"function"==typeof t&&(e.setState({busy:!0}),t(e.props.member))},e.handleSendInvite=function(){var t=e.props,n=t.onSendInvite,r=t.member;"function"==typeof n&&n(r)},e}return v()(a,[{key:"render",value:function(){var e=this.props,t=e.params,n=e.routes,r=e.member,a=e.orgName,o=e.status,i=e.requireLink,s=e.memberCanLeave,l=e.currentUser,u=e.canRemoveMembers,c=e.canAddMembers,d=r.id,p=r.flags,m=r.email,f=r.name,g=r.roleName,v=r.pending,b=r.expired,h=r.user,Z=!p["sso:linked"]&&i,y=l.email===m,x=!y,w=y,k=u&&!y,S=h&&h.has2fa,z=(0,le.Z)(d,{routes:n,params:t}),R="success"===o,N="loading"===o,_=v||Z;return(0,C.tZ)(de,{"data-test-id":m},(0,C.tZ)(me,null,(0,C.tZ)(ae.Z,{size:32,user:null!=h?h:{id:m,email:m}}),(0,C.tZ)(fe,{to:z},(0,C.tZ)("h5",{style:{margin:"0 0 3px"}},(0,C.tZ)(ge,null,f)),(0,C.tZ)(ve,null,m))),(0,C.tZ)("div",{"data-test-id":"member-role"},v?(0,C.tZ)(be,null,(0,C.tZ)(T.h,{size:"md"}),b?(0,A.t)("Expired Invite"):(0,A._N)("Invited [roleName]",{roleName:g})):g),(0,C.tZ)("div",{"data-test-id":"member-status"},_?(0,C.tZ)(j.Fragment,null,N&&(0,C.tZ)(he,null,(0,C.tZ)(se.Z,{mini:!0})),R&&(0,C.tZ)("span",null,"Sent!"),!N&&!R&&(0,C.tZ)(L.ZP,{disabled:!c,priority:"primary",size:"small",onClick:this.handleSendInvite},v?(0,A.t)("Resend invite"):(0,A.t)("Resend SSO link"))):(0,C.tZ)(Ze,null,S?(0,C.tZ)(T.DL,{isCircled:!0,color:"success"}):(0,C.tZ)(T.Gy,{color:"error"}),S?(0,A.t)("2FA Enabled"):(0,A.t)("2FA Not Enabled"))),x||w?(0,C.tZ)("div",null,x&&k&&(0,C.tZ)(oe.Z,{message:(0,A._N)("Are you sure you want to remove [name] from [orgName]?",{name:f,orgName:a}),onConfirm:this.handleRemove},(0,C.tZ)(L.ZP,{"data-test-id":"remove",icon:(0,C.tZ)(T.JZ,{isCircled:!0,size:"xs"}),size:"small",busy:this.state.busy},(0,A.t)("Remove"))),x&&!k&&(0,C.tZ)(L.ZP,{disabled:!0,size:"small",title:(0,A.t)("You do not have access to remove members"),icon:(0,C.tZ)(T.JZ,{isCircled:!0,size:"xs"})},(0,A.t)("Remove")),w&&s&&(0,C.tZ)(oe.Z,{message:(0,A._N)("Are you sure you want to leave [orgName]?",{orgName:a}),onConfirm:this.handleLeave},(0,C.tZ)(L.ZP,{priority:"danger",size:"small",icon:(0,C.tZ)(T.bM,{size:"xs"})},(0,A.t)("Leave"))),w&&!s&&(0,C.tZ)(L.ZP,{size:"small",icon:(0,C.tZ)(T.bM,{size:"xs"}),disabled:!0,title:(0,A.t)("You cannot leave this organization as you are the only organization owner.")},(0,A.t)("Leave"))):null)}}]),a}(j.PureComponent);ue.displayName="OrganizationMemberRow";var ce,de=(0,z.Z)(I.Lv,{target:"ec4wqui0",label:"StyledPanelItem"})("display:grid;grid-template-columns:minmax(150px,2fr) minmax(90px,1fr) minmax(120px,1fr) 90px;grid-gap:",(0,q.Z)(2),";align-items:center;"),pe=(0,z.Z)("div",{target:"ec4wqui1",label:"Section"})("display:inline-grid;grid-template-columns:max-content auto;grid-gap:",(0,q.Z)(1),";align-items:center;"),me=(0,z.Z)(pe,{target:"ec4wqui2",label:"MemberHeading"})(),fe=(0,z.Z)(ie.Z,{target:"ec4wqui3",label:"MemberDescription"})({name:"i6bazn",styles:"overflow:hidden;"}),ge=(0,z.Z)("div",{target:"ec4wqui4",label:"UserName"})("display:block;font-size:",(function(e){return e.theme.fontSizeLarge}),";overflow:hidden;text-overflow:ellipsis;"),ve=(0,z.Z)("div",{target:"ec4wqui5",label:"Email"})("color:",(function(e){return e.theme.textColor}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";overflow:hidden;text-overflow:ellipsis;"),be=(0,z.Z)(pe,{target:"ec4wqui6",label:"InvitedRole"})(),he=(0,z.Z)("div",{target:"ec4wqui7",label:"LoadingContainer"})("margin-top:0;margin-bottom:",(0,q.Z)(1.5),";"),Ze=(0,z.Z)(pe,{target:"ec4wqui8",label:"AuthStatus"})();function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(e){y()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S()(t);if(n){var a=S()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return w()(this,e)});function o(){var e;f()(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).removeMember=function(){var t=p()(c().mark((function t(n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.params.orgId,t.next=3,e.api.requestPromise("/organizations/".concat(r,"/members/").concat(n,"/"),{method:"DELETE",data:{}});case 3:e.setState((function(e){return{members:e.members.filter((function(e){return e.id!==n}))}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRemove=function(){var t=p()(c().mark((function t(n){var r,a,o,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=n.name,o=e.props.organization,i=o.slug,t.prev=3,t.next=6,e.removeMember(r);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),(0,R.Iw)((0,A._N)("Error removing [name] from [orgName]",{name:a,orgName:i})),t.abrupt("return");case 12:(0,R.S9)((0,A._N)("Removed [name] from [orgName]",{name:a,orgName:i}));case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLeave=function(){var t=p()(c().mark((function t(n){var r,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=e.props.organization,o=a.slug,t.prev=3,t.next=6,e.removeMember(r);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),(0,R.Iw)((0,A._N)("Error leaving [orgName]",{orgName:o})),t.abrupt("return");case 12:(0,_.mx)({orgId:o,removeOrg:!0}),(0,R.S9)((0,A._N)("You left [orgName]",{orgName:o}));case 14:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSendInvite=function(){var t=p()(c().mark((function t(n){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=n.expired,e.setState((function(e){return{invited:xe(xe({},e.invited),{},l()({},r,"loading"))}})),t.prev=2,t.next=5,(0,N.R_)(e.api,{orgId:e.props.params.orgId,memberId:r,regenerate:a});case 5:t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(2),e.setState((function(e){return{invited:xe(xe({},e.invited),{},l()({},r,null))}})),(0,R.Iw)((0,A.t)("Error sending invite")),t.abrupt("return");case 12:e.setState((function(e){return{invited:xe(xe({},e.invited),{},l()({},r,"success"))}}));case 13:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return v()(o,[{key:"getDefaultState",value:function(){return xe(xe({},h()(S()(o.prototype),"getDefaultState",this).call(this)),{},{members:[],invited:{}})}},{key:"getEndpoints",value:function(){var e=this.props.params.orgId;return[["members","/organizations/".concat(e,"/members/"),{},{paginate:!0}],["member","/organizations/".concat(e,"/members/me/"),{},{allowError:function(e){return 404===e.status}}],["authProvider","/organizations/".concat(e,"/auth-provider/"),{},{allowError:function(e){return 403===e.status}}]]}},{key:"getTitle",value:function(){var e=this.props.organization.slug;return(0,F.Z)((0,A.t)("Members"),e,!1)}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.params,r=t.organization,o=t.routes,s=this.state,l=s.membersPageLinks,u=s.members,c=s.member,d=r.name,p=r.access,m=p.includes("member:write"),f=p.includes("member:admin"),g=E.Z.get("user"),v=!u.find((function(e){var t=e.role,n=e.email,r=e.pending;return"owner"===t&&n!==g.email&&!r})),b=!!this.state.authProvider&&this.state.authProvider.require_link,h=function(e){var t=e.defaultSearchBar,n=e.value,r=e.handleChange;return(0,C.tZ)(ke,null,t,(0,C.tZ)(O.Z,{closeOnEscape:!0},(function(e){var t,a=e.getActorProps,o=e.isOpen;return(0,C.tZ)(Se,null,(0,C.tZ)(L.ZP,i()({icon:(0,C.tZ)(T.OP,{size:"xs"})},a({})),(0,A.t)("Search Filters")),o&&(0,C.tZ)(ze,{roles:null!==(t=null==c?void 0:c.roles)&&void 0!==t?t:M.v6,query:n,onChange:function(e){return r(e)}}))})))};return(0,C.tZ)(j.Fragment,null,(0,C.tZ)(C.ms,null,(function(t){var n=t.css;return e.renderSearchInput({updateRoute:!0,placeholder:(0,A.t)("Search Members"),children:h,className:n(ce||(ce=a()(["\n                font-size: ",";\n              "])),B.ZP.fontSizeMedium)})})),(0,C.tZ)(I.s_,{"data-test-id":"org-member-list"},(0,C.tZ)(I.V9,null,(0,A.t)("Members")),(0,C.tZ)(I.N,null,u.map((function(t){return(0,C.tZ)(ue,{routes:o,params:n,key:t.id,member:t,status:e.state.invited[t.id],orgName:d,memberCanLeave:!v,currentUser:g,canRemoveMembers:f,canAddMembers:m,requireLink:b,onSendInvite:e.handleSendInvite,onRemove:e.handleRemove,onLeave:e.handleLeave})})),0===u.length&&(0,C.tZ)(U.Z,null,(0,A.t)("No members found.")))),(0,C.tZ)(P.Z,{pageLinks:l}))}}]),o}(D.Z),ke=(0,z.Z)("div",{target:"e1aebs7b0",label:"SearchWrapper"})("display:grid;grid-template-columns:1fr max-content;grid-gap:",(0,q.Z)(1.5),";margin-bottom:",(0,q.Z)(3),";position:relative;"),Se=(0,z.Z)("div",{target:"e1aebs7b1",label:"FilterWrapper"})({name:"79elbk",styles:"position:relative;"}),ze=(0,z.Z)(re,{target:"e1aebs7b2",label:"StyledMembersFilter"})("position:absolute;right:0;top:42px;z-index:",(function(e){return e.theme.zIndex.dropdown}),";&:before,&:after{position:absolute;top:-16px;right:32px;content:'';height:16px;width:16px;border:8px solid transparent;border-bottom-color:",(function(e){return e.theme.backgroundSecondary}),";}&:before{margin-top:-1px;border-bottom-color:",(function(e){return e.theme.border}),";}");const je=(0,V.Z)(we)}}]);
//# sourceMappingURL=OrganizationMembersList.js.map