{"version":3,"sources":["webpack:///./app/components/well.tsx","webpack:///./app/components/avatarCropper.tsx","webpack:///./app/components/avatarChooser.tsx","webpack:///./app/views/settings/components/settingsPageHeader.tsx"],"names":["p","theme","border","backgroundSecondary","hasImage","centered","resizerPositions","nw","ne","se","sw","AvatarCropper","state","file","objectURL","mousePosition","pageX","pageY","resizeDimensions","top","left","size","resizeDirection","React","canvas","image","cropContainer","MIN_DIMENSION","MAX_DIMENSION","ALLOWED_MIMETYPES","onSelectFile","ev","target","files","test","type","revokeObjectUrl","updateDataUrlState","props","window","URL","createObjectURL","setState","savedDataUrl","addErrorMessage","t","revokeObjectURL","onImageLoad","error","validateImage","current","Math","min","clientHeight","clientWidth","drawToCanvas","updateDimensions","onMouseDown","preventDefault","document","addEventListener","onMouseUp","removeEventListener","startResize","direction","stopPropagation","updateSize","stopResize","yDiff","xDiff","getNewDimensions","getDiffNW","getDiffNE","getDiffSW","getDiffSE","container","oldDimensions","diff","toUpperCase","height","width","editingTop","editingLeft","newDimensions","maxSize","uploadClick","click","this","img","naturalWidth","naturalHeight","tct","ratio","getContext","drawImage","dataUrl","toDataURL","model","uuid","avatar","avatarUuid","photoUrl","AVATAR_URL_MAP","src","imageSrc","style","ImageCropper","CropContainer","ref","onLoad","onDragStart","e","Cropper","Object","keys","map","pos","Resizer","key","position","bind","upload","onClick","uploader","HiddenCanvas","renderImageCrop","className","UploadInput","accept","onChange","background","gray300","AvatarChooser","hasError","handleSaveSettings","endpoint","api","data","avatarType","undefined","avatar_photo","split","avatar_type","request","method","success","resp","handleSuccess","handleError","handleChange","id","updateState","nextProps","msg","onSave","addSuccessMessage","allowGravatar","allowUpload","allowLetter","isUser","disabled","isLetter","isTeam","isOrganization","choices","push","AvatarForm","AvatarGroup","inline","flex","value","label","gravatar","user","organization","team","AvatarUploadSection","href","dataState","AvatarSubmit","priority","defaultProps","withApi","UnstyledSettingsPageHeader","icon","title","subtitle","action","tabs","noTitleStyles","body","isNarrow","TitleAndActions","TitleWrapper","Icon","Title","styled","Subtitle","Action","BodyWrapper","TabsWrapper","space","gray400","fontSizeLarge","SettingsPageHeader"],"mappings":"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","file":"app_components_avatarChooser_tsx-app_views_settings_components_settingsPageHeader_tsx.js","sourcesContent":["import React from 'react';\nimport styled from '@emotion/styled';\n\ntype Props = {\n  hasImage?: boolean;\n  centered?: boolean;\n  children: React.ReactNode;\n  theme?: any;\n};\n\ntype WellProps = Omit<React.HTMLProps<HTMLDivElement>, keyof Props> & Props;\n\nconst Well = styled('div')<WellProps>`\n  border: 1px solid ${p => p.theme.border};\n  box-shadow: none;\n  background: ${p => p.theme.backgroundSecondary};\n  padding: ${p => (p.hasImage ? '80px 30px' : '15px 20px')};\n  margin-bottom: 20px;\n  border-radius: 3px;\n  ${p => p.centered && 'text-align: center'};\n`;\n\nexport default Well;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage} from 'app/actionCreators/indicator';\nimport Well from 'app/components/well';\nimport {AVATAR_URL_MAP} from 'app/constants';\nimport {t, tct} from 'app/locale';\nimport {AvatarUser} from 'app/types';\n\nconst resizerPositions = {\n  nw: ['top', 'left'],\n  ne: ['top', 'right'],\n  se: ['bottom', 'right'],\n  sw: ['bottom', 'left'],\n};\n\ntype Position = keyof typeof resizerPositions;\n\ntype Model = Pick<AvatarUser, 'avatar'>;\n\ntype Props = {\n  model: Model;\n  updateDataUrlState: (opts: {savedDataUrl?: string | null; dataUrl?: string}) => void;\n  type: 'user' | 'team' | 'organization' | 'project';\n  savedDataUrl?: string;\n};\n\ntype State = {\n  file: File | null;\n  objectURL: string | null;\n  mousePosition: {pageX: number; pageY: number};\n  resizeDimensions: {top: number; left: number; size: number};\n  resizeDirection: Position | null;\n};\n\nclass AvatarCropper extends React.Component<Props, State> {\n  state: State = {\n    file: null,\n    objectURL: null,\n    mousePosition: {pageX: 0, pageY: 0},\n    resizeDimensions: {top: 0, left: 0, size: 0},\n    resizeDirection: null,\n  };\n\n  componentWillUnmount() {\n    this.revokeObjectUrl();\n  }\n\n  file = React.createRef<HTMLInputElement>();\n  canvas = React.createRef<HTMLCanvasElement>();\n  image = React.createRef<HTMLImageElement>();\n  cropContainer = React.createRef<HTMLDivElement>();\n\n  // These values must be synced with the avatar endpoint in backend.\n  MIN_DIMENSION = 256;\n  MAX_DIMENSION = 1024;\n  ALLOWED_MIMETYPES = 'image/gif,image/jpeg,image/png';\n\n  onSelectFile = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    const file = ev.target.files && ev.target.files[0];\n\n    // No file selected (e.g. user clicked \"cancel\")\n    if (!file) {\n      return;\n    }\n\n    if (!/^image\\//.test(file.type)) {\n      addErrorMessage(t('That is not a supported file type.'));\n      return;\n    }\n\n    this.revokeObjectUrl();\n\n    const {updateDataUrlState} = this.props;\n    const objectURL = window.URL.createObjectURL(file);\n    this.setState({file, objectURL}, () => updateDataUrlState({savedDataUrl: null}));\n  };\n\n  revokeObjectUrl = () =>\n    this.state.objectURL && window.URL.revokeObjectURL(this.state.objectURL);\n\n  onImageLoad = () => {\n    const error = this.validateImage();\n    if (error) {\n      this.revokeObjectUrl();\n      this.setState({objectURL: null});\n      addErrorMessage(error);\n      return;\n    }\n\n    const image = this.image.current;\n    if (!image) {\n      return;\n    }\n\n    const dimension = Math.min(image.clientHeight, image.clientWidth);\n    const state = {resizeDimensions: {size: dimension, top: 0, left: 0}};\n\n    this.setState(state, this.drawToCanvas);\n  };\n\n  updateDimensions = (ev: MouseEvent) => {\n    const cropContainer = this.cropContainer.current;\n    if (!cropContainer) {\n      return;\n    }\n\n    const {mousePosition, resizeDimensions} = this.state;\n\n    let pageY = ev.pageY;\n    let pageX = ev.pageX;\n    let top = resizeDimensions.top + (pageY - mousePosition.pageY);\n    let left = resizeDimensions.left + (pageX - mousePosition.pageX);\n\n    if (top < 0) {\n      top = 0;\n      pageY = mousePosition.pageY;\n    } else if (top + resizeDimensions.size > cropContainer.clientHeight) {\n      top = cropContainer.clientHeight - resizeDimensions.size;\n      pageY = mousePosition.pageY;\n    }\n\n    if (left < 0) {\n      left = 0;\n      pageX = mousePosition.pageX;\n    } else if (left + resizeDimensions.size > cropContainer.clientWidth) {\n      left = cropContainer.clientWidth - resizeDimensions.size;\n      pageX = mousePosition.pageX;\n    }\n\n    this.setState(state => ({\n      resizeDimensions: {...state.resizeDimensions, top, left},\n      mousePosition: {pageX, pageY},\n    }));\n  };\n\n  onMouseDown = (ev: React.MouseEvent<HTMLDivElement>) => {\n    ev.preventDefault();\n    this.setState({mousePosition: {pageY: ev.pageY, pageX: ev.pageX}});\n\n    document.addEventListener('mousemove', this.updateDimensions);\n    document.addEventListener('mouseup', this.onMouseUp);\n  };\n\n  onMouseUp = (ev: MouseEvent) => {\n    ev.preventDefault();\n    document.removeEventListener('mousemove', this.updateDimensions);\n    document.removeEventListener('mouseup', this.onMouseUp);\n    this.drawToCanvas();\n  };\n\n  startResize = (direction: Position, ev: React.MouseEvent<HTMLDivElement>) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    document.addEventListener('mousemove', this.updateSize);\n    document.addEventListener('mouseup', this.stopResize);\n\n    this.setState({\n      resizeDirection: direction,\n      mousePosition: {pageY: ev.pageY, pageX: ev.pageX},\n    });\n  };\n\n  stopResize = (ev: MouseEvent) => {\n    ev.stopPropagation();\n    ev.preventDefault();\n    document.removeEventListener('mousemove', this.updateSize);\n    document.removeEventListener('mouseup', this.stopResize);\n\n    this.setState({resizeDirection: null});\n    this.drawToCanvas();\n  };\n\n  updateSize = (ev: MouseEvent) => {\n    const cropContainer = this.cropContainer.current;\n    if (!cropContainer) {\n      return;\n    }\n\n    const {mousePosition} = this.state;\n\n    const yDiff = ev.pageY - mousePosition.pageY;\n    const xDiff = ev.pageX - mousePosition.pageX;\n\n    this.setState({\n      resizeDimensions: this.getNewDimensions(cropContainer, yDiff, xDiff),\n      mousePosition: {pageX: ev.pageX, pageY: ev.pageY},\n    });\n  };\n\n  // Normalize diff across dimensions so that negative diffs are always making\n  // the cropper smaller and positive ones are making the cropper larger\n  getDiffNW = (yDiff: number, xDiff: number) =>\n    (yDiff - yDiff * 2 + (xDiff - xDiff * 2)) / 2;\n\n  getDiffNE = (yDiff: number, xDiff: number) => (yDiff - yDiff * 2 + xDiff) / 2;\n\n  getDiffSW = (yDiff: number, xDiff: number) => (yDiff + (xDiff - xDiff * 2)) / 2;\n\n  getDiffSE = (yDiff: number, xDiff: number) => (yDiff + xDiff) / 2;\n\n  getNewDimensions = (container: HTMLDivElement, yDiff: number, xDiff: number) => {\n    const {resizeDimensions: oldDimensions, resizeDirection} = this.state;\n\n    const diff = this['getDiff' + resizeDirection!.toUpperCase()](yDiff, xDiff);\n\n    let height = container.clientHeight - oldDimensions.top;\n    let width = container.clientWidth - oldDimensions.left;\n\n    // Depending on the direction, we update different dimensions:\n    // nw: size, top, left\n    // ne: size, top\n    // sw: size, left\n    // se: size\n    const editingTop = resizeDirection === 'nw' || resizeDirection === 'ne';\n    const editingLeft = resizeDirection === 'nw' || resizeDirection === 'sw';\n\n    const newDimensions = {\n      top: 0,\n      left: 0,\n      size: oldDimensions.size + diff,\n    };\n\n    if (editingTop) {\n      newDimensions.top = oldDimensions.top - diff;\n      height = container.clientHeight - newDimensions.top;\n    }\n\n    if (editingLeft) {\n      newDimensions.left = oldDimensions.left - diff;\n      width = container.clientWidth - newDimensions.left;\n    }\n\n    if (newDimensions.top < 0) {\n      newDimensions.size = newDimensions.size + newDimensions.top;\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left - newDimensions.top;\n      }\n      newDimensions.top = 0;\n    }\n\n    if (newDimensions.left < 0) {\n      newDimensions.size = newDimensions.size + newDimensions.left;\n      if (editingTop) {\n        newDimensions.top = newDimensions.top - newDimensions.left;\n      }\n      newDimensions.left = 0;\n    }\n\n    const maxSize = Math.min(width, height);\n    if (newDimensions.size > maxSize) {\n      if (editingTop) {\n        newDimensions.top = newDimensions.top + newDimensions.size - maxSize;\n      }\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left + newDimensions.size - maxSize;\n      }\n      newDimensions.size = maxSize;\n    } else if (newDimensions.size < this.MIN_DIMENSION) {\n      if (editingTop) {\n        newDimensions.top = newDimensions.top + newDimensions.size - this.MIN_DIMENSION;\n      }\n      if (editingLeft) {\n        newDimensions.left = newDimensions.left + newDimensions.size - this.MIN_DIMENSION;\n      }\n      newDimensions.size = this.MIN_DIMENSION;\n    }\n\n    return {...oldDimensions, ...newDimensions};\n  };\n\n  validateImage() {\n    const img = this.image.current;\n\n    if (!img) {\n      return null;\n    }\n\n    if (img.naturalWidth < this.MIN_DIMENSION || img.naturalHeight < this.MIN_DIMENSION) {\n      return tct('Please upload an image larger than [size]px by [size]px.', {\n        size: this.MIN_DIMENSION - 1,\n      });\n    }\n\n    if (img.naturalWidth > this.MAX_DIMENSION || img.naturalHeight > this.MAX_DIMENSION) {\n      return tct('Please upload an image smaller than [size]px by [size]px.', {\n        size: this.MAX_DIMENSION,\n      });\n    }\n\n    return null;\n  }\n\n  drawToCanvas() {\n    const canvas = this.canvas.current;\n    if (!canvas) {\n      return;\n    }\n\n    const image = this.image.current;\n    if (!image) {\n      return;\n    }\n\n    const {left, top, size} = this.state.resizeDimensions;\n    // Calculate difference between natural dimensions and rendered dimensions\n    const ratio =\n      (image.naturalHeight / image.clientHeight +\n        image.naturalWidth / image.clientWidth) /\n      2;\n    canvas.width = size * ratio;\n    canvas.height = size * ratio;\n\n    canvas\n      .getContext('2d')!\n      .drawImage(\n        image,\n        left * ratio,\n        top * ratio,\n        size * ratio,\n        size * ratio,\n        0,\n        0,\n        size * ratio,\n        size * ratio\n      );\n\n    this.props.updateDataUrlState({dataUrl: canvas.toDataURL()});\n  }\n\n  get imageSrc() {\n    const {savedDataUrl, model, type} = this.props;\n    const uuid = model.avatar?.avatarUuid;\n    const photoUrl = uuid && `/${AVATAR_URL_MAP[type] || 'avatar'}/${uuid}/`;\n\n    return savedDataUrl || this.state.objectURL || photoUrl;\n  }\n\n  uploadClick = (ev: React.MouseEvent<HTMLAnchorElement>) => {\n    ev.preventDefault();\n    this.file.current && this.file.current.click();\n  };\n\n  renderImageCrop() {\n    const src = this.imageSrc;\n    if (!src) {\n      return null;\n    }\n\n    const {resizeDimensions, resizeDirection} = this.state;\n    const style = {\n      top: resizeDimensions.top,\n      left: resizeDimensions.left,\n      width: resizeDimensions.size,\n      height: resizeDimensions.size,\n    };\n\n    return (\n      <ImageCropper resizeDirection={resizeDirection}>\n        <CropContainer ref={this.cropContainer}>\n          <img\n            ref={this.image}\n            src={src}\n            onLoad={this.onImageLoad}\n            onDragStart={e => e.preventDefault()}\n          />\n          <Cropper style={style} onMouseDown={this.onMouseDown}>\n            {Object.keys(resizerPositions).map(pos => (\n              <Resizer\n                key={pos}\n                position={pos as Position}\n                onMouseDown={this.startResize.bind(this, pos)}\n              />\n            ))}\n          </Cropper>\n        </CropContainer>\n      </ImageCropper>\n    );\n  }\n\n  render() {\n    const src = this.imageSrc;\n\n    const upload = <a onClick={this.uploadClick} />;\n    const uploader = (\n      <Well hasImage centered>\n        <p>{tct('[upload:Upload a photo] to get started.', {upload})}</p>\n      </Well>\n    );\n\n    return (\n      <React.Fragment>\n        {!src && uploader}\n        {src && <HiddenCanvas ref={this.canvas} />}\n        {this.renderImageCrop()}\n        <div className=\"form-group\">\n          {src && <a onClick={this.uploadClick}>{t('Change Photo')}</a>}\n          <UploadInput\n            ref={this.file}\n            type=\"file\"\n            accept={this.ALLOWED_MIMETYPES}\n            onChange={this.onSelectFile}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AvatarCropper;\n\nconst UploadInput = styled('input')`\n  position: absolute;\n  opacity: 0;\n`;\n\nconst ImageCropper = styled('div')<{resizeDirection: Position | null}>`\n  cursor: ${p => (p.resizeDirection ? `${p.resizeDirection}-resize` : 'default')};\n  text-align: center;\n  margin-bottom: 20px;\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  background-color: ${p => p.theme.background};\n  background-image: linear-gradient(\n      45deg,\n      ${p => p.theme.backgroundSecondary} 25%,\n      rgba(0, 0, 0, 0) 25%\n    ),\n    linear-gradient(-45deg, ${p => p.theme.backgroundSecondary} 25%, rgba(0, 0, 0, 0) 25%),\n    linear-gradient(45deg, rgba(0, 0, 0, 0) 75%, ${p => p.theme.backgroundSecondary} 75%),\n    linear-gradient(-45deg, rgba(0, 0, 0, 0) 75%, ${p => p.theme.backgroundSecondary} 75%);\n`;\n\nconst CropContainer = styled('div')`\n  display: inline-block;\n  position: relative;\n  max-width: 100%;\n`;\n\nconst Cropper = styled('div')`\n  position: absolute;\n  border: 2px dashed ${p => p.theme.gray300};\n`;\n\nconst Resizer = styled('div')<{position: Position}>`\n  border-radius: 5px;\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  background-color: ${p => p.theme.gray300};\n  cursor: ${p => `${p.position}-resize`};\n  ${p => resizerPositions[p.position].map(pos => `${pos}: -5px;`)}\n`;\n\nconst HiddenCanvas = styled('canvas')`\n  display: none;\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport {Client} from 'app/api';\nimport Avatar from 'app/components/avatar';\nimport AvatarCropper from 'app/components/avatarCropper';\nimport Button from 'app/components/button';\nimport ExternalLink from 'app/components/links/externalLink';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport {Panel, PanelBody, PanelHeader} from 'app/components/panels';\nimport Well from 'app/components/well';\nimport {t} from 'app/locale';\nimport {AvatarUser, Organization, Team} from 'app/types';\nimport withApi from 'app/utils/withApi';\nimport RadioGroup from 'app/views/settings/components/forms/controls/radioGroup';\n\ntype Model = Pick<AvatarUser, 'avatar'>;\ntype AvatarType = Required<Model>['avatar']['avatarType'];\ntype AvatarChooserType = 'user' | 'team' | 'organization';\n\ntype DefaultProps = {\n  onSave: (model: Model) => void;\n  allowGravatar?: boolean;\n  allowLetter?: boolean;\n  allowUpload?: boolean;\n  type?: AvatarChooserType;\n};\n\ntype Props = {\n  api: Client;\n  endpoint: string;\n  model: Model;\n  disabled?: boolean;\n  savedDataUrl?: string;\n  isUser?: boolean;\n} & DefaultProps;\n\ntype State = {\n  model: Model;\n  hasError: boolean;\n  savedDataUrl?: string | null;\n  dataUrl?: string | null;\n};\n\nclass AvatarChooser extends React.Component<Props, State> {\n  static defaultProps: DefaultProps = {\n    allowGravatar: true,\n    allowLetter: true,\n    allowUpload: true,\n    type: 'user',\n    onSave: () => {},\n  };\n\n  state: State = {\n    model: this.props.model,\n    savedDataUrl: null,\n    dataUrl: null,\n    hasError: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    // Update local state if defined in props\n    if (typeof nextProps.model !== 'undefined') {\n      this.setState({model: nextProps.model});\n    }\n  }\n\n  updateState(model: Model) {\n    this.setState({model});\n  }\n\n  handleError(msg: string) {\n    addErrorMessage(msg);\n  }\n\n  handleSuccess(model: Model) {\n    const {onSave} = this.props;\n    this.setState({model});\n    onSave(model);\n    addSuccessMessage(t('Successfully saved avatar preferences'));\n  }\n\n  handleSaveSettings = (ev: React.MouseEvent) => {\n    const {endpoint, api} = this.props;\n    const {model, dataUrl} = this.state;\n    ev.preventDefault();\n    let data = {};\n    const avatarType = model && model.avatar ? model.avatar.avatarType : undefined;\n    const avatarPhoto = dataUrl ? dataUrl.split(',')[1] : undefined;\n\n    data = {\n      avatar_photo: avatarPhoto,\n      avatar_type: avatarType,\n    };\n\n    api.request(endpoint, {\n      method: 'PUT',\n      data,\n      success: resp => {\n        this.setState({savedDataUrl: this.state.dataUrl});\n        this.handleSuccess(resp);\n      },\n      error: this.handleError.bind(this, 'There was an error saving your preferences.'),\n    });\n  };\n\n  handleChange = (id: AvatarType) =>\n    this.updateState({\n      ...this.state.model,\n      avatar: {avatarUuid: this.state.model.avatar?.avatarUuid ?? '', avatarType: id},\n    });\n\n  render() {\n    const {\n      allowGravatar,\n      allowUpload,\n      allowLetter,\n      savedDataUrl,\n      type,\n      isUser,\n      disabled,\n    } = this.props;\n    const {hasError, model} = this.state;\n\n    if (hasError) {\n      return <LoadingError />;\n    }\n    if (!model) {\n      return <LoadingIndicator />;\n    }\n\n    const avatarType = model.avatar?.avatarType ?? 'letter_avatar';\n    const isLetter = avatarType === 'letter_avatar';\n\n    const isTeam = type === 'team';\n    const isOrganization = type === 'organization';\n    const choices: [AvatarType, string][] = [];\n\n    if (allowLetter) {\n      choices.push(['letter_avatar', t('Use initials')]);\n    }\n    if (allowUpload) {\n      choices.push(['upload', t('Upload an image')]);\n    }\n    if (allowGravatar) {\n      choices.push(['gravatar', t('Use Gravatar')]);\n    }\n\n    return (\n      <Panel>\n        <PanelHeader>{t('Avatar')}</PanelHeader>\n        <PanelBody>\n          <AvatarForm>\n            <AvatarGroup inline={isLetter}>\n              <RadioGroup\n                style={{flex: 1}}\n                choices={choices}\n                value={avatarType}\n                label={t('Avatar Type')}\n                onChange={this.handleChange}\n                disabled={disabled}\n              />\n              {isLetter && (\n                <Avatar\n                  gravatar={false}\n                  style={{width: 90, height: 90}}\n                  user={isUser ? (model as AvatarUser) : undefined}\n                  organization={isOrganization ? (model as Organization) : undefined}\n                  team={isTeam ? (model as Team) : undefined}\n                />\n              )}\n            </AvatarGroup>\n\n            <AvatarUploadSection>\n              {allowGravatar && avatarType === 'gravatar' && (\n                <Well>\n                  {t('Gravatars are managed through ')}\n                  <ExternalLink href=\"http://gravatar.com\">Gravatar.com</ExternalLink>\n                </Well>\n              )}\n\n              {model.avatar && avatarType === 'upload' && (\n                <AvatarCropper\n                  {...this.props}\n                  type={type!}\n                  model={model}\n                  savedDataUrl={savedDataUrl}\n                  updateDataUrlState={dataState => this.setState(dataState)}\n                />\n              )}\n              <AvatarSubmit className=\"form-actions\">\n                <Button\n                  type=\"button\"\n                  priority=\"primary\"\n                  onClick={this.handleSaveSettings}\n                  disabled={disabled}\n                >\n                  {t('Save Avatar')}\n                </Button>\n              </AvatarSubmit>\n            </AvatarUploadSection>\n          </AvatarForm>\n        </PanelBody>\n      </Panel>\n    );\n  }\n}\n\nconst AvatarGroup = styled('div')<{inline: boolean}>`\n  display: flex;\n  flex-direction: ${p => (p.inline ? 'row' : 'column')};\n`;\n\nconst AvatarForm = styled('div')`\n  line-height: 1.5em;\n  padding: 1em 1.25em;\n`;\n\nconst AvatarSubmit = styled('fieldset')`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 1em;\n`;\n\nconst AvatarUploadSection = styled('div')`\n  margin-top: 1em;\n`;\n\nexport default withApi(AvatarChooser);\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {HeaderTitle} from 'app/styles/organization';\nimport space from 'app/styles/space';\n\ntype Props = {\n  // Icon left of title\n  icon?: React.ReactNode;\n\n  // The title\n  title: React.ReactNode;\n  subtitle?: React.ReactNode;\n\n  // Disables font styles in the title. Allows for more custom titles.\n  noTitleStyles?: boolean;\n  className?: string;\n\n  // CTA button\n  action?: React.ReactNode;\n\n  body?: React.ReactNode;\n\n  tabs?: React.ReactNode;\n};\n\nclass UnstyledSettingsPageHeader extends React.Component<Props> {\n  static defaultProps = {\n    noTitleStyles: false,\n  };\n\n  render() {\n    const {\n      icon,\n      title,\n      subtitle,\n      action,\n      tabs,\n      noTitleStyles,\n      body,\n      ...props\n    } = this.props;\n\n    // If Header is narrow, use align-items to center <Action>.\n    // Otherwise, use a fixed margin to prevent an odd alignment.\n    // This is needed as Actions could be a button or a dropdown.\n    const isNarrow = !subtitle;\n\n    return (\n      <div {...props}>\n        <TitleAndActions isNarrow={isNarrow}>\n          <TitleWrapper>\n            {icon && <Icon>{icon}</Icon>}\n            {title && (\n              <Title tabs={tabs} styled={noTitleStyles}>\n                <HeaderTitle>{title}</HeaderTitle>\n                {subtitle && <Subtitle>{subtitle}</Subtitle>}\n              </Title>\n            )}\n          </TitleWrapper>\n          {action && <Action isNarrow={isNarrow}>{action}</Action>}\n        </TitleAndActions>\n\n        {body && <BodyWrapper>{body}</BodyWrapper>}\n        {tabs && <TabsWrapper>{tabs}</TabsWrapper>}\n      </div>\n    );\n  }\n}\n\ntype TitleProps = {\n  styled?: boolean;\n  tabs?: React.ReactNode;\n};\n\nconst TitleAndActions = styled('div')<{isNarrow?: boolean}>`\n  display: flex;\n  align-items: ${p => (p.isNarrow ? 'center' : 'flex-start')};\n`;\nconst TitleWrapper = styled('div')`\n  flex: 1;\n`;\n\nconst Title = styled('div')<TitleProps & React.HTMLProps<HTMLDivElement>>`\n  ${p => !p.styled && `font-size: 20px; font-weight: 600;`};\n  margin: ${space(4)} ${space(2)} ${space(3)} 0;\n`;\nconst Subtitle = styled('div')`\n  color: ${p => p.theme.gray400};\n  font-weight: 400;\n  font-size: ${p => p.theme.fontSizeLarge};\n  padding: ${space(1.5)} 0 0;\n`;\n\nconst Icon = styled('div')`\n  margin-right: ${space(1)};\n`;\n\nconst Action = styled('div')<{isNarrow?: boolean}>`\n  margin-top: ${p => (p.isNarrow ? '0' : space(4))};\n`;\n\nconst SettingsPageHeader = styled(UnstyledSettingsPageHeader)<\n  Omit<React.HTMLProps<HTMLDivElement>, keyof Props> & Props\n>`\n  font-size: 14px;\n  margin-top: -${space(4)};\n`;\n\nconst BodyWrapper = styled('div')`\n  flex: 1;\n  margin: 0 0 ${space(3)};\n`;\nconst TabsWrapper = styled('div')`\n  flex: 1;\n  margin: 0; /* sentry/components/navTabs has added margin */\n`;\n\nexport default SettingsPageHeader;\n"],"sourceRoot":""}