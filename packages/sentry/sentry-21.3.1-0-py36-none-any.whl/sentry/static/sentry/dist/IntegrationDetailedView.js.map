{"version":3,"sources":["webpack:///./app/views/organizationIntegrations/addIntegration.tsx","webpack:///./app/views/organizationIntegrations/addIntegrationButton.tsx","webpack:///./app/views/organizationIntegrations/installedIntegration.tsx","webpack:///./app/views/organizationIntegrations/integrationDetailedView.tsx","webpack:///./app/views/organizationIntegrations/integrationIcon.tsx","webpack:///./app/views/organizationIntegrations/integrationItem.tsx"],"names":["AddIntegration","dialog","openDialog","urlParams","trackIntegrationEvent","integration","props","provider","key","integration_type","analyticsParams","organization","setupDialog","url","width","height","computeCenteredWindow","left","top","query","account","modalParams","installUrl","queryString","opts","window","open","focus","didReceiveMessage","message","origin","document","location","source","data","success","addSuccessMessage","t","name","onInstall","addErrorMessage","error","addEventListener","this","removeEventListener","close","screenLeft","undefined","screenX","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","children","React","AddIntegrationButton","buttonText","onAddIntegration","reinstall","buttonProps","label","metadata","noun","disabled","canAdd","title","onClick","InstalledIntegration","handleUninstallClick","aspects","removal_dialog","body","actionText","onRemove","getRemovalBodyAndText","type","icon","size","confirmText","onConfirm","handleRemove","disable_dialog","onDisable","className","removeConfirmProps","status","canDisable","disableConfirmProps","access","hasAccess","IntegrationFlex","id","IntegrationItemBox","position","StyledButton","borderless","to","slug","data-test-id","priority","onConfirming","StyledIntegrationStatus","Button","p","theme","gray300","IntegrationStatus","withTheme","color","titleText","IntegrationStatusText","gray200","space","IntegrationDetailedView","orgId","params","router","push","origIntegrations","state","configurations","integrations","filter","i","setState","options","method","api","request","domainName","split","orgName","accountType","handleExternalInstall","integrationSlug","information","providers","description","author","alerts","map","item","externalInstall","text","noticeText","source_url","issue_url","length","isEnabled","features","disabledFromFeatures","userHasAccess","style","marginBottom","view","already_installed","installationStatus","href","external","renderRequestIntegrationButton","InstallWrapper","renderEmptyConfigurations","AbstractIntegrationDetailedView","border","background","withOrganization","StyledIcon","Icon","imgSrc","src","onError","ICON_PATHS","DEFAULT_ICON","pluginId","IntegrationItem","compact","Flex","Labels","IntegrationName","DomainName","defaultProps","gray400"],"mappings":"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","file":"IntegrationDetailedView.js","sourcesContent":["import React from 'react';\nimport * as queryString from 'query-string';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport {t} from 'app/locale';\nimport {IntegrationProvider, IntegrationWithConfig, Organization} from 'app/types';\nimport {trackIntegrationEvent} from 'app/utils/integrationUtil';\n\ntype Props = {\n  children: (\n    openDialog: (urlParams?: {[key: string]: string}) => void\n  ) => React.ReactNode;\n  provider: IntegrationProvider;\n  onInstall: (data: IntegrationWithConfig) => void;\n  account?: string;\n  organization?: Organization; //for analytics\n  analyticsParams?: {\n    view:\n      | 'integrations_directory_integration_detail'\n      | 'integrations_directory'\n      | 'onboarding'\n      | 'project_creation';\n    already_installed: boolean;\n  };\n  modalParams?: {[key: string]: string};\n};\n\nexport default class AddIntegration extends React.Component<Props> {\n  componentDidMount() {\n    window.addEventListener('message', this.didReceiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('message', this.didReceiveMessage);\n    this.dialog && this.dialog.close();\n  }\n\n  dialog: Window | null = null;\n\n  computeCenteredWindow(width: number, height: number) {\n    //Taken from: https://stackoverflow.com/questions/4068373/center-a-popup-window-on-screen\n    const screenLeft =\n      window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n\n    const screenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n    const innerWidth = window.innerWidth\n      ? window.innerWidth\n      : document.documentElement.clientWidth\n      ? document.documentElement.clientWidth\n      : screen.width;\n\n    const innerHeight = window.innerHeight\n      ? window.innerHeight\n      : document.documentElement.clientHeight\n      ? document.documentElement.clientHeight\n      : screen.height;\n\n    const left = innerWidth / 2 - width / 2 + screenLeft;\n    const top = innerHeight / 2 - height / 2 + screenTop;\n\n    return {left, top};\n  }\n\n  openDialog = (urlParams?: {[key: string]: string}) => {\n    trackIntegrationEvent(\n      'integrations.installation_start',\n      {\n        integration: this.props.provider.key,\n        integration_type: 'first_party',\n        ...this.props.analyticsParams,\n      },\n      this.props.organization\n    );\n    const name = 'sentryAddIntegration';\n    const {url, width, height} = this.props.provider.setupDialog;\n    const {left, top} = this.computeCenteredWindow(width, height);\n\n    let query: {[key: string]: string} = {...urlParams};\n\n    if (this.props.account) {\n      query.account = this.props.account;\n    }\n\n    if (this.props.modalParams) {\n      query = {...query, ...this.props.modalParams};\n    }\n\n    const installUrl = `${url}?${queryString.stringify(query)}`;\n    const opts = `scrollbars=yes,width=${width},height=${height},top=${top},left=${left}`;\n\n    this.dialog = window.open(installUrl, name, opts);\n    this.dialog && this.dialog.focus();\n  };\n\n  didReceiveMessage = (message: MessageEvent) => {\n    if (message.origin !== document.location.origin) {\n      return;\n    }\n\n    if (message.source !== this.dialog) {\n      return;\n    }\n\n    const {success, data} = message.data;\n    this.dialog = null;\n\n    if (!success) {\n      addErrorMessage(data.error);\n      return;\n    }\n\n    if (!data) {\n      return;\n    }\n    trackIntegrationEvent(\n      'integrations.installation_complete',\n      {\n        integration: this.props.provider.key,\n        integration_type: 'first_party',\n        ...this.props.analyticsParams,\n      },\n      this.props.organization\n    );\n    addSuccessMessage(t('%s added', this.props.provider.name));\n    this.props.onInstall(data);\n  };\n\n  render() {\n    return this.props.children(this.openDialog);\n  }\n}\n","import React from 'react';\n\nimport Button from 'app/components/button';\nimport Tooltip from 'app/components/tooltip';\nimport {t} from 'app/locale';\nimport {IntegrationWithConfig} from 'app/types';\n\nimport AddIntegration from './addIntegration';\n\ntype Props = {\n  onAddIntegration: (data: IntegrationWithConfig) => void;\n  buttonText?: string;\n  reinstall?: boolean;\n} & React.ComponentProps<typeof Button> &\n  Pick<\n    React.ComponentProps<typeof AddIntegration>,\n    'provider' | 'organization' | 'analyticsParams' | 'modalParams'\n  >;\n\nexport default class AddIntegrationButton extends React.Component<Props> {\n  render() {\n    const {\n      provider,\n      buttonText,\n      onAddIntegration,\n      organization,\n      reinstall,\n      analyticsParams,\n      modalParams,\n      ...buttonProps\n    } = this.props;\n\n    const label =\n      buttonText || t(reinstall ? 'Enable' : 'Add %s', provider.metadata.noun);\n\n    return (\n      <Tooltip\n        disabled={provider.canAdd}\n        title={`Integration cannot be added on Sentry. Enable this integration via the ${provider.name} instance.`}\n      >\n        <AddIntegration\n          provider={provider}\n          onInstall={onAddIntegration}\n          organization={organization}\n          analyticsParams={analyticsParams}\n          modalParams={modalParams}\n        >\n          {onClick => (\n            <Button\n              disabled={!provider.canAdd}\n              {...buttonProps}\n              onClick={() => onClick()}\n            >\n              {label}\n            </Button>\n          )}\n        </AddIntegration>\n      </Tooltip>\n    );\n  }\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport {withTheme} from 'emotion-theming';\n\nimport Access from 'app/components/acl/access';\nimport Alert from 'app/components/alert';\nimport Button from 'app/components/button';\nimport CircleIndicator from 'app/components/circleIndicator';\nimport Confirm from 'app/components/confirm';\nimport Tooltip from 'app/components/tooltip';\nimport {IconDelete, IconFlag, IconSettings} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Integration, IntegrationProvider, ObjectStatus, Organization} from 'app/types';\nimport {IntegrationAnalyticsKey} from 'app/utils/integrationEvents';\nimport {Theme} from 'app/utils/theme';\n\nimport IntegrationItem from './integrationItem';\n\nexport type Props = {\n  organization: Organization;\n  provider: IntegrationProvider;\n  integration: Integration;\n  onRemove: (integration: Integration) => void;\n  onDisable: (integration: Integration) => void;\n  trackIntegrationEvent: (eventKey: IntegrationAnalyticsKey) => void; //analytics callback\n  className?: string;\n};\n\nexport default class InstalledIntegration extends React.Component<Props> {\n  handleUninstallClick = () => {\n    this.props.trackIntegrationEvent('integrations.uninstall_clicked');\n  };\n\n  getRemovalBodyAndText(aspects: Integration['provider']['aspects']) {\n    if (aspects && aspects.removal_dialog) {\n      return {\n        body: aspects.removal_dialog.body,\n        actionText: aspects.removal_dialog.actionText,\n      };\n    } else {\n      return {\n        body: t(\n          'Deleting this integration will remove any project associated data. This action cannot be undone. Are you sure you want to delete this integration?'\n        ),\n        actionText: t('Delete'),\n      };\n    }\n  }\n\n  handleRemove(integration: Integration) {\n    this.props.onRemove(integration);\n    this.props.trackIntegrationEvent('integrations.uninstall_completed');\n  }\n\n  get removeConfirmProps() {\n    const {integration} = this.props;\n    const {body, actionText} = this.getRemovalBodyAndText(integration.provider.aspects);\n\n    const message = (\n      <React.Fragment>\n        <Alert type=\"error\" icon={<IconFlag size=\"md\" />}>\n          {t('Deleting this integration has consequences!')}\n        </Alert>\n        {body}\n      </React.Fragment>\n    );\n    return {\n      message,\n      confirmText: actionText,\n      onConfirm: () => this.handleRemove(integration),\n    };\n  }\n\n  get disableConfirmProps() {\n    const {integration} = this.props;\n    const {body, actionText} = integration.provider.aspects.disable_dialog || {};\n    const message = (\n      <React.Fragment>\n        <Alert type=\"error\" icon={<IconFlag size=\"md\" />}>\n          {t('This integration cannot be removed in Sentry')}\n        </Alert>\n        {body}\n      </React.Fragment>\n    );\n\n    return {\n      message,\n      confirmText: actionText,\n      onConfirm: () => this.props.onDisable(integration),\n    };\n  }\n\n  render() {\n    const {className, integration, provider, organization} = this.props;\n\n    const removeConfirmProps =\n      integration.status === 'active' && integration.provider.canDisable\n        ? this.disableConfirmProps\n        : this.removeConfirmProps;\n\n    return (\n      <Access access={['org:integrations']}>\n        {({hasAccess}) => (\n          <IntegrationFlex key={integration.id} className={className}>\n            <IntegrationItemBox>\n              <IntegrationItem integration={integration} />\n            </IntegrationItemBox>\n            <div>\n              <Tooltip\n                disabled={hasAccess}\n                position=\"left\"\n                title={t(\n                  'You must be an organization owner, manager or admin to configure'\n                )}\n              >\n                <StyledButton\n                  borderless\n                  icon={<IconSettings />}\n                  disabled={!hasAccess || integration.status !== 'active'}\n                  to={`/settings/${organization.slug}/integrations/${provider.key}/${integration.id}/`}\n                  data-test-id=\"integration-configure-button\"\n                >\n                  {t('Configure')}\n                </StyledButton>\n              </Tooltip>\n            </div>\n            <div>\n              <Tooltip\n                disabled={hasAccess}\n                title={t(\n                  'You must be an organization owner, manager or admin to uninstall'\n                )}\n              >\n                <Confirm\n                  priority=\"danger\"\n                  onConfirming={this.handleUninstallClick}\n                  disabled={!hasAccess}\n                  {...removeConfirmProps}\n                >\n                  <StyledButton\n                    disabled={!hasAccess}\n                    borderless\n                    icon={<IconDelete />}\n                    data-test-id=\"integration-remove-button\"\n                  >\n                    {t('Uninstall')}\n                  </StyledButton>\n                </Confirm>\n              </Tooltip>\n            </div>\n\n            <StyledIntegrationStatus status={integration.status} />\n          </IntegrationFlex>\n        )}\n      </Access>\n    );\n  }\n}\n\nconst StyledButton = styled(Button)`\n  color: ${p => p.theme.gray300};\n`;\n\nconst IntegrationFlex = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst IntegrationItemBox = styled('div')`\n  flex: 1;\n`;\n\nconst IntegrationStatus = withTheme(\n  (props: React.HTMLAttributes<HTMLElement> & {theme: Theme; status: ObjectStatus}) => {\n    const {theme, status, ...p} = props;\n    const color = status === 'active' ? theme.success : theme.gray300;\n    const titleText =\n      status === 'active'\n        ? t('This Integration can be disabled by clicking the Uninstall button')\n        : t('This Integration has been disconnected from the external provider');\n    return (\n      <Tooltip title={titleText}>\n        <div {...p}>\n          <CircleIndicator size={6} color={color} />\n          <IntegrationStatusText>{`${\n            status === 'active' ? t('enabled') : t('disabled')\n          }`}</IntegrationStatusText>\n        </div>\n      </Tooltip>\n    );\n  }\n);\n\nconst StyledIntegrationStatus = styled(IntegrationStatus)`\n  display: flex;\n  align-items: center;\n  color: ${p => p.theme.gray300};\n  font-weight: light;\n  text-transform: capitalize;\n  &:before {\n    content: '|';\n    color: ${p => p.theme.gray200};\n    margin-right: ${space(1)};\n    font-weight: normal;\n  }\n`;\n\nconst IntegrationStatusText = styled('div')`\n  margin: 0 ${space(0.75)} 0 ${space(0.5)};\n`;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage} from 'app/actionCreators/indicator';\nimport {RequestOptions} from 'app/api';\nimport Button from 'app/components/button';\nimport {IconFlag, IconOpen, IconWarning} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Integration, IntegrationProvider} from 'app/types';\nimport withOrganization from 'app/utils/withOrganization';\n\nimport AbstractIntegrationDetailedView from './abstractIntegrationDetailedView';\nimport AddIntegrationButton from './addIntegrationButton';\nimport InstalledIntegration from './installedIntegration';\n\ntype State = {\n  configurations: Integration[];\n  information: {providers: IntegrationProvider[]};\n};\n\nclass IntegrationDetailedView extends AbstractIntegrationDetailedView<\n  AbstractIntegrationDetailedView['props'],\n  State & AbstractIntegrationDetailedView['state']\n> {\n  getEndpoints(): ([string, string, any] | [string, string])[] {\n    const {orgId, integrationSlug} = this.props.params;\n    const baseEndpoints: ([string, string, any] | [string, string])[] = [\n      [\n        'information',\n        `/organizations/${orgId}/config/integrations/?provider_key=${integrationSlug}`,\n      ],\n      [\n        'configurations',\n        `/organizations/${orgId}/integrations/?provider_key=${integrationSlug}&includeConfig=0`,\n      ],\n    ];\n\n    return baseEndpoints;\n  }\n\n  get integrationType() {\n    return 'first_party' as const;\n  }\n\n  get provider() {\n    return this.state.information.providers[0];\n  }\n\n  get description() {\n    return this.metadata.description;\n  }\n\n  get author() {\n    return this.metadata.author;\n  }\n\n  get alerts() {\n    const provider = this.provider;\n    const metadata = this.metadata;\n    // The server response for integration installations includes old icon CSS classes\n    // We map those to the currently in use values to their react equivalents\n    // and fallback to IconFlag just in case.\n    const alerts = (metadata.aspects.alerts || []).map(item => {\n      switch (item.icon) {\n        case 'icon-warning':\n        case 'icon-warning-sm':\n          return {...item, icon: <IconWarning />};\n        default:\n          return {...item, icon: <IconFlag />};\n      }\n    });\n\n    if (!provider.canAdd && metadata.aspects.externalInstall) {\n      alerts.push({\n        type: 'warning',\n        icon: <IconOpen />,\n        text: metadata.aspects.externalInstall.noticeText,\n      });\n    }\n    return alerts;\n  }\n\n  get resourceLinks() {\n    const metadata = this.metadata;\n    return [\n      {url: metadata.source_url, title: 'View Source'},\n      {url: metadata.issue_url, title: 'Report Issue'},\n    ];\n  }\n\n  get metadata() {\n    return this.provider.metadata;\n  }\n\n  get isEnabled() {\n    return this.state.configurations.length > 0;\n  }\n\n  get installationStatus() {\n    return this.isEnabled ? 'Installed' : 'Not Installed';\n  }\n\n  get integrationName() {\n    return this.provider.name;\n  }\n\n  get featureData() {\n    return this.metadata.features;\n  }\n\n  onInstall = (integration: Integration) => {\n    // send the user to the configure integration view for that integration\n    const {orgId} = this.props.params;\n    this.props.router.push(\n      `/settings/${orgId}/integrations/${integration.provider.key}/${integration.id}/`\n    );\n  };\n\n  onRemove = (integration: Integration) => {\n    const {orgId} = this.props.params;\n\n    const origIntegrations = [...this.state.configurations];\n\n    const integrations = this.state.configurations.filter(i => i.id !== integration.id);\n    this.setState({configurations: integrations});\n\n    const options: RequestOptions = {\n      method: 'DELETE',\n      error: () => {\n        this.setState({configurations: origIntegrations});\n        addErrorMessage(t('Failed to remove Integration'));\n      },\n    };\n\n    this.api.request(`/organizations/${orgId}/integrations/${integration.id}/`, options);\n  };\n\n  onDisable = (integration: Integration) => {\n    let url: string;\n\n    const [domainName, orgName] = integration.domainName.split('/');\n    if (integration.accountType === 'User') {\n      url = `https://${domainName}/settings/installations/`;\n    } else {\n      url = `https://${domainName}/organizations/${orgName}/settings/installations/`;\n    }\n\n    window.open(url, '_blank');\n  };\n\n  handleExternalInstall = () => {\n    this.trackIntegrationEvent('integrations.installation_start');\n  };\n\n  renderTopButton(disabledFromFeatures: boolean, userHasAccess: boolean) {\n    const {organization} = this.props;\n    const provider = this.provider;\n    const {metadata} = provider;\n\n    const size = 'small' as const;\n    const priority = 'primary' as const;\n\n    const buttonProps = {\n      style: {marginBottom: space(1)},\n      size,\n      priority,\n      'data-test-id': 'install-button',\n      disabled: disabledFromFeatures,\n      organization,\n    };\n\n    if (!userHasAccess) {\n      return this.renderRequestIntegrationButton();\n    }\n\n    if (provider.canAdd) {\n      return (\n        <AddIntegrationButton\n          provider={provider}\n          onAddIntegration={this.onInstall}\n          analyticsParams={{\n            view: 'integrations_directory_integration_detail',\n            already_installed: this.installationStatus !== 'Not Installed',\n          }}\n          {...buttonProps}\n        />\n      );\n    }\n    if (metadata.aspects.externalInstall) {\n      return (\n        <Button\n          icon={<IconOpen />}\n          href={metadata.aspects.externalInstall.url}\n          onClick={this.handleExternalInstall}\n          external\n          {...buttonProps}\n        >\n          {metadata.aspects.externalInstall.buttonText}\n        </Button>\n      );\n    }\n\n    // This should never happen but we can't return undefined without some refactoring.\n    return <React.Fragment />;\n  }\n\n  renderConfigurations() {\n    const {configurations} = this.state;\n    const {organization} = this.props;\n    const provider = this.provider;\n\n    if (configurations.length) {\n      return configurations.map(integration => {\n        return (\n          <InstallWrapper key={integration.id}>\n            <InstalledIntegration\n              organization={organization}\n              provider={provider}\n              integration={integration}\n              onRemove={this.onRemove}\n              onDisable={this.onDisable}\n              data-test-id={integration.id}\n              trackIntegrationEvent={this.trackIntegrationEvent}\n            />\n          </InstallWrapper>\n        );\n      });\n    }\n\n    return this.renderEmptyConfigurations();\n  }\n}\n\nconst InstallWrapper = styled('div')`\n  padding: ${space(2)};\n  border: 1px solid ${p => p.theme.border};\n  border-bottom: none;\n  background-color: ${p => p.theme.background};\n\n  &:last-child {\n    border-bottom: 1px solid ${p => p.theme.border};\n  }\n`;\n\nexport default withOrganization(IntegrationDetailedView);\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport PluginIcon, {DEFAULT_ICON, ICON_PATHS} from 'app/plugins/components/pluginIcon';\nimport {Integration} from 'app/types';\n\ntype Props = {\n  integration: Integration;\n  size?: number;\n};\n\ntype IconProps = Pick<Props, 'size'>;\n\nconst StyledIcon = styled('img')<IconProps>`\n  height: ${p => p.size}px;\n  width: ${p => p.size}px;\n  border-radius: 2px;\n  display: block;\n`;\n\nclass Icon extends React.Component<Props> {\n  state = {\n    imgSrc: this.props.integration.icon,\n  };\n\n  render() {\n    const {integration, size} = this.props;\n\n    return (\n      <StyledIcon\n        size={size}\n        src={this.state.imgSrc}\n        onError={() => {\n          this.setState({imgSrc: ICON_PATHS[integration.provider.key] || DEFAULT_ICON});\n        }}\n      />\n    );\n  }\n}\n\nconst IntegrationIcon = ({integration, size = 32}: Props) =>\n  integration.icon ? (\n    <Icon size={size} integration={integration} />\n  ) : (\n    <PluginIcon size={size} pluginId={integration.provider.key} />\n  );\n\nexport default IntegrationIcon;\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport space from 'app/styles/space';\nimport {Integration} from 'app/types';\nimport IntegrationIcon from 'app/views/organizationIntegrations/integrationIcon';\n\ntype DefaultProps = {\n  compact: boolean;\n};\n\ntype Props = DefaultProps & {\n  integration: Integration;\n};\nexport default class IntegrationItem extends React.Component<Props> {\n  static defaultProps: DefaultProps = {\n    compact: false,\n  };\n\n  render() {\n    const {integration, compact} = this.props;\n    return (\n      <Flex>\n        <div>\n          <IntegrationIcon size={compact ? 22 : 32} integration={integration} />\n        </div>\n        <Labels compact={compact}>\n          <IntegrationName data-test-id=\"integration-name\">\n            {integration.name}\n          </IntegrationName>\n          <DomainName compact={compact}>{integration.domainName}</DomainName>\n        </Labels>\n      </Flex>\n    );\n  }\n}\n\nconst Flex = styled('div')`\n  display: flex;\n`;\ntype StyledProps = Pick<Props, 'compact'>;\nconst Labels = styled('div')<StyledProps>`\n  box-sizing: border-box;\n  display: flex;\n  ${p => (p.compact ? 'align-items: center;' : '')};\n  flex-direction: ${p => (p.compact ? 'row' : 'column')};\n  padding-left: ${space(1)};\n  min-width: 0;\n  justify-content: center;\n`;\n\nconst IntegrationName = styled('div')`\n  font-size: 1.6rem;\n`;\n\n// Not using the overflowEllipsis style import here\n// as it sets width 100% which causes layout issues in the\n// integration list.\nconst DomainName = styled('div')<StyledProps>`\n  color: ${p => (p.compact ? p.theme.gray200 : p.theme.gray400)};\n  margin-left: ${p => (p.compact ? space(1) : 'inherit')};\n  margin-top: ${p => (!p.compact ? space(0.25) : 'inherit')};\n  font-size: 1.4rem;\n  line-height: 1.2;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n"],"sourceRoot":""}