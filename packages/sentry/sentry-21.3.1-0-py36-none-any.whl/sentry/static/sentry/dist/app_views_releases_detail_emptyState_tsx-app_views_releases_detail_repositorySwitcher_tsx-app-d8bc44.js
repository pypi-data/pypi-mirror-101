(self.webpackChunk=self.webpackChunk||[]).push([["app_views_releases_detail_emptyState_tsx-app_views_releases_detail_repositorySwitcher_tsx-app-d8bc44"],{"./app/actions/repositoryActions.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var o=r("../../../../node_modules/reflux/src/index.js");const s=r.n(o)().createActions(["resetRepositories","loadRepositories","loadRepositoriesError","loadRepositoriesSuccess"])},"./app/utils/withRepositories.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var o=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=r.n(o),n=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),i=r.n(n),a=(r("../../../../node_modules/react/index.js"),r("../../../../node_modules/create-react-class/index.js")),p=r.n(a),l=r("../../../../node_modules/reflux/src/index.js"),c=r.n(l),u=r("../../../../node_modules/@sentry/minimal/esm/index.js"),d=r("../../../../node_modules/@sentry/types/esm/severity.js"),h=r("./app/actions/repositoryActions.tsx");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={listenables:h.Z,state:{orgSlug:void 0,repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0},init:function(){this.resetRepositories()},resetRepositories:function(){this.state={orgSlug:void 0,repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0},this.trigger(this.state)},loadRepositories:function(e){this.state={orgSlug:e,repositories:e===this.state.orgSlug?this.state.repositories:void 0,repositoriesLoading:!0,repositoriesError:void 0},this.trigger(this.state)},loadRepositoriesError:function(e){this.state=m(m({},this.state),{},{repositories:void 0,repositoriesLoading:!1,repositoriesError:e}),this.trigger(this.state)},loadRepositoriesSuccess:function(e){this.state=m(m({},this.state),{},{repositories:e,repositoriesLoading:!1,repositoriesError:void 0}),this.trigger(this.state)},get:function(){return m({},this.state)}};const b=c().createStore(v);var y=r("./app/utils/getDisplayName.tsx"),g=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R={repositories:void 0,repositoriesLoading:void 0,repositoriesError:void 0};const O=function(e){return p()({displayName:"withRepositories(".concat((0,y.Z)(e),")"),mixins:[c().listenTo(b,"onStoreUpdate")],getInitialState:function(){var e=this.props.organization.slug,t=b.get();return t.orgSlug!==e&&h.Z.resetRepositories(),t.orgSlug===e?w(w({},R),t):w({},R)},componentDidMount:function(){this.fetchRepositories()},fetchRepositories:function(){var e=this.props,t=e.api,r=e.organization.slug,o=b.get();(!o.repositories&&!o.repositoriesLoading||o.repositoriesError)&&function(e,t){var r=t.orgSlug,o="/organizations/".concat(r,"/repos/");b.state.repositoriesLoading=!0,h.Z.loadRepositories(r),e.requestPromise(o,{method:"GET"}).then((function(e){h.Z.loadRepositoriesSuccess(e)})).catch((function(e){h.Z.loadRepositoriesError(e),u.$e((function(t){t.setLevel(d.z.Warning),t.setFingerprint(["getRepositories-action-creator"]),u.Tb(e)}))}))}(t,{orgSlug:r})},onStoreUpdate:function(){var e=b.get();this.setState(w({},e))},render:function(){return(0,g.tZ)(e,s()({},this.props,this.state))}})}},"./app/views/releases/detail/emptyState.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a}),r("../../../../node_modules/react/index.js");var o=r("./app/components/emptyStateWarning.tsx"),s=r("./app/components/panels/index.tsx"),n=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),i=function(e){var t=e.children;return(0,n.tZ)(s.s_,null,(0,n.tZ)(s.N,null,(0,n.tZ)(o.Z,null,(0,n.tZ)("p",null,t))))};i.displayName="EmptyState";const a=i},"./app/views/releases/detail/repositorySwitcher.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var o=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),s=r.n(o),n=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),i=r.n(n),a=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),p=r.n(a),l=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=r.n(l),u=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=r.n(u),h=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=r.n(h),m=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),v=r("../../../../node_modules/react/index.js"),b=r("./app/components/dropdownControl.tsx"),y=r("./app/locale.tsx"),g=r("./app/styles/overflowEllipsis.tsx"),j=r("./app/styles/space.tsx"),w=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){c()(s,e);var t,r,o=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=f()(t);if(r){var s=f()(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return d()(this,e)});function s(){var e;i()(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={},e.dropdownButton=v.createRef(),e.handleRepoFilterChange=function(t){var r=e.props,o=r.router,s=r.location;o.push(O(O({},s),{},{query:O(O({},s.query),{},{cursor:void 0,activeRepo:t})}))},e}return p()(s,[{key:"componentDidMount",value:function(){this.setButtonDropDownWidth()}},{key:"setButtonDropDownWidth",value:function(){var e,t,r=null===(e=this.dropdownButton)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.offsetWidth;r&&this.setState({dropdownButtonWidth:r})}},{key:"render",value:function(){var e=this,t=this.props,r=t.activeRepository,o=t.repositories,s=this.state.dropdownButtonWidth,n=null==r?void 0:r.name;return(0,w.tZ)(P,{minMenuWidth:s,label:(0,w.tZ)(v.Fragment,null,(0,w.tZ)(_,null,"".concat((0,y.t)("Filter"),":")),n),buttonProps:{forwardRef:this.dropdownButton}},o.map((function(e){return e.name})).map((function(t){return(0,w.tZ)(b.hP,{key:t,onSelect:e.handleRepoFilterChange,eventKey:t,isActive:t===n},(0,w.tZ)(S,null,t))})))}}]),s}(v.PureComponent);x.displayName="RepositorySwitcher";const Z=x;var P=(0,m.Z)(b.ZP,{target:"ev1ou9t0",label:"StyledDropdownControl"})("margin-bottom:",(0,j.Z)(1),";> *:nth-child(2){right:auto;width:auto;",(function(e){return e.minMenuWidth&&"min-width: calc(".concat(e.minMenuWidth,"px + 10px);")})," border-radius:",(function(e){return e.theme.borderRadius}),";border-top-left-radius:0px;border:1px solid ",(function(e){return e.theme.button.default.border}),";top:calc(100% - 1px);}"),_=(0,m.Z)("em",{target:"ev1ou9t1",label:"FilterText"})("font-style:normal;color:",(function(e){return e.theme.gray300}),";margin-right:",(0,j.Z)(.5),";"),S=(0,m.Z)("div",{target:"ev1ou9t2",label:"RepoLabel"})(g.Z)},"./app/views/releases/detail/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{bB:()=>v,DZ:()=>b,pm:()=>y,AN:()=>g,EJ:()=>j});var o=r("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),s=r.n(o),n=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),i=r.n(n),a=r("../../../../node_modules/lodash/pick.js"),p=r.n(a),l=r("./app/constants/globalSelectionHeader.tsx"),c=r("./app/locale.tsx"),u=r("./app/utils/dates.tsx"),d=r("./app/utils/discover/eventView.tsx"),h=r("./app/utils/tokenizeSearch.tsx");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){return e.reduce((function(e,t){var r=t.filename,o=t.repoName,s=t.author,n=t.type;return e.hasOwnProperty(o)||(e[o]={}),e[o].hasOwnProperty(r)||(e[o][r]={authors:{},types:new Set}),s.email&&(e[o][r].authors[s.email]=s),e[o][r].types.add(n),e}),{})}function b(e){return e.reduce((function(e,t){var r,o,s=null!==(r=null===(o=t.repository)||void 0===o?void 0:o.name)&&void 0!==r?r:(0,c.t)("unknown");return e.hasOwnProperty(s)||(e[s]=[]),e[s].push(t),e}),{})}function y(e){var t=e.location,r=e.perPage,o=void 0===r?40:r,n=e.activeRepository,i=m(m({},p()(t.query,[].concat(s()(Object.values(l.nF)),["cursor"]))),{},{per_page:o});return n?m(m({},i),{},{repo_name:n.name}):i}function g(e,t){return t?[t.name]:e}function j(e,t,r){var o=e.projects,s=e.environments,n=e.datetime,i=n.start,a=n.end,p=n.period,l={id:void 0,version:2,name:"".concat((0,c.t)("Release Apdex")),fields:["apdex(".concat(r.apdexThreshold,")")],query:(0,h.gZ)(new h.an(["release:".concat(t),"event.type:transaction","count():>0"])),range:p,environment:s,projects:o,start:i?(0,u.v5)(i):void 0,end:a?(0,u.v5)(a):void 0};return d.ZP.fromSavedQuery(l)}},"./app/views/releases/detail/withReleaseRepos.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var o=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=r.n(o),n=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),i=r.n(n),a=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),p=r.n(a),l=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=r.n(l),u=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),d=r.n(u),h=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),f=r.n(h),m=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=r.n(m),b=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=r.n(b),g=r("../../../../node_modules/react/index.js"),j=r("../../../../node_modules/@sentry/minimal/esm/index.js"),w=r("./app/actionCreators/indicator.tsx"),R=r("./app/components/button.tsx"),O=r("./app/components/layouts/thirds.tsx"),x=r("./app/components/loadingIndicator.tsx"),Z=r("./app/components/panels/index.tsx"),P=r("./app/icons/index.tsx"),_=r("./app/locale.tsx"),S=r("./app/utils/getDisplayName.tsx"),k=r("./app/utils/withApi.tsx"),D=r("./app/utils/withOrganization.tsx"),E=r("./app/utils/withRepositories.tsx"),C=r("./app/views/settings/components/emptyMessage.tsx"),L=r("./app/views/releases/detail/index.tsx"),A=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");const B=function(e){var t,r;return(0,k.Z)((0,D.Z)((0,E.Z)((r=t=function(t){f()(l,t);var r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(o);if(n){var r=y()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v()(this,e)});function l(){var e;c()(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={releaseRepos:[],isLoading:!0},e}return d()(l,[{key:"componentDidMount",value:function(){this.fetchReleaseRepos()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setActiveReleaseRepo(e)}},{key:"componentDidUpdate",value:function(e,t){!e.repositoriesLoading||this.props.repositoriesLoading?t.releaseRepos.length!==this.state.releaseRepos.length&&this.setActiveReleaseRepo(this.props):this.fetchReleaseRepos()}},{key:"setActiveReleaseRepo",value:function(e){var t,r=this.state,o=r.releaseRepos,s=r.activeReleaseRepo;if(o.length){var n,i=null===(t=e.location.query)||void 0===t?void 0:t.activeRepo;if(i){if(i!==(null==s?void 0:s.name)){var a=o.find((function(e){return e.name===i}));a?this.setState({activeReleaseRepo:a}):(0,w.Iw)((0,_.t)("The repository you were looking for was not found."))}}else this.setState({activeReleaseRepo:null!==(n=o[0])&&void 0!==n?n:null})}}},{key:"fetchReleaseRepos",value:(r=p()(i().mark((function e(){var t,r,o,s,n,a,p,l,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.params,o=t.api,s=t.repositories,void 0!==(n=t.repositoriesLoading)&&!0!==n){e.next=3;break}return e.abrupt("return");case 3:if(null!=s&&s.length){e.next=6;break}return this.setState({isLoading:!1}),e.abrupt("return");case 6:return a=r.release,p=r.orgId,l=this.context.project,this.setState({isLoading:!0}),e.prev=9,e.next=12,o.requestPromise("/projects/".concat(p,"/").concat(l.slug,"/releases/").concat(encodeURIComponent(a),"/repositories/"));case 12:c=e.sent,this.setState({releaseRepos:c,isLoading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),j.Tb(e.t0),(0,w.Iw)((0,_.t)("An error occured while trying to fetch the repositories of the release: %s",a));case 20:case"end":return e.stop()}}),e,this,[[9,16]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,r=t.isLoading,o=t.activeReleaseRepo,n=t.releaseRepos,i=this.props,a=i.repositoriesLoading,p=i.repositories,l=i.params,c=i.router,u=i.location,d=i.organization;if(r||a)return(0,A.tZ)(x.Z,null);if(null==p||!p.length){var h=l.orgId;return(0,A.tZ)(O.uT,null,(0,A.tZ)(O.or,{fullWidth:!0},(0,A.tZ)(Z.s_,{dashedBorder:!0},(0,A.tZ)(C.Z,{icon:(0,A.tZ)(P.J3,{size:"xl"}),title:(0,_.t)("Releases are better with commit data!"),description:(0,_.t)("Connect a repository to see commit info, files changed, and authors involved in future releases."),action:(0,A.tZ)(R.ZP,{priority:"primary",to:"/settings/".concat(h,"/repos/")},(0,_.t)("Connect a repository"))}))))}if(!n.length)return(0,A.tZ)(O.uT,null,(0,A.tZ)(O.or,{fullWidth:!0},(0,A.tZ)(Z.s_,{dashedBorder:!0},(0,A.tZ)(C.Z,{icon:(0,A.tZ)(P.J3,{size:"xl"}),title:(0,_.t)("Releases are better with commit data!"),description:(0,_.t)("No commits associated with this release have been found.")}))));if(void 0===o)return(0,A.tZ)(x.Z,null);var f=l.release,m=d.slug;return(0,A.tZ)(e,s()({},this.props,{orgSlug:m,projectSlug:this.context.project.slug,release:f,router:c,location:u,releaseRepos:n,activeReleaseRepo:o}))}}]),l}(g.Component),t.displayName="withReleaseRepos(".concat((0,S.Z)(e),")"),t.contextType=L.ReleaseContext,r))))}}}]);
//# sourceMappingURL=app_views_releases_detail_emptyState_tsx-app_views_releases_detail_repositorySwitcher_tsx-app-d8bc44.js.map