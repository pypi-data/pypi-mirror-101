(self.webpackChunk=self.webpackChunk||[]).push([["AuthLogin"],{"./app/views/auth/login.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>me,formFooterClass:()=>he});var n,o=r("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),s=r.n(o),a=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),i=r.n(a),l=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),u=r.n(l),c=r("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),p=r.n(c),f=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),d=r.n(f),h=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),m=r.n(h),g=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),b=r.n(g),v=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),y=r.n(v),Z=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),x=r.n(Z),k=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),w=r.n(k),S=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),L=r("../../../../node_modules/react/index.js"),_=r("./app/components/loadingError.tsx"),O=r("./app/components/loadingIndicator.tsx"),P=r("./app/components/navTabs.tsx"),j=r("./app/locale.tsx"),C=r("./app/styles/space.tsx"),N=r("./app/utils/withApi.tsx"),R=r("../../../../node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),z=r.n(R),A=r("../../../../node_modules/react-router/es/index.js"),J=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),T=r("./app/components/button.tsx"),D=r("./app/components/forms/form.tsx"),M=r("./app/components/forms/passwordField.tsx"),B=r("./app/components/forms/textField.tsx"),F=r("./app/components/links/link.tsx"),q=r("./app/icons/index.tsx"),H=r("./app/stores/configStore.tsx");var E=function(e){var t=e.vstsLoginLink,r=e.githubLoginLink,n=e.googleLoginLink;return(0,J.tZ)(G,null,(0,J.tZ)(W,null,(0,j.t)("External Account Login")),n&&(0,J.tZ)(T.ZP,{align:"left",size:"small",icon:(0,J.tZ)(q.vY,{size:"xs"}),href:n},(0,j.t)("Sign in with Google")),r&&(0,J.tZ)(T.ZP,{align:"left",size:"small",icon:(0,J.tZ)(q.Uv,{size:"xs"}),href:r},(0,j.t)("Sign in with GitHub")),t&&(0,J.tZ)(T.ZP,{align:"left",size:"small",icon:(0,J.tZ)(q.mT,{size:"xs"}),href:t},(0,j.t)("Sign in with Azure DevOps")))};E.displayName="LoginProviders";var I=function(e){y()(s,e);var t,r,o=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=w()(t);if(r){var o=w()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return x()(this,e)});function s(){var e;m()(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={errorMessage:null,errors:{}},e.handleSubmit=function(){var t=d()(i().mark((function t(r,n,o){var s,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.api.requestPromise("/auth/login/",{method:"POST",data:r});case 3:s=t.sent,n(r),H.Z.set("user",s.user),A.browserHistory.push({pathname:s.nextUri}),t.next=18;break;case 9:if(t.prev=9,t.t0=t.catch(0),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=14;break}return o(t.t0),t.abrupt("return");case 14:a=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(a=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:a,errors:t.t0.responseJSON.errors||{}}),o(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return b()(s,[{key:"render",value:function(){var e=this,t=this.state,r=t.errorMessage,o=t.errors,s=this.props.authConfig,a=s.githubLoginLink,i=s.vstsLoginLink,l=!(!a&&!i);return(0,J.tZ)(J.ms,null,(function(t){var s=t.css;return(0,J.tZ)(U,{hasLoginProvider:l},(0,J.tZ)(D.Z,{submitLabel:(0,j.t)("Continue"),onSubmit:e.handleSubmit,footerClass:s(n||(n=z()(["\n                ","\n              "])),he),errorMessage:r,extraButton:(0,J.tZ)(Y,{to:"/account/recover/"},(0,j.t)("Lost your password?"))},(0,J.tZ)(B.Z,{name:"username",placeholder:(0,j.t)("username or email"),label:(0,j.t)("Account"),error:o.username,required:!0}),(0,J.tZ)(M.Z,{name:"password",placeholder:(0,j.t)("password"),label:(0,j.t)("Password"),error:o.password,required:!0})),l&&(0,J.tZ)(E,{vstsLoginLink:i,githubLoginLink:a}))}))}}]),s}(L.Component);I.displayName="LoginForm";var U=(0,S.Z)("div",{target:"e80ojs40",label:"FormWrapper"})("display:grid;grid-gap:60px;grid-template-columns:",(function(e){return e.hasLoginProvider?"1fr 0.8fr":"1fr"}),";"),W=(0,S.Z)("div",{target:"e80ojs41",label:"ProviderHeading"})({name:"ihix69",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px;"}),G=(0,S.Z)("div",{target:"e80ojs42",label:"ProviderWrapper"})("position:relative;display:grid;grid-auto-rows:max-content;grid-gap:",(0,C.Z)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(function(e){return e.theme.border}),";}"),Y=(0,S.Z)(F.Z,{target:"e80ojs43",label:"LostPasswordLink"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}");const K=I;var Q,V=r("./app/components/forms/radioBooleanField.tsx"),X=r("./app/components/links/externalLink.tsx");var $=function(){return(0,J.tZ)(V.Z,{name:"subscribe",yesLabel:(0,j.t)("Yes, I would like to receive updates via email"),noLabel:(0,j.t)("No, I'd prefer not to receive these updates"),help:(0,j._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,J.tZ)("a",{href:"https://sentry.io/privacy/"},"Privacy Policy")})})};$.displayName="SubscribeField";var ee=function(e){y()(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=w()(t);if(r){var o=w()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return x()(this,e)});function o(){var e;m()(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={errorMessage:null,errors:{}},e.handleSubmit=function(){var t=d()(i().mark((function t(r,n,o){var s,a,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.api,t.prev=1,t.next=4,s.requestPromise("/auth/register/",{method:"POST",data:r});case 4:a=t.sent,n(r),H.Z.set("user",a.user),A.browserHistory.push({pathname:a.nextUri}),t.next=19;break;case 10:if(t.prev=10,t.t0=t.catch(1),t.t0.responseJSON&&t.t0.responseJSON.errors){t.next=15;break}return o(t.t0),t.abrupt("return");case 15:l=t.t0.responseJSON.detail,t.t0.responseJSON.errors.__all__&&(l=t.t0.responseJSON.errors.__all__),e.setState({errorMessage:l,errors:t.t0.responseJSON.errors||{}}),o(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return b()(o,[{key:"render",value:function(){var e=this,t=this.props.authConfig.hasNewsletter,r=this.state,n=r.errorMessage,o=r.errors;return(0,J.tZ)(J.ms,null,(function(r){var s=r.css;return(0,J.tZ)(D.Z,{initialData:{subscribe:!0},submitLabel:(0,j.t)("Continue"),onSubmit:e.handleSubmit,footerClass:s(Q||(Q=z()(["\n              ","\n            "])),he),errorMessage:n,extraButton:(0,J.tZ)(te,{href:"https://sentry.io/privacy/"},(0,j.t)("Privacy Policy"))},(0,J.tZ)(B.Z,{name:"name",placeholder:(0,j.t)("Jane Bloggs"),label:(0,j.t)("Name"),error:o.name,required:!0}),(0,J.tZ)(B.Z,{name:"username",placeholder:(0,j.t)("you@example.com"),label:(0,j.t)("Email"),error:o.username,required:!0}),(0,J.tZ)(M.Z,{name:"password",placeholder:(0,j.t)("something super secret"),label:(0,j.t)("Password"),error:o.password,required:!0}),t&&(0,J.tZ)($,null))}))}}]),o}(L.Component);ee.displayName="RegisterForm";var te=(0,S.Z)(X.Z,{target:"ehcnwun0",label:"PrivacyPolicyLink"})("color:",(function(e){return e.theme.gray300}),";&:hover{color:",(function(e){return e.theme.textColor}),";}");const re=ee;var ne=function(e){y()(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=w()(t);if(r){var o=w()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return x()(this,e)});function o(){var e;m()(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={errorMessage:null},e.handleSubmit=function(){var t=d()(i().mark((function t(r,n,o){var s,a,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props.api,t.prev=1,t.next=4,s.requestPromise("/auth/sso-locate/",{method:"POST",data:r});case 4:a=t.sent,n(r),A.browserHistory.push({pathname:a.nextUri}),t.next=17;break;case 9:if(t.prev=9,t.t0=t.catch(1),t.t0.responseJSON){t.next=14;break}return o(t.t0),t.abrupt("return");case 14:l=t.t0.responseJSON.detail,e.setState({errorMessage:l}),o(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e}return b()(o,[{key:"render",value:function(){var e=this.props.authConfig.serverHostname,t=this.state.errorMessage;return(0,J.tZ)(D.Z,{className:"form-stacked",submitLabel:(0,j.t)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t},(0,J.tZ)(B.Z,{name:"organization",placeholder:"acme",label:(0,j.t)("Organization ID"),required:!0,help:(0,j._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,J.tZ)("strong",null,"acme"),example:(0,J.tZ)(oe,{slug:"acme",hostname:e})})}))}}]),o}(L.Component);ne.displayName="SsoForm";var oe=function(e){var t=e.hostname,r=e.slug;return(0,J.tZ)("code",null,t,"/",(0,J.tZ)("strong",null,r))};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}oe.displayName="SlugExample";var ie={login:K,register:re,sso:ne},le=function(e){y()(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=w()(t);if(r){var o=w()(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return x()(this,e)});function o(){var e;m()(this,o);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={loading:!0,error:null,activeTab:"login",authConfig:null},e.handleSetTab=function(t,r){e.setState({activeTab:t}),r.preventDefault()},e.fetchData=d()(i().mark((function t(){var r,n,o,s,a,l,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.api,t.prev=1,t.next=4,r.requestPromise("/auth/config/");case 4:n=t.sent,o=n.vsts_login_link,s=n.github_login_link,a=n.google_login_link,l=p()(n,["vsts_login_link","github_login_link","google_login_link"]),u=ae(ae({},l),{},{vstsLoginLink:o,githubLoginLink:s,googleLoginLink:a}),e.setState({authConfig:u}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({error:!0});case 13:e.setState({loading:!1});case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e}return b()(o,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"hasAuthProviders",get:function(){if(null===this.state.authConfig)return!1;var e=this.state.authConfig,t=e.githubLoginLink,r=e.googleLoginLink,n=e.vstsLoginLink;return!!(t||n||r)}},{key:"render",value:function(){var e=this,t=this.props.api,r=this.state,n=r.loading,o=r.error,a=r.activeTab,i=r.authConfig,l=ie[a],u=[["login",(0,j.t)("Login")],["sso",(0,j.t)("Single Sign-On")],["register",(0,j.t)("Register"),!(null!=i&&i.canRegister)]];return(0,J.tZ)(L.Fragment,null,(0,J.tZ)(ce,null,(0,J.tZ)(pe,null,(0,j.t)("Sign in to continue")),(0,J.tZ)(fe,null,u.map((function(t){var r=s()(t,3),n=r[0],o=r[1];return!r[2]&&(0,J.tZ)("li",{key:n,className:a===n?"active":""},(0,J.tZ)("a",{href:"#",onClick:function(t){return e.handleSetTab(n,t)}},o))})))),n&&(0,J.tZ)(O.Z,null),o&&(0,J.tZ)(ue,{message:(0,j.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!n&&null!==i&&!o&&(0,J.tZ)(de,{hasAuthProviders:this.hasAuthProviders},(0,J.tZ)(l,{api:t,authConfig:i})))}}]),o}(L.Component);le.displayName="Login";var ue=(0,S.Z)(_.Z,{target:"e1y6wz4k0",label:"StyledLoadingError"})("margin:",(0,C.Z)(2),";"),ce=(0,S.Z)("div",{target:"e1y6wz4k1",label:"Header"})("border-bottom:1px solid ",(function(e){return e.theme.border}),";padding:20px 40px 0;"),pe=(0,S.Z)("h3",{target:"e1y6wz4k2",label:"Heading"})({name:"15am9v5",styles:"font-size:24px;margin:0 0 20px 0;"}),fe=(0,S.Z)(P.Z,{target:"e1y6wz4k3",label:"AuthNavTabs"})({name:"1uk1gs8",styles:"margin:0;"}),de=(0,S.Z)("div",{target:"e1y6wz4k4",label:"FormWrapper"})("padding:35px;width:",(function(e){return e.hasAuthProviders?"600px":"490px"}),";"),he="\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  grid-gap: ".concat((0,C.Z)(1),";\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n");const me=(0,N.Z)(le)}}]);
//# sourceMappingURL=AuthLogin.js.map