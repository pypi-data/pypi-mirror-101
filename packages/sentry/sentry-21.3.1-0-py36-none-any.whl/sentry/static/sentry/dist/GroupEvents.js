(self.webpackChunk=self.webpackChunk||[]).push([["GroupEvents"],{"./app/components/acl/role.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),f=n("../../../../node_modules/react/index.js"),h=n("./app/stores/configStore.tsx"),m=n("./app/utils/isRenderFunc.tsx"),y=n("./app/utils/withOrganization.tsx");var v=function(e){u()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return c()(this,e)});function o(){return s()(this,o),r.apply(this,arguments)}return a()(o,[{key:"hasRole",value:function(){var e,t=h.Z.get("user"),n=this.props,r=n.organization,s=n.role,o=r.availableRoles,a=null!==(e=r.role)&&void 0!==e?e:"";if(!t)return!1;if(t.isSuperuser)return!0;if(!Array.isArray(o))return!1;var i=o.map((function(e){return e.id}));if(!i.includes(s)||!i.includes(a))return!1;var u=i.indexOf(s);return i.indexOf(a)>=u}},{key:"render",value:function(){var e=this.props.children,t=this.hasRole();return(0,m.l)(e)?e({hasRole:t}):t&&e?e:null}}]),o}(f.Component);v.displayName="Role";const b=(0,y.Z)(v)},"./app/components/deviceName.tsx":(e,t,n)=>{"use strict";n.d(t,{qW:()=>g,f:()=>Z,ZP:()=>j});var r=n("../../../../node_modules/@babel/runtime/regenerator/index.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(f),m=n("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),y=n.n(m),v=n("../../../../node_modules/react/index.js"),b=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function g(e,t){var n=e.split(" ")[0],r=e.split(" ").splice(1).join(" "),s=t.generationByIdentifier(n);return void 0===s?e:s+" "+r}function Z(){return x.apply(this,arguments)}function x(){return(x=y()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.e("iOSDeviceList").then(n.t.bind(n,"../../../../node_modules/ios-device-list/dist/ios-device-list.min.js",23)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){c()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var s=h()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)});function s(e){var t;return a()(this,s),(t=r.call(this,e))._isMounted=void 0,t.state={iOSDeviceList:null},t}return u()(s,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Z().then((function(t){e._isMounted&&e.setState({iOSDeviceList:t})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.children,r=this.state.iOSDeviceList;if(!t)return null;if(!r)return t;var s=g(t,r);return(0,b.tZ)("span",{"data-test-id":"loaded-device-name"},n?n(s):s)}}]),s}(v.Component);j.displayName="DeviceName"},"./app/components/fileSize.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i}),n("../../../../node_modules/react/index.js");var r=n("./app/utils.tsx"),s=n("./app/utils/getDynamicText.tsx"),o=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function a(e){var t=e.className,n=e.bytes;return(0,o.tZ)("span",{className:t},(0,s.Z)({value:(0,r.F)(n),fixed:"xx KB"}))}a.displayName="FileSize";const i=a},"./app/components/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),f=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=n("../../../../node_modules/react/index.js"),m=n("../../../../node_modules/classnames/index.js"),y=n.n(m),v=n("./app/components/button.tsx"),b=n("./app/icons/index.tsx"),g=n("./app/icons/iconClose.tsx"),Z=n("./app/locale.tsx"),x=n("./app/utils/callIfFunction.tsx"),j=n("./app/views/settings/components/forms/controls/input.tsx"),R=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var k=function(e){u()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return c()(this,e)});function o(){var e;s()(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={query:e.props.query||e.props.defaultQuery,dropdownVisible:!1},e.searchInputRef=h.createRef(),e.blur=function(){e.searchInputRef.current&&e.searchInputRef.current.blur()},e.onSubmit=function(t){t.preventDefault(),e.blur(),e.props.onSearch(e.state.query)},e.clearSearch=function(){e.setState({query:e.props.defaultQuery},(function(){e.props.onSearch(e.state.query),(0,x.g)(e.props.onChange,e.state.query)}))},e.onQueryFocus=function(){e.setState({dropdownVisible:!0})},e.onQueryBlur=function(){e.setState({dropdownVisible:!1})},e.onQueryChange=function(t){var n=t.target.value;e.setState({query:n}),(0,x.g)(e.props.onChange,n)},e}return a()(o,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.query!==this.props.query&&this.setState({query:e.query})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width;return(0,R.tZ)("div",{className:y()("search",t)},(0,R.tZ)("form",{className:"form-horizontal",onSubmit:this.onSubmit},(0,R.tZ)("div",null,(0,R.tZ)(_,{type:"text",className:"search-input",placeholder:this.props.placeholder,name:"query",ref:this.searchInputRef,autoComplete:"off",value:this.state.query,onBlur:this.onQueryBlur,onChange:this.onQueryChange,width:n}),(0,R.tZ)(S,{className:"search-input-icon",size:"sm",color:"gray300"}),this.state.query!==this.props.defaultQuery&&(0,R.tZ)(C,{type:"button",className:"search-clear-form",priority:"link",onClick:this.clearSearch,size:"xsmall",icon:(0,R.tZ)(g.b,null),label:(0,Z.t)("Clear")}))))}}]),o}(h.PureComponent);k.displayName="SearchBar",k.defaultProps={query:"",defaultQuery:"",onSearch:function(){}};var _=(0,f.Z)(j.Z,{target:"e5a9jdx0",label:"StyledInput"})("width:",(function(e){return e.width?e.width:void 0}),";&.focus-visible{box-shadow:inset 0 2px 0 rgba(0,0,0,0.04),0 0 6px rgba(177,171,225,0.3);border-color:#a598b2;outline:none;}"),S=(0,f.Z)(b.jV,{target:"e5a9jdx1",label:"StyledIconSearch"})({name:"nte755",styles:"position:absolute;top:50%;transform:translateY(-50%);left:14px;"}),C=(0,f.Z)(v.ZP,{target:"e5a9jdx2",label:"SearchClearButton"})("position:absolute;top:50%;height:16px;transform:translateY(-50%);right:10px;font-size:",(function(e){return e.theme.fontSizeLarge}),";color:",(function(e){return e.theme.gray200}),";&:hover{color:",(function(e){return e.theme.gray300}),";}");const O=k},"./app/utils/attachmentUrl.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(l),p=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(p),f=n("../../../../node_modules/react/index.js"),h=n("./app/components/acl/role.tsx"),m=n("./app/utils/withOrganization.tsx"),y=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var v=function(e){u()(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return c()(this,e)});function o(){return s()(this,o),r.apply(this,arguments)}return a()(o,[{key:"getDownloadUrl",value:function(){var e=this.props,t=e.attachment,n=e.organization,r=e.eventId,s=e.projectId;return"/api/0/projects/".concat(n.slug,"/").concat(s,"/events/").concat(r,"/attachments/").concat(t.id,"/")}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.organization;return(0,y.tZ)(h.Z,{role:r.attachmentsRole},(function(t){var r=t.hasRole;return n(r?e.getDownloadUrl():null)}))}}]),o}(f.PureComponent);v.displayName="AttachmentUrl";const b=(0,m.Z)(v)},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{GroupEvents:()=>A,default:()=>M});var r=n("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(r),o=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(o),i=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(l),p=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=n.n(p),f=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),h=n.n(f),m=n("../../../../node_modules/react/index.js"),y=n("../../../../node_modules/react-router/es/index.js"),v=n("../../../../node_modules/lodash/pick.js"),b=n.n(v),g=n("./app/components/emptyStateWarning.tsx"),Z=n("./app/components/avatar/userAvatar.tsx"),x=n("./app/components/dateTime.tsx"),j=n("./app/components/deviceName.tsx"),R=n("./app/components/fileSize.tsx"),k=n("./app/components/globalSelectionLink.tsx"),_=n("./app/utils/attachmentUrl.tsx"),S=n("./app/utils/withOrganization.tsx"),C=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var O=function(e){c()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var s=h()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)});function s(){return a()(this,s),r.apply(this,arguments)}return u()(s,[{key:"renderCrashFileLink",value:function(){var e=this.props,t=e.event,n=e.projectId;if(!t.crashFile)return null;var r="event.minidump"===t.crashFile.type?"Minidump":"Crash file";return(0,C.tZ)(_.Z,{projectId:n,eventId:t.id,attachment:t.crashFile},(function(e){var n,s;return e&&(0,C.tZ)("small",null,r,": ",(0,C.tZ)("a",{href:"".concat(e,"?download=1")},null===(n=t.crashFile)||void 0===n?void 0:n.name)," (",(0,C.tZ)(R.Z,{bytes:(null===(s=t.crashFile)||void 0===s?void 0:s.size)||0}),")")}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.event,r=e.orgId,s=e.groupId,o=e.tagList,a=e.hasUser,i={};n.tags.forEach((function(e){i[e.key]=e.value}));var u="/organizations/".concat(r,"/issues/").concat(s,"/events/").concat(n.id,"/");return(0,C.tZ)("tr",{key:n.id,className:t},(0,C.tZ)("td",null,(0,C.tZ)("h5",null,(0,C.tZ)(k.Z,{to:u},(0,C.tZ)(x.Z,{date:n.dateCreated})),(0,C.tZ)("small",null,n.title.substr(0,100)),this.renderCrashFileLink())),a&&(0,C.tZ)("td",{className:"event-user table-user-info"},n.user?(0,C.tZ)("div",null,(0,C.tZ)(Z.Z,{user:n.user,size:24,className:"avatar",gravatar:!1}),n.user.email):(0,C.tZ)("span",null,"—")),o.map((function(e){return(0,C.tZ)("td",{key:e.key},(0,C.tZ)("div",null,"device"===e.key?(0,C.tZ)(j.ZP,{value:i[e.key]}):i[e.key]))})))}}]),s}(m.Component);O.displayName="EventsTableRow";const w=(0,S.Z)(O);var q=n("./app/locale.tsx");var I=function(e){c()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var s=h()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)});function s(){return a()(this,s),r.apply(this,arguments)}return u()(s,[{key:"render",value:function(){var e=this.props,t=e.events,n=e.tagList,r=e.orgId,s=e.projectId,o=e.groupId,a=!!t.find((function(e){return e.user}));return(0,C.tZ)("table",{className:"table events-table"},(0,C.tZ)("thead",null,(0,C.tZ)("tr",null,(0,C.tZ)("th",null,(0,q.t)("ID")),a&&(0,C.tZ)("th",null,(0,q.t)("User")),n.map((function(e){return(0,C.tZ)("th",{key:e.key},e.name)})))),(0,C.tZ)("tbody",null,t.map((function(e){return(0,C.tZ)(w,{key:e.id,event:e,orgId:r,projectId:s,groupId:o,tagList:n,hasUser:a})}))))}}]),s}(m.Component);I.displayName="EventsTable";const N=I;var P=n("./app/components/loadingError.tsx"),B=n("./app/components/loadingIndicator.tsx"),L=n("./app/components/pagination.tsx"),D=n("./app/components/panels/index.tsx"),z=n("./app/components/searchBar.tsx"),E=n("./app/utils/parseApiError.tsx"),F=n("./app/utils/withApi.tsx");function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){c()(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var s=h()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)});function s(e){var t;a()(this,s),(t=r.call(this,e)).handleSearch=function(e){var n=U({},t.props.location.query);n.query=e;var r=t.props.params,s=r.groupId,o=r.orgId;y.browserHistory.push({pathname:"/organizations/".concat(o,"/issues/").concat(s,"/events/"),query:n})},t.fetchData=function(){t.setState({loading:!0,error:!1});var e=U(U({},b()(t.props.location.query,["cursor","environment"])),{},{limit:50,query:t.state.query});t.props.api.request("/issues/".concat(t.props.params.groupId,"/events/"),{query:e,method:"GET",success:function(e,n,r){var s;t.setState({eventList:e,error:!1,loading:!1,pageLinks:null!==(s=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==s?s:""})},error:function(e){t.setState({error:(0,E.Z)(e),loading:!1})}})};var n=t.props.location.query;return t.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:n.query||""},t}return u()(s,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.location.search!==e.location.search){var t=e.location.query;this.setState({query:t.query},this.fetchData)}}},{key:"renderNoQueryResults",value:function(){return(0,C.tZ)(g.Z,null,(0,C.tZ)("p",null,(0,q.t)("Sorry, no events match your search query.")))}},{key:"renderEmpty",value:function(){return(0,C.tZ)(g.Z,null,(0,C.tZ)("p",null,(0,q.t)("There don't seem to be any events yet.")))}},{key:"renderResults",value:function(){var e=this.props,t=e.group,n=e.params,r=t.tags.filter((function(e){return"user"!==e.key}))||[];return(0,C.tZ)(N,{tagList:r,events:this.state.eventList,orgId:n.orgId,projectId:t.project.slug,groupId:n.groupId})}},{key:"renderBody",value:function(){return this.state.loading?(0,C.tZ)(B.Z,null):this.state.error?(0,C.tZ)(P.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty()}},{key:"render",value:function(){return(0,C.tZ)("div",null,(0,C.tZ)("div",{style:{marginBottom:20}},(0,C.tZ)(z.Z,{defaultQuery:"",placeholder:(0,q.t)("search event id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})),(0,C.tZ)(D.s_,{className:"event-list"},(0,C.tZ)(D.N,null,this.renderBody())),(0,C.tZ)(L.Z,{pageLinks:this.state.pageLinks}))}}]),s}(m.Component);A.displayName="GroupEvents";const M=(0,F.Z)(A)}}]);
//# sourceMappingURL=GroupEvents.js.map