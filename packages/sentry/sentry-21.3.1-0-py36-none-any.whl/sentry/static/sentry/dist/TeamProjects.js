(self.webpackChunk=self.webpackChunk||[]).push([["TeamProjects"],{"./app/views/settings/components/settingsProjectItem.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var o=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),s=n.n(o),r=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(l),u=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(u),m=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=n("../../../../node_modules/react/index.js"),f=n("./app/components/links/link.tsx"),g=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),j=n.n(g),v=n("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),y=n.n(v),b=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var k=function(e){c()(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return p()(this,e)});function r(){return s()(this,r),o.apply(this,arguments)}return a()(r,[{key:"render",value:function(){var e=this.props,t=e.project,n=y()(e,["project"]);return(0,b.tZ)("span",j()({className:"project-label"},n),(0,b.tZ)("span",{className:"project-name"},t.slug))}}]),r}(h.PureComponent);k.displayName="ProjectLabel";var Z=n("./app/components/projects/bookmarkStar.tsx"),P=n("./app/styles/space.tsx");var x=function(e){c()(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=d()(t);if(n){var s=d()(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return p()(this,e)});function r(){var e;s()(this,r);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=o.call.apply(o,[this].concat(n))).state={isBookmarked:e.props.project.isBookmarked},e.handleToggleBookmark=function(t){e.setState({isBookmarked:t})},e}return a()(r,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.organization;return(0,b.tZ)(w,null,(0,b.tZ)(_,{organization:n,project:t,isBookmarked:this.state.isBookmarked,onToggle:this.handleToggleBookmark}),(0,b.tZ)(f.Z,{to:"/settings/".concat(n.slug,"/projects/").concat(t.slug,"/")},(0,b.tZ)(k,{project:t})))}}]),r}(h.Component);x.displayName="ProjectItem";var w=(0,m.Z)("div",{target:"e15nsoxf0",label:"Wrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),_=(0,m.Z)(Z.Z,{target:"e15nsoxf1",label:"BookmarkLink"})("margin-right:",(0,P.Z)(1),";margin-top:-",(0,P.Z)(.25),";");const C=x},"./app/views/settings/organizationTeams/teamProjects.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TeamProjects:()=>N,default:()=>M});var o=n("../../../../node_modules/@babel/runtime/helpers/extends.js"),s=n.n(o),r=n("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(r),i=n("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(i),l=n("../../../../node_modules/@babel/runtime/helpers/createClass.js"),p=n.n(l),u=n("../../../../node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(u),m=n("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(m),f=n("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),g=n.n(f),j=n("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),v=n("../../../../node_modules/react/index.js"),y=n("./app/actionCreators/indicator.tsx"),b=n("./app/actions/projectActions.tsx"),k=n("./app/components/button.tsx"),Z=n("./app/components/dropdownAutoComplete/index.tsx"),P=n("./app/components/dropdownButton.tsx"),x=n("./app/components/loadingError.tsx"),w=n("./app/components/loadingIndicator.tsx"),_=n("./app/components/pagination.tsx"),C=n("./app/components/panels/index.tsx"),R=n("./app/components/tooltip.tsx"),z=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),B=n("./app/styles/space.tsx"),I=n("./app/utils.tsx"),A=n("./app/utils/withApi.tsx"),T=n("./app/utils/withOrganization.tsx"),L=n("./app/views/settings/components/emptyMessage.tsx"),q=n("./app/views/settings/components/settingsProjectItem.tsx"),O=n("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var N=function(e){d()(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=g()(t);if(n){var s=g()(this).constructor;e=Reflect.construct(o,arguments,s)}else e=o.apply(this,arguments);return h()(this,e)});function r(){var e;c()(this,r);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(e=o.call.apply(o,[this].concat(n))).state={error:!1,loading:!0,pageLinks:null,unlinkedProjects:[],linkedProjects:[]},e.fetchAll=function(){e.fetchTeamProjects(),e.fetchUnlinkedProjects()},e.handleLinkProject=function(t,n){var o=e.props.params,s=o.orgId,r=o.teamId;e.props.api.request("/projects/".concat(s,"/").concat(t.slug,"/teams/").concat(r,"/"),{method:"add"===n?"POST":"DELETE",success:function(t){e.fetchAll(),b.Z.updateSuccess(t),(0,y.S9)("add"===n?(0,S.t)("Successfully added project to team."):(0,S.t)("Successfully removed project from team"))},error:function(){(0,y.Iw)((0,S.t)("Wasn't able to change project association."))}})},e.handleProjectSelected=function(t){var n=e.state.unlinkedProjects.find((function(e){return e.id===t.value}));n&&e.handleLinkProject(n,"add")},e.handleQueryUpdate=function(t){e.fetchUnlinkedProjects(t.target.value)},e}return p()(r,[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"componentDidUpdate",value:function(e){e.params.orgId===this.props.params.orgId&&e.params.teamId===this.props.params.teamId||this.fetchAll(),e.location!==this.props.location&&this.fetchTeamProjects()}},{key:"fetchTeamProjects",value:function(){var e=this,t=this.props,n=t.location,o=t.params,s=o.orgId,r=o.teamId;this.setState({loading:!0}),this.props.api.requestPromise("/organizations/".concat(s,"/projects/"),{query:{query:"team:".concat(r),cursor:n.query.cursor||""},includeAllArgs:!0}).then((function(t){var n,o=a()(t,3),s=o[0],r=(o[1],o[2]);e.setState({loading:!1,error:!1,linkedProjects:s,pageLinks:null!==(n=null==r?void 0:r.getResponseHeader("Link"))&&void 0!==n?n:null})})).catch((function(){e.setState({loading:!1,error:!0})}))}},{key:"fetchUnlinkedProjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.props.params,o=n.orgId,s=n.teamId;this.props.api.requestPromise("/organizations/".concat(o,"/projects/"),{query:{query:t?"!team:".concat(s," ").concat(t):"!team:".concat(s)}}).then((function(t){e.setState({unlinkedProjects:t})}))}},{key:"projectPanelContents",value:function(e){var t=this,n=this.props.organization,o=new Set(n.access).has("org:write");return e.length?(0,I.Mx)(e).map((function(e){return(0,O.tZ)(U,{key:e.id},(0,O.tZ)(q.Z,{project:e,organization:n}),(0,O.tZ)(R.Z,{disabled:o,title:(0,S.t)("You do not have enough permission to change project association.")},(0,O.tZ)(k.ZP,{size:"small",disabled:!o,icon:(0,O.tZ)(z.JZ,{isCircled:!0,size:"xs"}),onClick:function(){t.handleLinkProject(e,"remove")}},(0,S.t)("Remove"))))})):(0,O.tZ)(L.Z,{size:"large",icon:(0,O.tZ)(z.Gy,{size:"xl"})},(0,S.t)("This team doesn't have access to any projects."))}},{key:"render",value:function(){var e=this,t=this.state,n=t.linkedProjects,o=t.unlinkedProjects,r=t.error,a=t.loading;if(r)return(0,O.tZ)(x.Z,{onRetry:function(){return e.fetchAll()}});if(a)return(0,O.tZ)(w.Z,null);var i=new Set(this.props.organization.access),c=o.map((function(e){return{value:e.id,searchKey:e.slug,label:(0,O.tZ)(E,null,e.slug)}}));return(0,O.tZ)(v.Fragment,null,(0,O.tZ)(C.s_,null,(0,O.tZ)(C.V9,{hasButtons:!0},(0,O.tZ)("div",null,(0,S.t)("Projects")),(0,O.tZ)("div",{style:{textTransform:"none"}},i.has("org:write")?(0,O.tZ)(Z.Z,{items:c,onChange:this.handleQueryUpdate,onSelect:this.handleProjectSelected,emptyMessage:(0,S.t)("No projects"),alignMenu:"right"},(function(e){var t=e.isOpen;return(0,O.tZ)(P.Z,{isOpen:t,size:"xsmall"},(0,S.t)("Add Project"))})):(0,O.tZ)(P.Z,{disabled:!0,title:(0,S.t)("You do not have enough permission to associate a project."),size:"xsmall"},(0,S.t)("Add Project")))),(0,O.tZ)(C.N,null,this.projectPanelContents(n))),(0,O.tZ)(_.Z,s()({pageLinks:this.state.pageLinks},this.props)))}}]),r}(v.Component);N.displayName="TeamProjects";var U=(0,j.Z)(C.Lv,{target:"e1em6z4a0",label:"StyledPanelItem"})("display:flex;align-items:center;justify-content:space-between;padding:",(0,B.Z)(2),";"),E=(0,j.Z)("div",{target:"e1em6z4a1",label:"ProjectListElement"})("padding:",(0,B.Z)(.25)," 0;");const M=(0,A.Z)((0,T.Z)(N))}}]);
//# sourceMappingURL=TeamProjects.js.map