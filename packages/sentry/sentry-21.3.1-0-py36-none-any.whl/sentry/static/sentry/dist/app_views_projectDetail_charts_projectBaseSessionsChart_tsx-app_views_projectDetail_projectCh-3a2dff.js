(self.webpackChunk=self.webpackChunk||[]).push([["app_views_projectDetail_charts_projectBaseSessionsChart_tsx-app_views_projectDetail_projectCh-3a2dff"],{"./app/views/projectDetail/charts/projectBaseSessionsChart.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>ae});var s=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),n=r.n(s),o=r("../../../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),a=r.n(o),i=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),l=r.n(i),u=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),c=r.n(u),p=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),d=r.n(p),h=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),m=r.n(h),f=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),v=r.n(f),y=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),g=r.n(y),b=r("../../../../node_modules/react/index.js"),x=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),S=r("../../../../node_modules/lodash/isEqual.js"),j=r.n(S),T=r("./app/components/charts/chartZoom.tsx"),P=r("./app/components/charts/errorPanel.tsx"),O=r("./app/components/charts/lineChart.tsx"),Z=r("./app/components/charts/releaseSeries.tsx"),C=r("./app/components/charts/stackedAreaChart.tsx"),D=r("./app/components/charts/styles.tsx"),R=r("./app/components/charts/transitionChart.tsx"),w=r("./app/components/charts/transparentLoadingMask.tsx"),A=r("./app/components/charts/utils.tsx"),_=r("./app/components/questionTooltip.tsx"),I=r("./app/icons/index.tsx"),k=r("./app/locale.tsx"),E=r("./app/utils/getDynamicText.tsx"),z=r("./app/utils/withGlobalSelection.tsx"),M=r("./app/views/releases/utils/index.tsx"),B=r("./app/views/releases/utils/sessionTerm.tsx"),N=r("./app/views/projectDetail/projectCharts.tsx"),q=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),L=r.n(q),V=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),F=r.n(V),U=r("../../../../node_modules/lodash/omit.js"),Y=r.n(U),$=r("./app/actionCreators/indicator.tsx"),W=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),X=r("./app/utils.tsx"),H=r("./app/utils/getPeriod.tsx"),G=r("./app/views/releases/detail/overview/chart/utils.tsx"),K=r("./app/views/projectDetail/utils.tsx");function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){return Y()(e,["api","organization","children","selection.datetime.utc"])},te=function(e){m()(n,e);var t,r,s=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=g()(t);if(r){var n=g()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return v()(this,e)});function n(){var e;c()(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=s.call.apply(s,[this].concat(r))).state={reloading:!1,errored:!1,timeseriesData:null,previousTimeseriesData:null,totalSessions:null},e.unmounting=!1,e.fetchData=F()(L().mark((function t(){var r,s,n,o,a,i,l,u,c,p,d,h;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,s=r.api,n=r.selection,o=r.onTotalValuesChange,a=r.displayMode,i=r.disablePrevious,l=!i&&(0,K.D)(n.datetime),e.setState((function(e){return{reloading:null!==e.timeseriesData,errored:!1}})),t.prev=3,t.next=6,s.requestPromise(e.path,{query:e.queryParams({shouldFetchWithPrevious:l})});case 6:if(u=t.sent,c=a===N.D.SESSIONS?e.transformSessionCountData(u):e.transformData(u,{fetchedWithPrevious:l}),p=c.timeseriesData,d=c.previousTimeseriesData,h=c.totalSessions,!e.unmounting){t.next=10;break}return t.abrupt("return");case 10:e.setState({reloading:!1,timeseriesData:p,previousTimeseriesData:d,totalSessions:h}),o(h),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),(0,$.Iw)((0,k.t)("Error loading chart data")),e.setState({errored:!0,reloading:!1,timeseriesData:null,previousTimeseriesData:null,totalSessions:null});case 18:case"end":return t.stop()}}),t,null,[[3,14]])}))),e}return d()(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){j()(ee(this.props),ee(e))||this.fetchData()}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"path",get:function(){var e=this.props.organization;return"/organizations/".concat(e.slug,"/sessions/")}},{key:"queryParams",value:function(e){var t,r,s=e.shouldFetchWithPrevious,n=void 0!==s&&s,o=this.props.selection,a=o.datetime,i=o.projects,l=o.environments,u={field:"sum(session)",groupBy:"session.status",interval:(t=a,r=(0,A.Nm)(t),r>=A.Zn?"1d":r>=A.B8?"4h":"1h"),project:i[0],environment:l};if(!n)return J(J({},u),(0,W.Q)(a));var c=o.datetime.period,p=(0,H.X)({period:c,start:void 0,end:void 0},{shouldDoublePeriod:!0}).statsPeriod;return J(J({},u),{},{statsPeriod:p})}},{key:"transformData",value:function(e,t){var r=t.fetchedWithPrevious,s=void 0!==r&&r,n=this.props.theme,o=Math.floor(e.intervals.length/2),a=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(s?o:0).reduce((function(e,t){return t+e}),0)}),0),i=s?e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(0,o).reduce((function(e,t){return t+e}),0)}),0):0,l=[{seriesName:(0,k.t)("This Period"),color:n.green300,data:e.intervals.slice(s?o:0).map((function(t,r){var n,l,u=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(s?o:0)[r]}),0),c=null!==(n=null===(l=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===l?void 0:l.series["sum(session)"].slice(s?o:0)[r])&&void 0!==n?n:0,p=(0,X.aQ)(c,u);return{name:t,value:0===a&&0===i?0:0===u?null:(0,M.Mf)(100-p)}}))}],u=s?{seriesName:(0,k.t)("Previous Period"),data:e.intervals.slice(0,o).map((function(t,r){var s,n,l=e.groups.reduce((function(e,t){return e+t.series["sum(session)"].slice(0,o)[r]}),0),u=null!==(s=null===(n=e.groups.find((function(e){return"crashed"===e.by["session.status"]})))||void 0===n?void 0:n.series["sum(session)"].slice(0,o)[r])&&void 0!==s?s:0,c=(0,X.aQ)(u,l);return{name:e.intervals[r+o],value:0===a&&0===i?0:0===l?null:(0,M.Mf)(100-c)}}))}:null;return{totalSessions:a,timeseriesData:l,previousTimeseriesData:u}}},{key:"transformSessionCountData",value:function(e){var t=(0,G.Yw)({response:e,field:"sum(session)"}),r=(0,G.A4)({response:e,field:"sum(session)",groupBy:"session.status",chartData:(0,G.gp)()});return{timeseriesData:Object.values(r),previousTimeseriesData:null,totalSessions:t}}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.timeseriesData;return e({loading:null===r,reloading:t.reloading,errored:t.errored,totalSessions:t.totalSessions,previousTimeseriesData:t.previousTimeseriesData,timeseriesData:null!=r?r:[]})}}]),n}(b.Component);te.displayName="SessionsRequest";const re=(0,x.Zz)(te);var se=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function ne(e){var t=e.title,r=e.theme,s=e.organization,n=e.router,o=e.selection,a=e.api,i=e.onTotalValuesChange,l=e.displayMode,u=e.help,c=e.disablePrevious,p=o.projects,d=o.environments,h=o.datetime,m=h.start,f=h.end,v=h.period,y=h.utc;return(0,se.tZ)(b.Fragment,null,(0,E.Z)({value:(0,se.tZ)(T.Z,{router:n,period:v,start:m,end:f,utc:y},(function(e){return(0,se.tZ)(re,{api:a,selection:o,organization:s,onTotalValuesChange:i,displayMode:l,disablePrevious:c},(function(s){var n=s.errored,o=s.loading,a=s.reloading,i=s.timeseriesData,c=s.previousTimeseriesData;return(0,se.tZ)(Z.Z,{utc:y,period:v,start:m,end:f,projects:p,environments:d},(function(s){var p=s.releaseSeries;return n?(0,se.tZ)(P.Z,null,(0,se.tZ)(I.FC,{color:"gray300",size:"lg"})):(0,se.tZ)(R.Z,{loading:o,reloading:a},(0,se.tZ)(w.Z,{visible:a}),(0,se.tZ)(D.ws,null,t,u&&(0,se.tZ)(_.Z,{size:"sm",position:"top",title:u})),(0,se.tZ)(oe,{theme:r,zoomRenderProps:e,reloading:a,timeSeries:i,previousTimeSeries:c?[c]:void 0,releaseSeries:p,displayMode:l}))}))}))})),fixed:"".concat(t," Chart")}))}ne.displayName="ProjectBaseSessionsChart";var oe=function(e){m()(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=g()(t);if(r){var n=g()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return v()(this,e)});function o(){var e;c()(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).state={seriesSelection:{},forceUpdate:!1},e.handleLegendSelectChanged=function(t){var r=t.selected,s=Object.keys(r).reduce((function(e,t){return e[t]=r[t],e}),{});e.setState({seriesSelection:s,forceUpdate:!0},(function(){return e.setState({forceUpdate:!1})}))},e}return d()(o,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.forceUpdate||!j()(this.state.seriesSelection,t.seriesSelection)||e.releaseSeries!==this.props.releaseSeries&&!e.reloading&&!this.props.reloading||!(!this.props.reloading||e.reloading)||e.timeSeries!==this.props.timeSeries}},{key:"legend",get:function(){var e,t,r,s=this.props,n=s.theme,o=s.timeSeries,i=s.previousTimeSeries,u=s.releaseSeries,c=this.state.seriesSelection,p=(null===(e=u[0])||void 0===e||null===(t=e.markLine)||void 0===t?void 0:t.data.length)>=A.XO,d=o.filter((function(e){return B.U1.healthy!==e.seriesName})).some((function(e){return e.data.some((function(e){return e.value>0}))})),h=0===Object.keys(c).length&&(p||d)?(r={},l()(r,(0,k.t)("Releases"),!p),l()(r,B.U1.healthy,!d),r):c;return{right:10,top:0,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",textStyle:{color:n.textColor,verticalAlign:"top",fontSize:11,fontFamily:n.text.family},data:[].concat(a()(o.map((function(e){return e.seriesName}))),a()((null!=i?i:[]).map((function(e){return e.seriesName}))),a()(u.map((function(e){return e.seriesName})))),selected:h}}},{key:"chartOptions",get:function(){var e=this.props,t=e.theme,r=e.displayMode;return{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:function(e){return null===e?"—":r===N.D.STABILITY?(0,M.zB)(e,0,3):"number"==typeof e?e.toLocaleString():e}},yAxis:r===N.D.STABILITY?{axisLabel:{color:t.gray200,formatter:function(e){return(0,M.zB)(e)}},scale:!0,max:100}:{min:0}}}},{key:"render",value:function(){var e=this.props,t=e.zoomRenderProps,r=e.timeSeries,s=e.previousTimeSeries,o=e.releaseSeries,i=e.displayMode===N.D.STABILITY?O.Z:C.Z;return(0,se.tZ)(i,n()({},t,this.chartOptions,{legend:this.legend,series:Array.isArray(o)?[].concat(a()(r),a()(o)):r,previousPeriod:s,onLegendSelectChanged:this.handleLegendSelectChanged,transformSinglePointToBar:!0}))}}]),o}(b.Component);oe.displayName="Chart";const ae=(0,z.Z)((0,x.Zz)(ne))},"./app/views/projectDetail/projectCharts.tsx":(e,t,r)=>{"use strict";r.d(t,{D:()=>be,Z:()=>Se});var s=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),n=r.n(s),o=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),a=r.n(o),i=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),l=r.n(i),u=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),c=r.n(u),p=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),d=r.n(p),h=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=r.n(h),f=r("../../../../node_modules/react/index.js"),v=r("../../../../node_modules/react-router/es/index.js"),y=r("../../../../node_modules/emotion-theming/dist/emotion-theming.browser.esm.js"),g=r("./app/components/charts/barChart.tsx"),b=r("./app/components/charts/loadingPanel.tsx"),x=r("./app/components/charts/optionSelector.tsx"),S=r("./app/components/charts/styles.tsx"),j=r("./app/components/charts/utils.tsx"),T=r("./app/components/panels/index.tsx"),P=r("./app/components/placeholder.tsx"),O=r("./app/constants/chartPalette.tsx"),Z=r("./app/constants/notAvailableMessages.tsx"),C=r("./app/locale.tsx"),D=r("./app/utils.tsx"),R=r("./app/utils/analytics.tsx"),w=r("./app/utils/queryString.tsx"),A=r("./app/utils/withApi.tsx"),_=r("./app/views/releases/utils/sessionTerm.tsx"),I=r("./app/views/performance/data.tsx"),k=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),E=r.n(k),z=r("../../../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),M=r.n(z),B=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),N=r.n(B),q=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),L=r.n(q),V=r("../../../../node_modules/@sentry/minimal/esm/index.js"),F=r("./app/actionCreators/events.tsx"),U=r("./app/components/charts/eventsChart.tsx"),Y=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),$=r("./app/components/organizations/globalSelectionHeader/utils.tsx"),W=r("./app/components/questionTooltip.tsx"),X=r("./app/utils/discover/charts.tsx"),H=r("./app/utils/getDynamicText.tsx"),G=r("./app/utils/withGlobalSelection.tsx"),K=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){c()(o,e);var t,r,s,n=(r=o,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m()(r);if(s){var n=m()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d()(this,e)});function o(){return a()(this,o),n.apply(this,arguments)}return l()(o,[{key:"componentDidMount",value:function(){this.fetchTotalCount()}},{key:"componentDidUpdate",value:function(e){(0,$.WO)(this.props.selection,e.selection)||this.fetchTotalCount()}},{key:"fetchTotalCount",value:(t=L()(N().mark((function e(){var t,r,s,n,o,a,i,l,u,c;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,s=t.organization,n=t.selection,o=t.onTotalValuesChange,a=t.query,i=n.projects,l=n.environments,u=n.datetime,e.prev=2,e.next=5,(0,F.JE)(r,s.slug,J({field:[],query:a,environment:l,project:i.map((function(e){return String(e)}))},(0,Y.Q)(u)));case 5:c=e.sent,o(c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o(null),V.Tb(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.router,r=e.organization,s=e.selection,n=e.api,o=e.yAxis,a=e.query,i=e.field,l=e.title,u=e.theme,c=e.help,p=M()(e,["router","organization","selection","api","yAxis","query","field","title","theme","help"]),d=s.projects,h=s.environments,m=s.datetime,f=m.start,v=m.end,y=m.period,g=m.utc;return(0,H.Z)({value:(0,K.tZ)(U.Z,E()({},p,{router:t,organization:r,showLegend:!0,yAxis:o,query:a,api:n,projects:d,environments:h,start:f,end:v,period:y,utc:g,field:i,currentSeriesName:(0,C.t)("This Period"),previousSeriesName:(0,C.t)("Previous Period"),disableableSeries:[(0,C.t)("This Period"),(0,C.t)("Previous Period")],chartHeader:(0,K.tZ)(S.ws,null,l,c&&(0,K.tZ)(W.Z,{size:"sm",position:"top",title:c})),legendOptions:{right:10,top:0},chartOptions:{grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},yAxis:{axisLabel:{color:u.gray200,formatter:function(e){return(0,X.gu)(e,o)}},scale:!0}}})),fixed:"".concat(l," Chart")})}}]),o}(f.Component);ee.displayName="ProjectBaseEventsChart";const te=(0,G.Z)((0,y.Zz)(ee));var re=r("./app/views/projectDetail/charts/projectBaseSessionsChart.tsx"),se=r("../../../../node_modules/@babel/runtime/helpers/slicedToArray.js"),ne=r.n(se),oe=r("../../../../node_modules/@babel/runtime/helpers/get.js"),ae=r.n(oe),ie=r("./app/components/asyncComponent.tsx"),le=r("./app/components/charts/baseChart.tsx"),ue=r("./app/components/charts/transitionChart.tsx"),ce=r("./app/components/charts/transparentLoadingMask.tsx"),pe=r("./app/constants/index.tsx");function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=["1h","24h","7d","14d","30d"],fe=function(e){c()(n,e);var t,r,s=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=m()(t);if(r){var n=m()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return d()(this,e)});function n(){return a()(this,n),s.apply(this,arguments)}return l()(n,[{key:"getDefaultState",value:function(){return he(he({},ae()(m()(n.prototype),"getDefaultState",this).call(this)),{},{projects:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.projectId;return r?[["projects","/organizations/".concat(t.slug,"/projects/"),{query:{statsPeriod:this.getStatsPeriod(),query:"id:".concat(r)}}]]:[]}},{key:"componentDidMount",value:function(){var e=this.props.location;me.includes(e.query.statsPeriod)||v.browserHistory.replace({pathname:e.pathname,query:he(he({},e.query),{},{statsPeriod:this.getStatsPeriod(),start:void 0,end:void 0})})}},{key:"onLoadAllEndpointsSuccess",value:function(){var e,t,r,s;this.props.onTotalValuesChange(null!==(e=null===(t=this.state.projects)||void 0===t||null===(r=t[0])||void 0===r||null===(s=r.stats)||void 0===s?void 0:s.reduce((function(e,t){return e+ne()(t,2)[1]}),0))&&void 0!==e?e:null)}},{key:"getStatsPeriod",value:function(){var e=this.props.location.query.statsPeriod;return me.includes(e)?e:pe.GY}},{key:"getSeries",value:function(){var e,t,r,s=this.state.projects;return[{cursor:"normal",name:(0,C.t)("Errors"),type:"bar",data:null!==(e=null==s||null===(t=s[0])||void 0===t||null===(r=t.stats)||void 0===r?void 0:r.map((function(e){var t=ne()(e,2);return[1e3*t[0],t[1]]})))&&void 0!==e?e:[]}]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var e=this.props.theme,t=this.state,r=t.loading,s=t.reloading;return(0,H.Z)({value:(0,K.tZ)(ue.Z,{loading:r,reloading:s},(0,K.tZ)(ce.Z,{visible:s}),(0,K.tZ)(S.ws,null,(0,C.t)("Daily Errors")),(0,K.tZ)(le.Z,{series:this.getSeries(),isGroupedByDate:!0,showTimeInTooltip:!0,colors:[e.purple300,e.purple200],grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"}})),fixed:(0,C.t)("Number of Errors Chart")})}}]),n}(ie.Z);const ve=(0,y.Zz)(fe);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var be;!function(e){e.APDEX="apdex",e.FAILURE_RATE="failure_rate",e.TPM="tpm",e.ERRORS="errors",e.TRANSACTIONS="transactions",e.STABILITY="crash_free",e.SESSIONS="sessions"}(be||(be={}));var xe=function(e){c()(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=m()(t);if(r){var n=m()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return d()(this,e)});function o(){var e;a()(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=s.call.apply(s,[this].concat(r))).state={totalValues:null},e.handleDisplayModeChange=function(t){var r=e.props,s=r.location,o=r.chartId,a=r.chartIndex,i=r.organization;(0,R.ec)({eventKey:"project_detail.change_chart".concat(a+1),eventName:"Project Detail: Change Chart #".concat(a+1),organization_id:parseInt(i.id,10),metric:t}),v.browserHistory.push({pathname:s.pathname,query:ge(ge({},s.query),{},n()({},o,t))})},e.handleTotalValuesChange=function(t){t!==e.state.totalValues&&e.setState({totalValues:t})},e}return l()(o,[{key:"defaultDisplayModes",get:function(){var e=this.props,t=e.hasSessions,r=e.hasTransactions;return t||r?t&&!r?[be.STABILITY,be.ERRORS]:!t&&r?[be.FAILURE_RATE,be.APDEX]:[be.STABILITY,be.APDEX]:[be.ERRORS]}},{key:"otherActiveDisplayModes",get:function(){var e=this,t=this.props,r=t.location,s=t.visibleCharts,n=t.chartId;return s.filter((function(e){return e!==n})).map((function(t){return(0,w.ro)(r.query[t],e.defaultDisplayModes[s.findIndex((function(e){return e===t}))])}))}},{key:"displayMode",get:function(){var e=this.props,t=e.location,r=e.chartId,s=e.chartIndex,n=(0,w.ro)(t.query[r])||this.defaultDisplayModes[s];return Object.values(be).includes(n)?n:this.defaultDisplayModes[s]}},{key:"displayModes",get:function(){var e=this.props,t=e.organization,r=e.hasSessions,s=e.hasTransactions,n=t.features.includes("performance-view"),o=Z.Z.performance,a=Z.Z.releaseHealth;return[{value:be.STABILITY,label:(0,C.t)("Crash Free Sessions"),disabled:this.otherActiveDisplayModes.includes(be.STABILITY)||!r,tooltip:r?void 0:a},{value:be.APDEX,label:(0,C.t)("Apdex"),disabled:this.otherActiveDisplayModes.includes(be.APDEX)||!n||!s,tooltip:n&&s?(0,I.$r)(t,I.V$.APDEX):o},{value:be.FAILURE_RATE,label:(0,C.t)("Failure Rate"),disabled:this.otherActiveDisplayModes.includes(be.FAILURE_RATE)||!n||!s,tooltip:n&&s?(0,I.$r)(t,I.V$.FAILURE_RATE):o},{value:be.TPM,label:(0,C.t)("Transactions Per Minute"),disabled:this.otherActiveDisplayModes.includes(be.TPM)||!n||!s,tooltip:n&&s?(0,I.$r)(t,I.V$.TPM):o},{value:be.ERRORS,label:(0,C.t)("Number of Errors"),disabled:this.otherActiveDisplayModes.includes(be.ERRORS)},{value:be.SESSIONS,label:(0,C.t)("Number of Sessions"),disabled:this.otherActiveDisplayModes.includes(be.SESSIONS)||!r,tooltip:r?void 0:a},{value:be.TRANSACTIONS,label:(0,C.t)("Number of Transactions"),disabled:this.otherActiveDisplayModes.includes(be.TRANSACTIONS)||!n||!s,tooltip:n&&s?void 0:o}]}},{key:"summaryHeading",get:function(){switch(this.displayMode){case be.ERRORS:return(0,C.t)("Total Errors");case be.STABILITY:case be.SESSIONS:return(0,C.t)("Total Sessions");case be.APDEX:case be.FAILURE_RATE:case be.TPM:case be.TRANSACTIONS:default:return(0,C.t)("Total Transactions")}}},{key:"barChartInterval",get:function(){var e=this.props.location.query,t=(0,j.Nm)(ge(ge({},e),{},{period:(0,w.ro)(e.statsPeriod)}));return t>=j.$i?"1d":t>=j.IZ?"12h":t>j.w3?"6h":t===j.w3?"1h":t<=j.dV?"1m":"15m"}},{key:"render",value:function(){var e=this.props,t=e.api,r=e.router,s=e.location,n=e.organization,o=e.theme,a=e.projectId,i=e.hasSessions,l=this.state.totalValues,u=n.features.includes("discover-basic"),c=this.displayMode;return(0,K.tZ)(T.s_,null,(0,K.tZ)(S.BO,null,(0,D.ri)(i)?(0,K.tZ)(f.Fragment,null,c===be.APDEX&&(0,K.tZ)(te,{title:(0,C.t)("Apdex"),help:(0,I.$r)(n,I.V$.APDEX),query:"event.type:transaction",yAxis:"apdex(".concat(n.apdexThreshold,")"),field:["apdex(".concat(n.apdexThreshold,")")],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[O.Z[0][0],o.purple200]}),c===be.FAILURE_RATE&&(0,K.tZ)(te,{title:(0,C.t)("Failure Rate"),help:(0,I.$r)(n,I.V$.FAILURE_RATE),query:"event.type:transaction",yAxis:"failure_rate()",field:["failure_rate()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.red300,o.purple200]}),c===be.TPM&&(0,K.tZ)(te,{title:(0,C.t)("Transactions Per Minute"),help:(0,I.$r)(n,I.V$.TPM),query:"event.type:transaction",yAxis:"tpm()",field:["tpm()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.yellow300,o.purple200],disablePrevious:!0}),c===be.ERRORS&&(u?(0,K.tZ)(te,{title:(0,C.t)("Number of Errors"),query:"!event.type:transaction",yAxis:"count()",field:["count()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.purple300,o.purple200],interval:this.barChartInterval,chartComponent:g.Z,disableReleases:!0}):(0,K.tZ)(ve,{organization:n,projectId:a,location:s,onTotalValuesChange:this.handleTotalValuesChange})),c===be.TRANSACTIONS&&(0,K.tZ)(te,{title:(0,C.t)("Number of Transactions"),query:"event.type:transaction",yAxis:"count()",field:["count()"],api:t,router:r,organization:n,onTotalValuesChange:this.handleTotalValuesChange,colors:[o.gray200,o.purple200],interval:this.barChartInterval,chartComponent:g.Z,disableReleases:!0}),c===be.STABILITY&&(0,K.tZ)(re.Z,{title:(0,C.t)("Crash Free Sessions"),help:(0,_.RE)(_._k.STABILITY,null),router:r,api:t,organization:n,onTotalValuesChange:this.handleTotalValuesChange,displayMode:c}),c===be.SESSIONS&&(0,K.tZ)(re.Z,{title:(0,C.t)("Number of Sessions"),router:r,api:t,organization:n,onTotalValuesChange:this.handleTotalValuesChange,displayMode:c,disablePrevious:!0})):(0,K.tZ)(b.Z,null)),(0,K.tZ)(S.xx,null,(0,D.ri)(i)?(0,K.tZ)(f.Fragment,null,(0,K.tZ)(S.m2,null,(0,K.tZ)(S.OT,null,this.summaryHeading),(0,K.tZ)(S.uN,null,"number"==typeof l?l.toLocaleString():"—")),(0,K.tZ)(S.m2,null,(0,K.tZ)(x.Z,{title:(0,C.t)("Display"),selected:c,options:this.displayModes,onChange:this.handleDisplayModeChange}))):(0,K.tZ)(P.Z,{height:"34px"})))}}]),o}(f.Component);xe.displayName="ProjectCharts";const Se=(0,A.Z)((0,y.Zz)(xe))},"./app/views/projectDetail/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{D:()=>n,W:()=>o});var s=r("./app/components/charts/utils.tsx");function n(e){var t=e.start,r=e.end,n=e.period;return!t&&!r&&(0,s.Sw)(!0,n)}function o(e,t){return e.query.environment!==t.query.environment||e.query.project!==t.query.project}},"./app/views/releases/list/releaseLanding.tsx":(e,t,r)=>{"use strict";r.d(t,{J:()=>M,Z:()=>L});var s=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),n=r.n(s),o=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),a=r.n(o),i=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),l=r.n(i),u=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=r.n(u),p=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=r.n(p),h=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),m=r("../../../../node_modules/react/index.js"),f=r("./images/spot/releases-empty-state.svg"),v=r.n(f),y=r("./images/spot/releases-tour-commits.svg"),g=r.n(y),b=r("./images/spot/releases-tour-email.svg"),x=r.n(b),S=r("./images/spot/releases-tour-resolution.svg"),j=r.n(S),T=r("./images/spot/releases-tour-stats.svg"),P=r.n(T),O=r("./app/components/button.tsx"),Z=r("./app/components/buttonBar.tsx"),C=r("./app/components/emptyStateWarning.tsx"),D=r("./app/components/modals/featureTourModal.tsx"),R=r("./app/components/onboardingPanel.tsx"),w=r("./app/locale.tsx"),A=r("./app/utils/analytics.tsx"),_=r("./app/views/asyncView.tsx"),I=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=d()(e);if(t){var n=d()(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return c()(this,r)}}var E="https://docs.sentry.io/product/releases/",z=(0,I.tZ)(O.ZP,{external:!0,href:E},(0,w.t)("Setup")),M=[{title:(0,w.t)("Suspect Commits"),image:(0,I.tZ)(D.oP,{src:g()}),body:(0,I.tZ)(D.RB,null,(0,w.t)("Sentry suggests which commit caused an issue and who is likely responsible so you can triage.")),actions:z},{title:(0,w.t)("Release Stats"),image:(0,I.tZ)(D.oP,{src:P()}),body:(0,I.tZ)(D.RB,null,(0,w.t)("Get an overview of the commits in each release, and which issues were introduced or fixed.")),actions:z},{title:(0,w.t)("Easily Resolve"),image:(0,I.tZ)(D.oP,{src:j()}),body:(0,I.tZ)(D.RB,null,(0,w.t)("Automatically resolve issues by including the issue number in your commit message.")),actions:z},{title:(0,w.t)("Deploy Emails"),image:(0,I.tZ)(D.oP,{src:x()}),body:(0,I.tZ)(D.RB,null,(0,w.t)("Receive email notifications about when your code gets deployed. This can be customized in settings."))}],B=function(e){l()(r,e);var t=k(r);function r(){return n()(this,r),t.apply(this,arguments)}return a()(r,[{key:"getEndpoints",value:function(){var e=this.props.organization.slug;return[["releases","/organizations/".concat(e,"/releases/"),{query:{per_page:1,summaryStatsPeriod:"30d"}}]]}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.projectId;return 0===this.state.releases.length?(0,I.tZ)(N,{organization:t,projectId:r}):(0,I.tZ)(C.Z,{small:!0},(0,w.t)("There are no releases."))}}]),r}(_.Z),N=function(e){l()(r,e);var t=k(r);function r(){var e;n()(this,r);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleTourAdvance=function(t,r){var s=e.props,n=s.organization,o=s.projectId;(0,A.ec)({eventKey:"releases.tour.advance",eventName:"Releases: Tour Advance",organization_id:parseInt(n.id,10),project_id:o,step:t,duration:r})},e.handleClose=function(t,r){var s=e.props,n=s.organization,o=s.projectId;(0,A.ec)({eventKey:"releases.tour.close",eventName:"Releases: Tour Close",organization_id:parseInt(n.id,10),project_id:o,step:t,duration:r})},e}return a()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.organization,r=e.projectId;(0,A.ec)({eventKey:"releases.landing_card_viewed",eventName:"Releases: Landing Card Viewed",organization_id:parseInt(t.id,10),project_id:r})}},{key:"render",value:function(){return(0,I.tZ)(R.Z,{image:(0,I.tZ)("img",{src:v()})},(0,I.tZ)("h3",null,(0,w.t)("Demystify Releases")),(0,I.tZ)("p",null,(0,w.t)("Did you know how many errors your latest release triggered? We do. And more, too.")),(0,I.tZ)(q,{gap:1},(0,I.tZ)(D.ZP,{steps:M,onAdvance:this.handleTourAdvance,onCloseModal:this.handleClose,doneText:(0,w.t)("Start Setup"),doneUrl:E},(function(e){var t=e.showModal;return(0,I.tZ)(O.ZP,{priority:"default",onClick:t},(0,w.t)("Take a Tour"))})),(0,I.tZ)(O.ZP,{priority:"primary",href:E,external:!0},(0,w.t)("Start Setup"))))}}]),r}(m.Component);N.displayName="Promo";var q=(0,h.Z)(Z.Z,{target:"ecpzmjl0",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"});const L=B},"./images/spot/releases-empty-state.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-empty-state.957883.svg"},"./images/spot/releases-tour-commits.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-commits.da8e6d.svg"},"./images/spot/releases-tour-email.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-email.95829e.svg"},"./images/spot/releases-tour-resolution.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-resolution.5f727e.svg"},"./images/spot/releases-tour-stats.svg":(e,t,r)=>{e.exports=r.p+"spot/releases-tour-stats.239b9d.svg"}}]);
//# sourceMappingURL=app_views_projectDetail_charts_projectBaseSessionsChart_tsx-app_views_projectDetail_projectCh-3a2dff.js.map