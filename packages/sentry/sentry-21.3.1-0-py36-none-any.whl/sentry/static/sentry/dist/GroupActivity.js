(self.webpackChunk=self.webpackChunk||[]).push([["GroupActivity"],{"./app/components/commitLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l}),r("../../../../node_modules/react/index.js");var s=r("./app/components/button.tsx"),n=r("./app/components/links/externalLink.tsx"),o=r("./app/icons/index.tsx"),i=r("./app/locale.tsx"),a=r("./app/utils.tsx"),u=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js"),c=[{icon:(0,u.tZ)(o.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:(0,u.tZ)(o.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commits/").concat(r)}},{icon:(0,u.tZ)(o.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:(0,u.tZ)(o.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}}];const l=function(e){var t=e.inline,r=e.commitId,o=e.repository;if(!r||!o)return(0,u.tZ)("span",null,(0,i.t)("Unknown Commit"));var l=(0,a.e4)(r),p=c.find((function(e){return!!o.provider&&e.providerIds.includes(o.provider.id)}));if(void 0===p)return(0,u.tZ)("span",null,l);var d=o.url&&p.commitUrl({commitId:r,baseUrl:o.url});return t?(0,u.tZ)(n.Z,{className:"inline-commit",href:d},p.icon," "+l):(0,u.tZ)(s.ZP,{external:!0,href:d,size:"small",icon:p.icon},l)}},"./app/components/pullRequestLink.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../../../../node_modules/react/index.js");var s=r("./app/components/links/externalLink.tsx"),n=r("./app/icons/index.tsx"),o=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");const i=function(e){var t=e.pullRequest,r=e.repository,i=e.inline,a="".concat(r.name," #").concat(t.id,": ").concat(t.title);return t.externalUrl?(0,o.tZ)(s.Z,{className:i?"inline-commit":"btn btn-default btn-sm",href:t.externalUrl},function(e){if(!e.provider)return null;var t=e.provider.id;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,o.tZ)(n.Uv,{size:"xs"});case"gitlab":return(0,o.tZ)(n.Et,{size:"xs"});case"bitbucket":return(0,o.tZ)(n.Ub,{size:"xs"});default:return null}}(r),i?"":" ",a):(0,o.tZ)("span",null,a)}},"./app/components/reprocessedBox.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var s=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),n=r.n(s),o=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),i=r.n(o),a=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),u=r.n(a),c=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=r.n(c),p=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=r.n(p),m=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),h=r("../../../../node_modules/react/index.js"),v=r("./app/components/events/styles.tsx"),g=r("./app/components/links/link.tsx"),f=r("./app/icons/index.tsx"),y=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),x=r("./app/utils/localStorage.tsx"),Z=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");var b=function(e){u()(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=d()(t);if(r){var n=d()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return l()(this,e)});function o(){var e;n()(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=s.call.apply(s,[this].concat(r))).state={isBannerHidden:"true"===x.Z.getItem(e.getBannerUniqueId())},e.handleBannerDismiss=function(){x.Z.setItem(e.getBannerUniqueId(),"true"),e.setState({isBannerHidden:!0})},e}return i()(o,[{key:"getBannerUniqueId",value:function(){var e=this.props.reprocessActivity.id;return"reprocessed-activity-".concat(e,"-banner-dismissed")}},{key:"renderMessage",value:function(){var e=this.props,t=e.orgSlug,r=e.reprocessActivity,s=e.groupCount,n=e.groupId,o=r.data,i=o.eventCount,a=o.oldGroupId,u=o.newGroupId,c="/organizations/".concat(t,"/issues/?query=reprocessing.original_issue_id:").concat(a);return 0===s?(0,y._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,Z.tZ)(g.Z,{to:c},(0,y.tn)("See %s new event","See %s new events",i))}):(0,y._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,Z.tZ)(g.Z,{to:c},u===Number(n)?(0,y.tn)("See %s reprocessed event","See %s reprocessed events",i):(0,y.tn)("See %s new event","See %s new events",i))})}},{key:"render",value:function(){if(this.state.isBannerHidden)return null;var e=this.props.className;return(0,Z.tZ)(v.UP,{priority:"success",className:e},(0,Z.tZ)(E,null,(0,Z.tZ)(f.DL,{color:"green300",isCircled:!0}),(0,Z.tZ)("span",null,this.renderMessage()),(0,Z.tZ)(S,{color:"green300","aria-label":(0,y.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})))}}]),o}(h.Component);b.displayName="ReprocessedBox";const N=b;var E=(0,m.Z)(v._B,{target:"e2r0jxr0",label:"StyledBannerSummary"})("& > svg:last-child{margin-right:0;margin-left:",(0,_.Z)(1),";}"),S=(0,m.Z)(f.bM,{target:"e2r0jxr1",label:"StyledIconClose"})({name:"4g6ai3",styles:"cursor:pointer;"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GroupActivity:()=>X,default:()=>ee});var s=r("../../../../node_modules/@babel/runtime/helpers/extends.js"),n=r.n(s),o=r("../../../../node_modules/@babel/runtime/regenerator/index.js"),i=r.n(o),a=r("../../../../node_modules/@babel/runtime/helpers/asyncToGenerator.js"),u=r.n(a),c=r("../../../../node_modules/@babel/runtime/helpers/classCallCheck.js"),l=r.n(c),p=r("../../../../node_modules/@babel/runtime/helpers/createClass.js"),d=r.n(p),m=r("../../../../node_modules/@babel/runtime/helpers/inherits.js"),h=r.n(m),v=r("../../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),g=r.n(v),f=r("../../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js"),y=r.n(f),_=r("../../../../node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),x=r("../../../../node_modules/react/index.js"),Z=r("./app/actionCreators/group.tsx"),b=r("./app/actionCreators/indicator.tsx"),N=r("./app/components/activity/author.tsx"),E=r("./app/components/activity/item/index.tsx"),S=r("./app/components/activity/note/index.tsx"),I=r("./app/components/activity/note/inputWithStorage.tsx"),k=r("./app/components/errorBoundary.tsx"),w=r("./app/components/reprocessedBox.tsx"),R=r("./app/constants/index.tsx"),C=r("./app/locale.tsx"),U=r("./app/stores/configStore.tsx"),j=r("./app/styles/space.tsx"),B=r("./app/types/index.tsx"),O=r("./app/utils/guid.tsx"),T=r("./app/utils/withApi.tsx"),A=r("./app/utils/withOrganization.tsx"),D=r("../../../../node_modules/@babel/runtime/helpers/defineProperty.js"),L=r.n(D),G=r("../../../../node_modules/@babel/runtime/helpers/typeof.js"),z=r.n(G),$=r("./app/components/commitLink.tsx"),P=r("./app/components/duration.tsx"),V=r("./app/components/links/externalLink.tsx"),M=r("./app/components/links/link.tsx"),q=r("./app/components/pullRequestLink.tsx"),J=r("./app/components/version.tsx"),W=r("./app/stores/memberListStore.tsx"),H=r("./app/stores/teamStore.tsx"),F=r("../../../../node_modules/@emotion/core/dist/core.browser.esm.js");function K(e){var t=e.activity,r=e.orgSlug,s=e.projectId,n=e.author,o="/organizations/".concat(r,"/issues/");return(0,F.tZ)(x.Fragment,null,function(){switch(t.type){case B.fc.NOTE:return(0,C._N)("[author] left a comment",{author:n});case B.fc.SET_RESOLVED:return(0,C._N)("[author] marked this issue as resolved",{author:n});case B.fc.SET_RESOLVED_BY_AGE:return(0,C._N)("[author] marked this issue as resolved due to inactivity",{author:n});case B.fc.SET_RESOLVED_IN_RELEASE:return t.data.version?(0,C._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,F.tZ)(J.Z,{version:t.data.version,projectId:s,tooltipRawVersion:!0})}):(0,C._N)("[author] marked this issue as resolved in the upcoming release",{author:n});case B.fc.SET_RESOLVED_IN_COMMIT:return(0,C._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,F.tZ)($.Z,{inline:!0,commitId:t.data.commit.id,repository:t.data.commit.repository})});case B.fc.SET_RESOLVED_IN_PULL_REQUEST:var e=t.data.pullRequest;return(0,C._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,F.tZ)(q.Z,{inline:!0,pullRequest:e,repository:e.repository})});case B.fc.SET_UNRESOLVED:return(0,C._N)("[author] marked this issue as unresolved",{author:n});case B.fc.SET_IGNORED:return(f=t.data).ignoreDuration?(0,C._N)("[author] ignored this issue for [duration]",{author:n,duration:(0,F.tZ)(P.Z,{seconds:60*f.ignoreDuration})}):f.ignoreCount&&f.ignoreWindow?(0,C._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:n,count:f.ignoreCount,duration:(0,F.tZ)(P.Z,{seconds:60*f.ignoreWindow})}):f.ignoreCount?(0,C._N)("[author] ignored this issue until it happens [count] time(s)",{author:n,count:f.ignoreCount}):f.ignoreUserCount&&f.ignoreUserWindow?(0,C._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:n,count:f.ignoreUserCount,duration:(0,F.tZ)(P.Z,{seconds:60*f.ignoreUserWindow})}):f.ignoreUserCount?(0,C._N)("[author] ignored this issue until it affects [count] user(s)",{author:n,count:f.ignoreUserCount}):(0,C._N)("[author] ignored this issue",{author:n});case B.fc.SET_PUBLIC:return(0,C._N)("[author] made this issue public",{author:n});case B.fc.SET_PRIVATE:return(0,C._N)("[author] made this issue private",{author:n});case B.fc.SET_REGRESSION:var i=t.data;return i.version?(0,C._N)("[author] marked this issue as a regression in [version]",{author:n,version:(0,F.tZ)(J.Z,{version:i.version,projectId:s,tooltipRawVersion:!0})}):(0,C._N)("[author] marked this issue as a regression",{author:n});case B.fc.CREATE_ISSUE:var a=t.data;return(0,C._N)("[author] created an issue on [provider] titled [title]",{author:n,provider:a.provider,title:(0,F.tZ)(V.Z,{href:a.location},a.title)});case B.fc.UNMERGE_SOURCE:var u=t.data,c=u.destination,l=u.fingerprints;return(0,C.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",l.length,n,c?(0,F.tZ)(M.Z,{to:"".concat(o).concat(c.id)},c.shortId):(0,C.t)("a group"));case B.fc.UNMERGE_DESTINATION:var p=t.data,d=p.source,m=p.fingerprints;return(0,C.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",m.length,n,d?(0,F.tZ)(M.Z,{to:"".concat(o).concat(d.id)},d.shortId):(0,C.t)("a group"));case B.fc.FIRST_SEEN:return(0,C._N)("[author] first saw this issue",{author:n});case B.fc.ASSIGNED:return function(e){var r,s=void 0;if("team"===e.assigneeType){var o=H.Z.getById(e.assignee);return s=o?o.slug:"<unknown-team>",(0,C._N)("[author] assigned this issue to #[assignee]",{author:n,assignee:s})}return t.user&&t.assignee===t.user.id?(0,C._N)("[author] assigned this issue to themselves",{author:n}):(s=W.Z.getById(e.assignee),"object"===z()(s)&&null!==(r=s)&&void 0!==r&&r.email?(0,C._N)("[author] assigned this issue to [assignee]",{author:n,assignee:s.email}):(0,C._N)("[author] assigned this issue to an unknown user",{author:n}))}(t.data);case B.fc.UNASSIGNED:return(0,C._N)("[author] unassigned this issue",{author:n});case B.fc.MERGE:return(0,C.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",t.data.issues.length,n);case B.fc.REPROCESS:var h=t.data,v=h.oldGroupId,g=h.eventCount;return(0,C._N)("[author] reprocessed the events in this issue. [new-events]",L()({author:n},"new-events",(0,F.tZ)(M.Z,{to:"/organizations/".concat(r,"/issues/?query=reprocessing.original_issue_id:").concat(v)},(0,C.tn)("See %s new event","See %s new events",g))));case B.fc.MARK_REVIEWED:return(0,C._N)("[author] marked this issue as reviewed",{author:n});default:return""}var f}())}K.displayName="GroupActivityItem";const Q=K;var Y=r("./app/views/organizationGroupDetails/utils.tsx");var X=function(e){h()(o,e);var t,r,s=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=y()(t);if(r){var n=y()(this).constructor;e=Reflect.construct(s,arguments,n)}else e=s.apply(this,arguments);return g()(this,e)});function o(){var e;l()(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).state={createBusy:!1,error:!1,errorJSON:null,inputId:(0,O.E)()},e.handleNoteDelete=function(){var t=u()(i().mark((function t(r){var s,n,o,a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.modelId,n=r.text,o=e.props,a=o.api,u=o.group,(0,b.E3)((0,C.t)("Removing comment...")),t.prev=3,t.next=6,(0,Z.f_)(a,u,s,n);case 6:(0,b.B8)(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),(0,b.Iw)((0,C.t)("Failed to delete comment"));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNoteCreate=function(){var t=u()(i().mark((function t(r){var s,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props,n=s.api,o=s.group,e.setState({createBusy:!0}),(0,b.E3)((0,C.t)("Posting comment...")),t.prev=3,t.next=6,(0,Z.kT)(n,o,r);case 6:e.setState({createBusy:!1,inputId:(0,O.E)()}),(0,b.B8)(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({createBusy:!1,error:!0,errorJSON:t.t0.responseJSON||R.N7}),(0,b.Iw)((0,C.t)("Unable to post comment"));case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNoteUpdate=function(){var t=u()(i().mark((function t(r,s){var n,o,a,u,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.modelId,o=s.text,a=e.props,u=a.api,c=a.group,(0,b.E3)((0,C.t)("Updating comment...")),t.prev=3,t.next=6,(0,Z.Qk)(u,c,r,n,o);case 6:(0,b.B8)(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),e.setState({error:!0,errorJSON:t.t0.responseJSON||R.N7}),(0,b.Iw)((0,C.t)("Unable to update comment"));case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),e}return d()(o,[{key:"render",value:function(){var e=this,t=this.props,r=t.group,s=t.organization,o=r.activity,i=r.count,a=r.id,u=Number(i),c=(0,Y.Ad)(o),l=(0,Y.M3)(r,c),p=U.Z.get("user"),d=r&&r.project?[r.project.slug]:[],m={minHeight:140,group:r,projectSlugs:d,placeholder:(0,C.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,F.tZ)(x.Fragment,null,(l===Y.m7.REPROCESSED_AND_HASNT_EVENT||l===Y.m7.REPROCESSED_AND_HAS_EVENT)&&(0,F.tZ)(te,{reprocessActivity:c,groupCount:u,orgSlug:s.slug,groupId:a}),(0,F.tZ)("div",{className:"row"},(0,F.tZ)("div",{className:"col-md-9"},(0,F.tZ)("div",null,(0,F.tZ)(E.Z,{author:{type:"user",user:p}},(function(){return(0,F.tZ)(I.Z,n()({key:e.state.inputId,storageKey:"groupinput:latest",itemKey:r.id,onCreate:e.handleNoteCreate,busy:e.state.createBusy,error:e.state.error,errorJSON:e.state.errorJSON},m))})),r.activity.map((function(t){var o,i,a=t.user?t.user.name:"Sentry";return t.type===B.fc.NOTE?(0,F.tZ)(k.Z,{mini:!0,key:"note-".concat(t.id)},(0,F.tZ)(S.Z,n()({showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:a,onDelete:e.handleNoteDelete,onUpdate:e.handleNoteUpdate},m))):t.type!==B.fc.MARK_REVIEWED||null!=s&&null!==(o=s.features)&&void 0!==o&&o.includes("inbox")?(0,F.tZ)(k.Z,{mini:!0,key:"item-".concat(t.id)},(0,F.tZ)(E.Z,{author:{type:t.user?"user":"system",user:null!==(i=t.user)&&void 0!==i?i:void 0},date:t.dateCreated,header:(0,F.tZ)(Q,{author:(0,F.tZ)(N.Z,null,a),activity:t,orgSlug:e.props.params.orgId,projectId:r.project.id})})):null}))))))}}]),o}(x.Component);X.displayName="GroupActivity";const ee=(0,T.Z)((0,A.Z)(X));var te=(0,_.Z)(w.Z,{target:"ergnc8n0",label:"StyledReprocessedBox"})("margin:-",(0,j.Z)(3)," -",(0,j.Z)(4)," ",(0,j.Z)(4)," -",(0,j.Z)(4),";z-index:1;")}}]);
//# sourceMappingURL=GroupActivity.js.map