{"version":3,"sources":["@@\\panel_highcharts\\dist\\lib\\index.js","@@\\panel_highcharts\\dist\\lib\\models\\index.js","@@\\panel_highcharts\\dist\\lib\\models\\highchart.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["/* index.js */ function _(require, module, exports, __esModule, __esExport) {\r\n    __esModule();\r\n    const tslib_1 = require(\"tslib\");\r\n    const HighChartsExtensions = tslib_1.__importStar(require(\"3e9dd62cf5\") /* ./models/ */);\r\n    exports.HighChartsExtensions = HighChartsExtensions;\r\n    const base_1 = require(\"@bokehjs/base\");\r\n    base_1.register_models(HighChartsExtensions);\r\n}\r\n","/* models\\index.js */ function _(require, module, exports, __esModule, __esExport) {\r\n    __esModule();\r\n    var highchart_1 = require(\"7c98d48d47\") /* ./highchart */;\r\n    __esExport(\"HighChart\", highchart_1.HighChart);\r\n}\r\n","/* models\\highchart.js */ function _(require, module, exports, __esModule, __esExport) {\r\n    __esModule();\r\n    const html_box_1 = require(\"@bokehjs/models/layouts/html_box\");\r\n    class HighChartView extends html_box_1.HTMLBoxView {\r\n        connect_signals() {\r\n            super.connect_signals();\r\n            this.connect(this.model.properties.config.change, this.render);\r\n            this.connect(this.model.properties.config_update.change, this._handle_config_update_change);\r\n        }\r\n        render() {\r\n            super.render();\r\n            if (this.chart) {\r\n                this.chart.destroy();\r\n            }\r\n            const wn = window;\r\n            if (wn.Highcharts) {\r\n                const config = this._clean_config(this.model.config);\r\n                this.chart = wn.Highcharts.chart(this.el, config);\r\n            }\r\n            else {\r\n                console.error(\"HighCharts .js is not loaded. Could not create chart\");\r\n            }\r\n        }\r\n        after_layout() {\r\n            super.after_layout();\r\n            this._resize();\r\n        }\r\n        _resize() {\r\n            if (this.chart) {\r\n                this.chart.reflow();\r\n            }\r\n        }\r\n        _handle_config_update_change() {\r\n            const config_update = this._clean_config(this.model.config_update);\r\n            this.chart.update(config_update);\r\n        }\r\n        _clean_config(config) {\r\n            updateJS(config, this.model);\r\n            return config;\r\n        }\r\n    }\r\n    exports.HighChartView = HighChartView;\r\n    HighChartView.__name__ = \"HighChartView\";\r\n    class HighChart extends html_box_1.HTMLBox {\r\n        constructor(attrs) {\r\n            super(attrs);\r\n        }\r\n        static init_HighChart() {\r\n            this.prototype.default_view = HighChartView;\r\n            this.define(({ Any }) => ({\r\n                config: [Any],\r\n                config_update: [Any],\r\n                event: [Any],\r\n            }));\r\n            this.override({\r\n                height: 400,\r\n                width: 600\r\n            });\r\n        }\r\n    }\r\n    exports.HighChart = HighChart;\r\n    HighChart.__name__ = \"HighChart\";\r\n    HighChart.__module__ = \"panel_highcharts.models.highchart\";\r\n    HighChart.init_HighChart();\r\n    // https://api.highcharts.com/highcharts/plotOptions.series.point.events.mouseOver\r\n    function updateJS(config, model) {\r\n        if (config === null) {\r\n            return config;\r\n        }\r\n        for (var i = 0; i < Object.keys(config).length; i++) {\r\n            const key = Object.keys(config)[i];\r\n            const value = config[key];\r\n            if (typeof value == \"object\") {\r\n                updateJS(value, model);\r\n            }\r\n            else if (typeof value === \"string\") {\r\n                if (value[0].charAt(0) === \"@\") {\r\n                    const eventKey = value.slice(1, value.length);\r\n                    config[key] = (event) => sendEvent(event, model, eventKey);\r\n                }\r\n                else if (value.startsWith('function') && value.indexOf(\"{\") > -1 && value.lastIndexOf(\"}\") > -1) {\r\n                    const start = value.indexOf(\"{\");\r\n                    const end = value.lastIndexOf(\"}\");\r\n                    const command = value.slice(start + 1, end);\r\n                    try {\r\n                        config[key] = new Function(command);\r\n                    }\r\n                    catch (e) {\r\n                        config[key] = null;\r\n                        console.log(\"Could not set key '\" + key + \"' to function '\" + command + \"'. \", e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function sendEvent(event, model, key = null) {\r\n        const eventData = filterEventData(event, key);\r\n        // To make sure event gets sent we add a uuid\r\n        // https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid\r\n        eventData.uuid = uuidv4();\r\n        model.event = eventData;\r\n    }\r\n    function filterEventData(event, channel = null) {\r\n        const eventData = {};\r\n        if (channel !== null && channel !== \"\") {\r\n            eventData.channel = channel;\r\n        }\r\n        eventData.type = event.type;\r\n        updateEventdata(event, eventData);\r\n        return eventData;\r\n    }\r\n    function updateEventdata(event, eventData) {\r\n        if (event.hasOwnProperty(\"index\") && event[\"index\"] !== undefined) {\r\n            eventData.index = event[\"index\"];\r\n        }\r\n        if (event.hasOwnProperty(\"name\") && event[\"name\"] !== undefined) {\r\n            eventData.name = event[\"name\"];\r\n        }\r\n        if (event.hasOwnProperty(\"x\") && event.x !== undefined) {\r\n            eventData.x = event.x;\r\n        }\r\n        if (event.hasOwnProperty(\"y\") && event.y !== undefined) {\r\n            eventData.y = event.y;\r\n        }\r\n        if (event.hasOwnProperty(\"target\")) {\r\n            eventData.target = {};\r\n            updateEventdata(event.target, eventData.target);\r\n        }\r\n        if (event.hasOwnProperty(\"series\")) {\r\n            eventData.series = {};\r\n            updateEventdata(event.series, eventData.series);\r\n        }\r\n        if (event.hasOwnProperty(\"point\")) {\r\n            eventData.point = {};\r\n            updateEventdata(event.point, eventData.point);\r\n        }\r\n    }\r\n    function uuidv4() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n}\r\n"]}