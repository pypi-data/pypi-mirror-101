(self.webpackChunk_ideonate_jupyter_containds=self.webpackChunk_ideonate_jupyter_containds||[]).push([[231],{231:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>j});var a=t(449),s=t(408),o=t(441),i=t(275),r=t(390),d=t(919),c=t(245),l=t(129),u=t(290),p=t(862);const m="jp-MaterialIcon cds-dashboard-icon";var b;!function(e){e.containdsPanel="containds:control-panel",e.containdsCreate="notebook:open-with-containds",e.containdsOpen="containds:open-dashboard"}(b||(b={}));class h{constructor(e){this._commands=e}createNew(e){const n=new o.ToolbarButton({className:"containdsCreate",tooltip:"Deploy as a ContainDS Dashboard",iconClass:m,iconLabel:"Dashboard",onClick:()=>{this._commands.execute(b.containdsCreate)}});return e.toolbar.insertAfter("cellType","containdsCreate",n),n}}const w={id:"@ideonate/jupyter-containds:plugin",autoStart:!0,requires:[s.JupyterFrontEnd.IPaths,c.INotebookTracker],optional:[o.ICommandPalette,d.IMainMenu,r.ILauncher],activate:(e,n,t,a,s,o)=>{const{commands:r,docRegistry:d}=e,c=n.urls.hubHost||"",l=n.urls.hubPrefix||"";if(!l)return;console.debug("hub-extension: Found configuration ",{hubHost:c,hubPrefix:l});const u=c+i.URLExt.join(l,"dashboards-new"),p=c+i.URLExt.join(l,"dashboards");if(r.addCommand(b.containdsCreate,{label:"New ContainDS Dashboard",caption:"Create as a ContainDS Dashboard in New Browser Tab",execute:async n=>{const a=function(n){const a=t.currentWidget;return!1!==n.activate&&a&&e.shell.activateById(a.id),a}(n);if(!a)return;await a.context.save();const s=(o=a.context.path,u+i.URLExt.objectToQueryString({start_path:o,name:i.PathExt.basename(o,".ipynb").replace("_"," ")}));var o;window.open(s,"_blank")},isEnabled:function(){return null!==t.currentWidget&&t.currentWidget===e.shell.currentWidget}}),r.addCommand(b.containdsOpen,{label:e=>e.owned?e.name?`Edit '${e.name}'`:"Edit the ContainDS Dashboard":e.name?e.name:"Open the ContainDS Dashboard",caption:e=>e.owned?e.name?`Edit '${e.name}' Dashboard`:"Edit the ContainDS Dashboard":e.name?`Open ${e.username}'s '${e.name}' Dashboard in a New Browser Tab`:"Open a ContainDS Dashboard in a New Browser Tab",execute:e=>{const n=e.url,t=e.owned;n&&(t&&e.path?r.execute("docmanager:open",{path:e.path}):window.open(n,"_blank"))},icon:m}),r.addCommand(b.containdsPanel,{label:"ContainDS Dashboards Panel",caption:"Open the ContainDS Dashboards panel in a new browser tab",execute:()=>{window.open(p,"_blank")}}),a){const e="ContainDS Dashboard";a.addItem({command:b.containdsCreate,category:e}),a.addItem({command:b.containdsPanel,category:e})}s&&(s.fileMenu&&s.fileMenu.addGroup([{command:b.containdsPanel}],99),s.viewMenu&&s.viewMenu.addGroup([{command:b.containdsCreate}],1001)),o&&f.addDashboardsToLauncher(o,c+i.URLExt.join(l,"dashboards-api")).catch((e=>{console.error("Fail to add dashboards to the launcher",e)}));const w=new h(r);d.addWidgetExtension("Notebook",w)}};var f;!function(e){let n;e.addDashboardsToLauncher=async function(e,n){t=e,s=n,o.start()};let t,a=null,s="";const o=new p.Poll({auto:!1,factory:async()=>{await async function(){const e=await async function(e,n={}){let t;try{t=await fetch(e,Object.assign(Object.assign({},n),{cache:"no-cache"}))}catch(e){throw new u.ServerConnection.NetworkError(e)}const a=await t.json();if(!t.ok)throw new u.ServerConnection.ResponseError(t,a.message);return a}(s);if(JSON.stringify(e)!==JSON.stringify(n||{})){n=e,a&&(a.dispose(),a=null),a=new l.DisposableSet;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const s=n[e],o="_owned"===e;s.forEach((e=>{a.add(t.add({command:b.containdsOpen,args:Object.assign(Object.assign({},e),{owned:o}),category:o?"Your ContainDS Dashboards":"Shared ContainDS Dashboards"}))}))}}}()},frequency:{interval:61e3,backoff:!0,max:3e5},name:"@ideonate/jupyter-containds:plugin#dashboards"})}(f||(f={}));var y=t(657),g=t(367);const j=[{id:"@ideonate/jupyter-containds:widgets",requires:[a.IJupyterWidgetRegistry],activate:function(e,n){n.registerWidget({name:y.o,version:y.Y,exports:g})},autoStart:!0},w]},657:(e,n,t)=>{"use strict";t.d(n,{Y:()=>s,o:()=>o});const a=t(306),s=a.version,o=a.name},367:(e,n,t)=>{"use strict";t.r(n),t.d(n,{UserModel:()=>o});var a=t(449),s=t(657);class o extends a.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:o.model_name,_model_module:o.model_module,_model_module_version:o.model_module_version,_view_name:o.view_name,_view_module:o.view_module,_view_module_version:o.view_module_version,attrs:{},name:null})}initialize(e,n){super.initialize(e,n),fetch("/hub/dashboards-api/hub-info/user",{mode:"no-cors",credentials:"same-origin",headers:new Headers({"Access-Control-Allow-Origin":"*"})}).then((e=>e.json())).then((e=>{this.set("attrs",e),this.set("name",e.name),this.save_changes()})).catch((e=>{this.set("attrs",{}),this.set("name",""),this.save_changes(),console.error("Failed to fetch dashboard user metadata.",e)}))}}o.serializers=Object.assign({},a.DOMWidgetModel.serializers),o.model_name="UserModel",o.model_module=s.o,o.model_module_version=s.Y,o.view_name=null,o.view_module=null,o.view_module_version=""},306:e=>{"use strict";e.exports=JSON.parse('{"name":"@ideonate/jupyter-containds","version":"0.2.1","description":"Companion Jupyter extension for ContainDS","keywords":["jupyter","jupyterlab","jupyterlab-extension","containds","cdsdashboards","dashboards","jupyterhub","widgets"],"homepage":"https://github.com/ideonate/jupyter-containds","bugs":{"url":"https://github.com/ideonate/jupyter-containds/issues"},"license":"BSD-3-Clause","author":{"name":"Ideonate","email":"dan@containds.com"},"files":["lib/**/*.{d.ts,eot,gif,html,jpg,js,js.map,json,png,svg,woff2,ttf}","dist/*.js","style/**/*.{css,eot,gif,html,jpg,json,png,svg,woff2,ttf}"],"main":"lib/index.js","types":"lib/index.d.ts","style":"style/index.css","repository":{"type":"git","url":"https://github.com/ideonate/jupyter-containds.git"},"scripts":{"build":"npm run build:lib && npm run build:nbextension","build:labextension":"jupyter labextension build .","build:lib":"tsc","build:nbextension":"webpack -p","build:all":"npm run build && npm run build:labextension","clean":"npm run clean:lib && npm run clean:nbextension && npm run clean:labextension","clean:lib":"rimraf lib tsconfig.tsbuildinfo","clean:labextension":"rimraf jupyter_containds/labextension","clean:nbextension":"rimraf jupyter_containds/nbextension/static/index.js*","eslint":"eslint . --ext .ts,.tsx --fix","eslint:check":"eslint . --ext .ts,.tsx","prepack":"npm run build:lib","test":"npm run test:ci","test:ci":"karma start --browsers=ChromeCI tests/karma.conf.js","test:chrome":"karma start --browsers=Chrome tests/karma.conf.js","test:debug":"karma start --browsers=Chrome --singleRun=false --debug=true tests/karma.conf.js","test:firefox":"karma start --browsers=Firefox tests/karma.conf.js","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch"},"dependencies":{"@jupyter-widgets/base":"^3.0.0 || ^4.0.0","@jupyterlab/application":"^2.0.0 || ^3.0.0","@jupyterlab/coreutils":"^4.0.0 || ^5.0.0","@jupyterlab/launcher":"^2.0.0 || ^3.0.0","@jupyterlab/mainmenu":"^2.0.0 || ^3.0.0","@jupyterlab/notebook":"^2.0.0 || ^3.0.0","@jupyterlab/services":"^5.0.0 || ^6.0.0","@lumino/disposable":"^1.3.5","@lumino/polling":"^1.1.1"},"devDependencies":{"@jupyterlab/builder":"^3.0.0","@types/expect.js":"^0.3.29","@types/mocha":"^8.2.0","@types/node":"^14.14.13","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","expect.js":"^0.3.1","fs-extra":"^7.0.0","karma":"^5.2.3","karma-chrome-launcher":"^3.1.0","karma-coverage":"^2.0.1","karma-firefox-launcher":"^2.1.0","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-typescript":"^5.2.0","karma-typescript-es6-transform":"^5.2.0","mkdirp":"^0.5.1","mocha":"^8.2.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-loader":"^8.0.12","typescript":"~3.7.0","webpack":"^5.0.0","webpack-cli":"^3.3.10"},"sideEffects":["style/*.css"],"jupyterlab":{"extension":"lib/plugin","outputDir":"jupyter_containds/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);