#!/usr/bin/env python3
# This file is placed in the Public Domain.

import os, sys ; sys.path.insert(0, os.getcwd())


from botl.evt import events
from botl.krn import Kernel, exec, op
from botl.trc import exc
from botl.zzz import shutil, time, unittest
from botd.tbl import tbl

def main():
    k = Kernel(tbl)
    k.cfg.wd = ".test"
    k.rmdir(".test")
    k.debug()
    k.parse()
    k.start()
    pat = "test_%s*" % k.cfg.cmd or "*"
    suite = unittest.loader.TestLoader().discover("test", pattern=pat)
    unittest.TextTestRunner(verbosity=3).run(suite)
    k.wait()

exec(main)
for e in exc:
    print(e)
for e in events:
    print(e)
